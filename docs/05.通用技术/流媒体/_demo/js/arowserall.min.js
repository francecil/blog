"use strict";

function onYouTubeIframeAPIReady() {
	ArowserUI.Client.onYouTubeIframeAPIReady && ArowserUI.Client.onYouTubeIframeAPIReady()
}

function getFavApps(a) {
	var b = null,
		c = "https://www.fiiser.com/service/myfavorite/",
		d = "https://mobile.fiiser.com/service/myfavorite/",
		e = c;
	ArowserUI.Client.mobile && (e = d), $.ajax({
		url: e,
		dataType: "json",
		timeout: 5e3,
		type: "POST",
		cache: !1,
		xhrFields: {
			withCredentials: !0
		},
		success: function(c) {
			b = c, a(b)
		},
		error: function(c) {
			a(b)
		}
	})
}
var ArowserUI = ArowserUI || {},
	i18n;
ArowserUI.Client = {
		main: document.getElementById("main"),
		min_zoom: 1,
		max_zoom: 3,
		Current: null,
		orientation: 0,
		resizeInterval: null,
		mobile: !1,
		uiwebview: !1,
		iOS: !1,
		Android: !1,
		isClose: !1
	}, ArowserUI.Client.params = {
		history_app_id: null,
		current_app_id: null,
		type: "web",
		app_type: "A",
		category: 999,
		access_key: null,
		loading_ad_type: null,
		loading_ad_content: null,
		interstitial_ad: null,
		advertise_timeout: 0,
		single_page: "0",
		locale: "en",
		resolution_scale: .75,
		encode_type: "3",
		resolution: "auto",
		measureSpeedLowerbound: .8,
		measureSpeedIntervalTime: 3e4,
		fadeInFadeOutIntervalTime: 8e3,
		similar_app_length: null,
		commercial_number: 0,
		theme: "dark",
		disable_hotapps_link: !1,
		control_button_number: 5,
		enable_zoom: 1,
		zoom_status: 0,
		inIframe: !1,
		finish_page: 0,
		imageLoaded: -1,
		screenshot: "",
		replay: 0,
		layout: "control",
		redirect_app_download_url: null,
		ignore_onbeforeunload: !1,
		ignore_onbeforeunload_attach: !1,
		block_app_detail_link: !1,
		playStartTime: null,
		preplay_timeout_message: null,
		preplay_ending_advertise_type: null,
		preplay_ending_advertise_content: null,
		no_ad_text_list: null
	}, ArowserUI.Client.records = {
		internet_speed: 0,
		measuredSpeeds: [],
		measuredspeedTotal: 0,
		fastEnoughToPlay: !1
	}, ArowserUI.Client.scales = {
		low: .5,
		normal: .75,
		high: 1
	}, ArowserUI.Client.scales_264 = {
		low: .5,
		normal: .75,
		high: 1
	}, ArowserUI.Client.onYouTubeIframeAPIReady = null, ArowserUI.Client.Control = {
		sourceWidth: 480,
		sourceHeight: 800,
		controlWidth: 480,
		controlHeight: 60,
		endWidth: 480,
		endHeight: 860,
		loadingDisplayWidth: 336,
		loadingDisplayHeight: 602
	}, ArowserUI.Client.ImageURLS = {
		app_base: "https://imgnew.fiiser.com/service/proxy/image/w200/fiiser.png?src=https://www.fiiser.com/static/images/about/app_base.png"
	}, ArowserUI.Client.URLs = {
		bannerClick: "ajax/bannerClick",
		bannerDownload: "ajax/bannerDownload",
		bannerClose: "ajax/bannerClose",
		close: "ajax/close",
		back: "ajax/back",
		more: "ajax/more",
		zoomin: "ajax/zoomin",
		zoomout: "ajax/zoomout",
		score: "ajax/score",
		comment: "ajax/comment",
		shares: "ajax/shares",
		favs: "ajax/favs",
		mousemovement: "ajax/mousemovement",
		speed: "ajax/speed",
		shortenUrl: "ajax/shortenUrl"
	},
	function() {
		var a = ArowserUI.Client,
			b = function() {
				var a = !1;
				return function(b, c) {
					(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0, 4))) && (a = !0)
				}(navigator.userAgent || navigator.vendor || window.opera), a
			};
		a.mobile = b(), a.uiwebview = /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent), a.iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream, a.Android = /(android)/i.test(navigator.userAgent)
	}(), ArowserUI.Client.Load = function(a) {
		function b() {
			var b = d.Control,
				c = $(".end-fiiser"),
				e = new Image;
			e.src = a.screenshot, c.css("background-image", "url('" + a.screenshot + "')");
			var f = b.endHeight,
				g = b.endWidth;
			$(e).load(function() {
				e.width >= e.height ? (a.imageLoaded = 1, c.css({
					width: f + "px",
					height: g + "px"
				})) : (a.imageLoaded = 2, c.css({
					width: g + "px",
					height: f + "px"
				}))
			}).error(function() {
				a.imageLoaded = 0, c.css({
					width: f + "px",
					height: g + "px",
					"background-image": "url(" + d.ImageURLS.app_base + ")"
				})
			})
		}

		function c() {
			var c = d.URLs;
			Fiiser.Share.initShareEvent($("#sharePanel"), a), b(), a.game = i18n.t("Game") || "Game", "8" !== a.category.charAt(0) && (a.game = i18n.t("Application") || "Appication"), a.no_ad_text_list = [a.game + (i18n.t("Preparing") || "preparing"), i18n.t("Loading data") || "Loading data", a.game + (i18n.t("Starting") || "starting"), a.game + (i18n.t("About to start") || "about to start")], $(".loading_text").css("display", "inline-block"), $("div.loading").show(), $("div.download-loading").show(), $("div.light-loading").show(), 2 === a.enable_zoom && d.mobile && a.inIframe && (window.addEventListener("message", h.onReceiveMessage, !1), 0 === a.zoom_status ? $("div.fullscreen-loading").addClass("zoomin").show() : $("div.fullscreen-loading").addClass("zoomout").show(), $(document).on("click", "div.fullscreen-loading", function() {
				$(this).hasClass("zoomin") ? (a.zoom_status = 1, $(this).removeClass("zoomin").addClass("zoomout")) : (a.zoom_status = 0, $(this).removeClass("zoomout").addClass("zoomin"), window.parent.postMessage("exit fullscreen", "*"))
			})), 1 === a.replay && a.inIframe && 1 === a.finish_page && window.parent.postMessage("arowser replay", "*");
			var i = a.loading_ad_type;
			"html" === i && $("#html_ad").show();
			var j = g.playArowser,
				k = g.waitForArowserReady,
				l = d.Control,
				m = a.advertise_timeout;
			if(i)
				if("video" === i || "youtube" === i) {
					var n = function(b, c) {
						function f() {
							if(!n) {
								n = !0;
								var b = m;
								setTimeout(function() {
									var c = i18n.t("Try Now") || "Try Now";
									c += " " + b + "secs", p.text(c + "..").show();
									var d = setInterval(function() {
										b--, c = i18n.t("Try Now") || "Try Now", c += " " + b + "secs", p.text(c + ".."), 0 === b && (clearInterval(d), c = i18n.t("Preparing") || "preparing", p.text(a.game + c + ".."), console.log("wait ready 1"), setTimeout(function() {
											c = i18n.t("About to start") || "about to start", p.text(a.game + c + "..")
										}, 4e3), k(function() {
											p.hide(), o.show()
										}))
									}, 1e3)
								}, 3e3)
							}
						}

						function g() {
							k(function() {
								j.oncomplete && j.oncomplete()
							})
						}

						function h() {
							var a, d = document.getElementById("advertise"),
								f = $("div.ad_frame"),
								g = $("div.advertise_ui");
							if(e) {
								var h, h;
								a = Math.min(e.offsetWidth / b, e.offsetHeight / c);
								var d = document.getElementById("advertise");
								d && (d.style.width = b * a + "px", d.style.height = c * a + "px");
								var h = "scale(" + a + "," + a + ")";
								g.css("transform", h).css("-webkit-transform", h).css("-moz-transform", h).css("-o-transform", h).css("-ms-transform", h);
								var h = "translate(-50%, -50%)";
								f.css("position", "absolute").css("top", "50%").css("left", "50%").css("transform", h).css("-webkit-transform", h).css("-moz-transform", h).css("-o-transform", h).css("-ms-transform", h);
								var i = b * a,
									j = c * a;
								l && l.setSize(i, j)
							}
						}
						var j = this;
						this.oncomplete = null;
						var l = null,
							n = !1,
							o = $(".advertise_ui button.skip"),
							p = $(".advertise_ui div.description"),
							q = !1,
							r = i18n.t("Try Now") || "Try Now";
						o.text(r + "  >>"), o.on("mousedown", function() {
							q = !0
						}), o.on("mousestart", function() {
							q = !0, $(this).css("color", "#e78f08")
						}), o.on("mouseup", function() {
							q && (q = !1, j.oncomplete && j.oncomplete())
						}), o.on("touchend", function() {
							q && (q = !1, $(this).css("color", "white"), j.oncomplete && j.oncomplete())
						});
						var s = {
							isMobile: d.mobile,
							videoWidth: b,
							videoHeight: c,
							onVideoPlaying: f,
							onVideoEnded: g,
							onVideoReady: function() {
								h()
							}
						};
						this.updateAdvertiseSize = function() {
							h()
						}, this.play = function() {
							try {
								"youtube" === i ? (l = new ArowserUI.Client.Utility.Youtube(s, a.loading_ad_content), ArowserUI.Client.onYouTubeIframeAPIReady = l.onYouTubeIframeAPIReady) : "video" === i && (l = new ArowserUI.Client.Utility.Videojs(s, a.loading_ad_content)), h()
							} catch(b) {}
						}, this.close = function() {
							l.close && l.close(), $("div.ad_frame").remove()
						}
					};
					f = new n(l.endHeight, l.endWidth), f.oncomplete = j
				} else {
					var o = function(b) {
						function c(a) {
							if(a = Math.max(a, d.min_zoom), a = Math.min(a, d.max_zoom), e && (e.style.width = d.displayWidth * a + "px", e.style.height = d.displayHeight * a + "px"), f) {
								var b = "scale(" + a + "," + a + ")";
								f = ArowserUI.Client.Tool.transformOrigin(f, b)
							}
							d.displayScale = a;
							var c = document.getElementsByClassName("light-loading")[0];
							if(c) {
								var b = "scale(1, " + a + ")";
								c = ArowserUI.Client.Tool.transformOrigin(c, b)
							}
						}
						this.oncomplete = null;
						var d = this;
						this.min_zoom = 1, this.max_zoom = 3, this.displayScale = 1, this.displayWidth = l.loadingDisplayWidth, this.displayHeight = l.loadingDisplayHeight;
						var e = document.getElementById("mainframe-bc"),
							f = document.getElementById("content-bc");
						f && (f.style.width = this.displayWidth + "px", f.style.height = this.displayHeight + "px");
						var g = parseInt(b);
						this.updateAdvertiseSize = function() {
							var a = d.displayScale === d.min_zoom,
								b = ArowserUI.Client.main;
							b && (d.min_zoom = Math.min(b.offsetWidth / Math.max(d.displayWidth, 1), b.offsetHeight / Math.max(d.displayHeight, 1)), d.max_zoom = Math.max(d.min_zoom, 3), d.displayScale < d.min_zoom || a ? c(d.min_zoom) : d.displayScale > d.max_zoom && c(d.max_zoom))
						}, this.play = function() {
							g ? setTimeout(function() {
								var b = $(".ad_countdown"),
									c = g + " sec";
								b.text(c);
								var e = setInterval(function() {
									g--, c = g + " sec", b.text(c), 0 >= g && (clearInterval(e), c = i18n.t("Preparing") || "preparing", b.text(a.game + c + ".."), console.log("wait ready 1"), setTimeout(function() {
										c = i18n.t("About to start") || "about to start", b.text(a.game + c + "..")
									}, 4e3), k(function() {
										b.text(""), d.oncomplete && d.oncomplete()
									}))
								}, 1e3)
							}, 3e3) : (console.log("wait ready 2"), k(function() {
								d.oncomplete && d.oncomplete()
							}))
						}, this.close = function() {
							e.parentNode.removeChild(e)
						}
					};
					f = new o(m), f.oncomplete = j
				}
			else {
				var p = function() {
					function b(a) {
						if(a = Math.max(a, c.min_zoom), a = Math.min(a, c.max_zoom), d && (d.style.width = c.displayWidth * a + "px", d.style.height = c.displayHeight * a + "px"), e) {
							var b = "scale(" + a + "," + a + ")";
							e = ArowserUI.Client.Tool.transformOrigin(e, b)
						}
						var f = document.getElementsByClassName("light-loading")[0];
						if(f) {
							var b = "scale(1," + a + ")";
							f = ArowserUI.Client.Tool.transformOrigin(f, b)
						}
						c.displayScale = a
					}
					var c = this;
					this.min_zoom = 1, this.max_zoom = 3, this.displayScale = 1, this.displayWidth = l.loadingDisplayWidth, this.displayHeight = l.loadingDisplayHeight;
					var d = document.getElementById("mainframe-bc"),
						e = document.getElementById("content-bc");
					e && (e.style.width = this.displayWidth + "px", e.style.height = this.displayHeight + "px"), this.updateAdvertiseSize = function() {
						var a = c.displayScale === c.min_zoom,
							d = ArowserUI.Client.main;
						d && (c.min_zoom = Math.min(d.offsetWidth / Math.max(c.displayWidth, 1), d.offsetHeight / Math.max(c.displayHeight, 1)), c.max_zoom = Math.max(c.min_zoom, 3), c.displayScale < c.min_zoom || a ? b(c.min_zoom) : c.displayScale > c.max_zoom && b(c.max_zoom))
					}, this.run = function() {
						$("#no_ad").show();
						var b = a.apk_size,
							c = 1500;
						b > 1e8 ? c = 5e3 : b > 1e6 && (c = 3e3), console.log("apk_size = " + b + " loading_interval = " + c);
						var d = a.no_ad_text_list.shift();
						$("#no_ad_text").text("   " + d + "...");
						var e = function() {
							if(g.startArowser === !1)
								if(0 === a.no_ad_text_list.length) clearInterval(ArowserUI.Client.loadingInterval);
								else {
									var b = a.no_ad_text_list.shift();
									$("#no_ad_text").text("   " + b + "...")
								}
							else clearInterval(ArowserUI.Client.loadingInterval)
						};
						ArowserUI.Client.loadingInterval = setInterval(e, c)
					}
				};
				f = new p, f.run()
			}
			ArowserUI.Client.ad = f, h.onAccesskey = function(b) {
				if("url" === a.loading_ad_type) {
					var e = ArowserUI.Client.Tool.getAuthCode(),
						g = $("#url_ad"),
						h = a.loading_ad_content + "&access_key=" + b + "&auth_code=" + e;
					$(".iframe-url-upper").on("click", function() {
						$.post(c.bannerClick, {
							auth_code: e,
							access_key: b,
							commercial_number: a.commercial_number
						})
					}), g.attr("src", h).show()
				}
				ArowserUI.Client.Utility.measureSpeed(function(c) {
					if(i) {
						if("adsense" === i) {
							var e;
							try {
								(e = window.adsbygoogle || []).push({})
							} catch(g) {}
						}
						f && f.play ? (console.log("has ad"), f.play()) : (console.log("no ad"), k(function() {
							j()
						}))
					}
					var h = function(b) {
							var c = $("#mainframe-bc .speedPanel");
							c.find(".speed-text").text(b);
							var e = i18n.t("FIISER Kindly Reminder") || "FIISER Kindly Reminder";
							c.find(".title-text").text(e);
							var f = i18n.t("Slow") || "slow";
							f = "<span class='speed-status'>" + f + "</span>";
							var g = i18n.t("Speed Warning Text", {
								n: f
							}) || "Due to the " + f + " internet speed, preplay quality may be affected";
							c.find(".speed-info").html(g);
							var h = c.height();
							$("#no_ad_text").hide(), c.css({
								display: "block",
								bottom: "-" + h + "px"
							}).animate({
								bottom: "60px"
							}, 1e3), "0" === a.encode_type ? (a.resolution = "auto", a.resolution_scale = d.scales.low) : (a.resolution_scale = d.scales_264.low, d.mobile ? a.resolution = "low" : a.resolution = "auto")
						},
						l = c.speed;
					if(l >= a.measureSpeedLowerbound) ArowserUI.Client.records.fastEnoughToPlay = !0, console.log("speed enough"), ArowserUI.Client.records.measuredSpeeds.push(l);
					else if(l > 0) {
						var m = l.toFixed(2) + " Mbps";
						h(m), ArowserUI.Client.records.fastEnoughToPlay = !0, console.log("speed not enough"), ArowserUI.Client.records.measuredSpeeds.push(l)
					} else h(""), setTimeout(function() {
						ArowserUI.Client.records.fastEnoughToPlay = !0, console.log("speed<0")
					}, 2e3);
					console.log("post speed = " + l), $.post("ajax/speed", {
						access_key: b,
						internet_speed: l
					});
					for(var n = ArowserUI.Client.records.measuredSpeeds, o = 0, p = n.length, q = 0; p > q; q++) o += n[q];
					p > 0 && (ArowserUI.Client.records.internet_speed = o / p)
				})
			}, h.updateDisplayScale(), h.onSuccess && h.onSuccess()
		}
		var d = ArowserUI.Client,
			e = d.main,
			f = null,
			g = null,
			h = this;
		this.onSuccess = null, this.onAccesskey = null, this.updateDisplayScale = function() {
			f && f.updateAdvertiseSize()
		}, this.onReceiveMessage = function(b) {
			var c = $("div.fullscreen-loading");
			switch(b.data) {
				case "enter fullscreen":
					a.zoom_status = 1, c.removeClass("zoomin").addClass("zoomout");
					break;
				case "exit fullscreen":
					a.zoom_status = 0, c.removeClass("zoomout").addClass("zoomin")
			}
		}, this.run = function() {
			ArowserUI.Client.Current = h, g = new ArowserUI.Client.Prepare, ArowserUI.Client.prepare = g, i18n = i18next, i18n.use(i18nextXHRBackend).init({
				lng: a.locale,
				backend: {
					loadPath: "resources/js/locale/__ns__-__lng__.json"
				},
				interpolation: {
					prefix: "__",
					suffix: "__",
					unescapePrefix: "~"
				}
			}, c)
		}
	}, ArowserUI.Client.Init = function(a) {
		var b = this;
		this.onSuccess = null, this.run = function() {
			Arowser.getToken(function(c) {
				a.token = c, Arowser.getAccessKey(a, function(c, d) {
					if(0 !== c) return d && d.errormsg ? a.error = d.errormsg : a.error = "client_error", void(b.onSuccess && b.onSuccess());
					a.access_key = d.access_key;
					var e = ArowserUI.Client.load;
					e.onAccesskey && e.onAccesskey(a.access_key), $(".hidden").attr("data-ak", d.access_key), $(".ak-adder").each(function() {
						var b = $(this).attr("href");
						$(this).attr("href", b + "&access_key=" + a.access_key)
					}), $(".from-ak-adder").each(function() {
						var b = $(this).attr("href");
						$(this).attr("href", b + "&from_access_key=" + a.access_key)
					}), a.redirect_app_download_url += "&access_key=" + a.access_key, a.app_url_link_high += "&from_access_key=" + a.access_key, a.app_url_link_normal += "&from_access_key=" + a.access_key;
					var f = (new Date).getTime();
					console.log("currentTime (before init): " + f), Arowser.init(a, function(c, d) {
						var e = (new Date).getTime();
						console.log("currentTime (after init): " + e), console.log("spend : " + (e - f) + " ms"), c ? 1 === d && (a.error = "progress") : a.error = "" === a.error ? "error" : a.error, b.onSuccess && b.onSuccess()
					})
				})
			})
		}
	}, ArowserUI.Client.Start = function(a) {
		function b(a, b, c) {
			var d = new RegExp("([?&])" + b + "=.*?(&|$)", "i"),
				e = -1 !== a.indexOf("?") ? "&" : "?";
			return a.match(d) ? a.replace(d, "$1" + b + "=" + c + "$2") : a + e + b + "=" + c
		}

		function c(a) {
			var c = g.params,
				e = a.query_string;
			return a.history_app_id && (e = b(e, "history_app_id", a.history_app_id)), a.current_app_id && (e = b(e, "current_app_id", a.current_app_id)), a.commercial_number && (e = b(e, "cmno", a.commercial_number)), a.referer && (e = b(e, "referer", encodeURIComponent(a.referer))), a.locale && (e = b(e, "locale", a.locale)), a.resolution_scale && (e = b(e, "resolution_scale", a.resolution_scale)), a.clientIp && (e = b(e, "clientip", a.clientIp)), a.userAgent && (e = b(e, "useragent", encodeURIComponent(a.userAgent))), a.query_string = e, 1 === a.finish_page && (a.block_app_detail_link = !0), a.inIframe = function() {
				try {
					return window.self !== window.top
				} catch(a) {
					return !0
				}
			}(), a.inIframe || $(".link").removeAttr("target"), Arowser.support() || (a.error = "oldbrowser"), g.iOS ? window.addEventListener("pagehide", function(a) {
				c.ignore_onbeforeunload || d(!0), c.ignore_onbeforeunload = !1
			}, !1) : $(window).on("beforeunload", function() {
				c.ignore_onbeforeunload || d(), c.ignore_onbeforeunload = !1
			}), $.extend(c, a), "clear" === c.layout && (g.Control.controlHeight = 0), "0" !== c.encode_type && ("high" === c.resolution || "auto" === c.resolution ? c.resolution_scale = g.scales_264.high : "normal" === c.resolution ? c.resolution_scale = g.scales_264.normal : "low" === c.resolution && (c.resolution_scale = g.scales_264.low)), c.advertise_timeout = parseInt(c.advertise_timeout), 0 === c.advertise_timeout && (c.advertise_timeout = 5), c
		}

		function d(a) {
			var b = ArowserUI.Client.params.access_key,
				c = ArowserUI.Client.records.internet_speed;
			if(b) {
				var d = h.protocol + h.connect_url + "/action/leave?access_key=" + b + "&internet_speed=" + c;
				a ? $.ajax({
					url: d,
					async: !1
				}) : $.get(d)
			}
		}

		function e(a, b, c) {
			try {
				f(a, b, function() {
					c && c()
				}), ArowserUI.Client.Error(a, b)
			} catch(d) {
				throw d
			}
		}

		function f(a, b, c) {
			var d = "";
			a && (d = "&error=" + a), b && (d += "&code=" + b);
			try {
				var e = h.access_key;
				$.ajax({
					url: h.protocol + h.connect_url + "/action/close?access_key=" + e + "&internet_speed=" + ArowserUI.Client.records.internet_speed + d,
					timeout: 5e3,
					success: function(a) {
						c()
					},
					error: function(a) {
						c()
					}
				})
			} catch(f) {
				return void c()
			}
		}
		var g = ArowserUI.Client,
			h = c(a);
		try {
			var i = new g.Load(h);
			g.load = i, i.onSuccess = function() {
				if("" !== h.error) return void e(h.error, h.errorCode);
				var a = new g.Init(h);
				a.onSuccess = function() {
					if("" !== h.error) return void e(h.error, h.errorCode);
					var a = g.prepare;
					a.onError = e, a.onSuccess = function() {
						var a = new g.Play(h.access_key);
						a.onError = e, a.run()
					}, a.run(h)
				}, a.run()
			}, i.run()
		} catch(j) {
			throw e(null, 1e3), j
		}
	}, ArowserUI.Client.Prepare = function() {
		function a(a, e) {
			b(), console.log("clear client pinger"), clearInterval(g), d.onError && d.onError(a, e, function() {
				c()
			})
		}

		function b() {
			if(e) try {
				e.close()
			} catch(a) {}
		}

		function c() {
			if(f) try {
				f.close()
			} catch(a) {}
		}
		this.onSuccess = null, this.onError = null;
		var d = this,
			e = null,
			f = null,
			g = null;
		this.startArowser = !1, this.updateDisplayScale = function() {
			e && e.updateAdvertiseSize()
		};
		var h = !1;
		this.waitForArowserReady = function(a) {
			if(console.log("wait to play"), h && ArowserUI.Client.records.fastEnoughToPlay) return void(a && a());
			var b = setInterval(function() {
				h && ArowserUI.Client.records.fastEnoughToPlay && (clearInterval(b), a && a())
			}, 100)
		}, this.playArowser = function() {
			console.log("play"), d.startArowser || (d.startArowser = !0, b(), console.log("play run, clear client pinger"), clearInterval(g), d.onSuccess && d.onSuccess())
		}, this.run = function(b) {
			var c = d.waitForArowserReady,
				i = d.playArowser;
			console.log("start client pinger"), g = setInterval(function() {
				console.log("ping...")
			}, 1e3);
			var j = ArowserUI.Client;
			j.main;
			ArowserUI.Client.Current = d, e = ArowserUI.Client.ad;
			var k = b.access_key,
				l = b.loading_ad_type;
			f = new ArowserUI.Client.Utility.ChainedWebsocket(new ArowserUI.Client.Utility.WebsocketControl(b.protocol + b.connect_url + "/sock-status", k, 1), new ArowserUI.Client.Utility.WebsocketControl(b.protocol + b.connect_url + "/sock-status", k, 2), new ArowserUI.Client.Utility.EventSourceControl(b.protocol + b.connect_url + "/ev/ev-status", k)), f.onresult = function(d) {
				var e = d.state;
				if("ready" === e) console.log("ready"), l ? (console.log("ready with ad"), h = !0) : (console.log("ready without ad"), h = !0, c(function() {
					if(console.log("no ad ready"), clearInterval(ArowserUI.Client.loadingInterval), b.no_ad_text_list.length > 0) {
						var a = b.no_ad_text_list.pop();
						$("#no_ad_text").text("   " + a + "..."), setTimeout(i, 500)
					} else i()
				}));
				else if("preparing" === e) $.ajax({
					url: b.protocol + b.connect_url + "/ajax/info",
					type: "POST",
					data: {
						access_key: b.access_key
					},
					success: function(a) {
						$(".hidden").attr("data-wn", a)
					}
				});
				else if("interrupt" === e) a("interrupt");
				else if("fail" === e) {
					var f = d.code;
					a("error", f)
				} else "busy" === e ? a("busy") : "unarowserable" === e ? a("unarowserable") : "update" === e && a("update")
			}, f.onerror = function(b) {
				throw a("disconnect", 1001), b
			}, f.onclose = function(b) {
				a("disconnect", 1003)
			}, console.log("connect status"), f.connect(), location.hash = "", $("#display").hide(), this.updateDisplayScale()
		}
	}, ArowserUI.Client.Play = function(a) {
		function b(b) {
			null !== b && void 0 !== b && (R.push(b.toString()), R.length === S && ($.post(F.mousemovement, {
				access_key: a,
				movement: R.join(";")
			}), R.length = 0))
		}

		function c(a) {
			if(a) {
				var b = 0,
					c = 0;
				if(a.touches && a.touches.length) {
					var d = a.touches[0];
					b = d.clientX, c = d.clientY
				} else if(a.changedTouches && a.changedTouches.length) {
					var d = a.changedTouches[0];
					b = d.clientX, c = d.clientY
				} else b = a.clientX, c = a.clientY;
				b - P === 0 && c - Q === 0 || (O = (new Date).getTime(), P = b, Q = c)
			}
		}

		function d(b) {
			var c = function(a) {
				ArowserUI.Client.orientation = a, H = a, G.updateDisplayScale()
			};
			I = new ArowserUI.Client.Utility.ChainedWebsocket(new ArowserUI.Client.Utility.WebsocketControl(E.protocol + E.connect_url + "/sock-control", a, 1), new ArowserUI.Client.Utility.WebsocketControl(E.protocol + E.connect_url + "/sock-control", a, 2), new ArowserUI.Client.Utility.EventSourceControl(E.protocol + E.connect_url + "/ev/ev-control", a)), I.onopen = function() {
				$("#display").show(), G.updateDisplayScale(), $("div.ad_frame").remove()
			}, I.onresult = function(a) {
				if(a) {
					var d = a.orientation;
					void 0 !== d && c(d);
					var g = a.appLoginShow,
						h = a.embeddedType;
					if(g || h) switch(g && (h = E.preplay_ending_advertise_type, a.embeddedContent = E.preplay_ending_advertise_content, a.embeddedEnd = !0), h) {
						case "html":
						case "url":
						case "adsense":
						case "vpon":
							f(h, a.embeddedContent, a.embeddedEnd);
							break;
						case "end":
							if(a.embeddedContent) {
								var i = ArowserUI.Client.Tool.getAuthCode(),
									j = E.access_key,
									k = $(".customized-download iframe"),
									l = a.embeddedContent + "&access_key=" + j + "&auth_code=" + i;
								$(".iframe-end-upper").on("click", function() {
									$.post(F.bannerClick, {
										auth_code: i,
										access_key: j,
										commercial_number: E.commercial_number
									})
								}), k.attr("src", l), $(".error-download").show()
							}
							e(5, function() {
								q("timeout")
							})
					}
					var m = a.state;
					if("finish" === m) q();
					else if("fail" === m) {
						var n = a.code;
						q("error", n)
					} else if("disconnect" === m) q("disconnect");
					else if("timeout" === m) e(5, function() {
						q("timeout")
					});
					else if("interrupt" === m) q("interrupt");
					else if("update" === m) q("update");
					else if("update_alert" === m) {
						var o = a.remainderTime;
						if(o) var p = setInterval(function() {
							if(o >= 0) {
								var a = i18n.t("System update, this will stop after n seconds", {
									n: o
								}) || "System update, this will stop after " + o + " seconds";
								C.setText(".text-content", a), C.fadeIn(3e3), o--
							} else clearInterval(p)
						}, 1e3)
					}
					var r = a.inputShown;
					r && E.inIframe && window.parent.postMessage("focus iframe", "*");
					var s = a.gpsOn;
					void 0 !== s && b.ongps && b.ongps(s);
					var t = a.gsensorOn;
					void 0 !== t && b.ongsensor && b.ongsensor(t);
					var u = a.gyroscopeOn;
					void 0 !== u && b.ongyroscope && b.ongyroscope(u)
				}
			}, I.onerror = function(a) {
				throw q("disconnect", 1001), a
			}, I.onclose = function() {
				r()
			}, console.log("connect control"), I.connect(), J = new ArowserUI.Client.Utility.ChainedWebsocket(new ArowserUI.Client.Utility.WebsocketControl("sock-ad-control", a, 1, E.current_app_id, E.app_type, E.commercial_number), new ArowserUI.Client.Utility.EventSourceControl("ev/ev-ad-control", a, E.current_app_id, E.app_type, E.commercial_number)), J.onresult = function(a) {
				if(a) {
					var b = a.embeddedType;
					if(b) switch(b) {
						case "html":
						case "url":
						case "adsense":
						case "vpon":
							f(b, a.embeddedContent, a.embeddedEnd);
							break;
						case "end":
							if(a.embeddedContent) {
								var c = ArowserUI.Client.Tool.getAuthCode(),
									d = E.access_key,
									g = $(".customized-download iframe"),
									h = a.embeddedContent + "&access_key=" + d + "&auth_code=" + c;
								$(".iframe-end-upper").on("click", function() {
									$.post(F.bannerClick, {
										auth_code: c,
										access_key: d,
										commercial_number: E.commercial_number
									})
								}), g.attr("src", h), $(".error-download").show()
							}
							e(5, function() {
								q("timeout")
							})
					}
				}
			}, J.connect()
		}

		function e(a, b) {
			var c = setInterval(function() {
				if(a > 0) {
					var d = i18n.t("Service is going to finish, please download to continue playing") || "Service is going to finish, please download to continue playing.";
					d += " " + a + "sec", C.setText(".text-content", d), C.fadeIn(3e3), a--
				} else clearInterval(c), b && b()
			}, 1e3);
			$("#shader").animate({
				backgroundColor: "rgba(0,0,0,0.8)"
			}, 6e3, null)
		}

		function f(b, c, d) {
			if((!x || !x.isShow()) && "popupad" === E.interstitial_ad && u) {
				v && v.isShow() && v.hide(), w && w.isShow() && w.hide(), u.isShow() && u.hide();
				var e = u.getContent();
				$(e).find(".iframe-upper").hide();
				var f = document.createDocumentFragment(),
					g = document.createElement("iframe");
				if(g) switch(g.style.width = "336px", g.style.height = "280px", g.style.border = "0px", g.style.margin = g.style.padding = "0", b) {
					case "url":
						var h = ArowserUI.Client.Tool.getAuthCode();
						g.src = c + "&access_key=" + a + "&auth_code=" + h, g.setAttribute("scrolling", "no"), $(e).find(".iframe-upper").show(), f.appendChild(g), d === !0 ? ($(e).find(".controlButtons").hide(), $(e).find(".popupAdvertisePanel").css("background-color", "transparent").css("border", "none"), u.setShadowClass("shadow-dark")) : ($(e).find(".controlButtons").show(), $(e).find(".popupAdvertisePanel").css("background-color", "black").css("border", "solid 1px #8E8A8A"), u.setShadowClass("shadow"));
						break;
					case "html":
						g.src = "data:text/html;charset=utf-8," + encodeURI(c), g.style.backgroundColor = "white", f.appendChild(g);
						break;
					case "adsense":
						var i = document.createElement("ins");
						i.className = "adsbygoogle", i.style.display = "inline-block", i.style.width = "336px", i.style.height = "280px";
						var j = document.createElement("script");
						j.innerHTML = "try {(adsbygoogle = window.adsbygoogle || []).push({});} catch (ex) {}", f.appendChild(i), f.appendChild(j);
						break;
					case "vpon":
						var k = document.createElement("vpon");
						k.setAttribute("vpon_ad_test", "1"), k.setAttribute("vpon_ad_licensy_key", "8a8081824e901c67014eaa5878c623b5"), k.setAttribute("vpon_ad_format", "300x250_mb"), k.setAttribute("debug", "false");
						var j = document.createElement("script");
						j.src = "http://m.vpon.com/sdk/vpadn-sdk.js", f.appendChild(k), f.appendChild(j)
				}
				var l = e.querySelector(".ad_content");
				if(l && (l.innerHTML = "", l.appendChild(f)), u.setCloseCallback(function() {
						$("#backControl").prop("disabled", !1), $("#markControl").prop("disabled", !1), $("#closeControl").prop("disabled", !1), u && (u.setCloseCallback(null), u.setLock(!1)), "url" === b && $.post(F.bannerClose, {
							auth_code: h,
							access_key: a,
							commercial_number: E.commercial_number
						})
					}), u.setDownloadCallback(function() {
						u && u.setDownloadCallback(null), "url" === b && $.post(F.bannerDownload, {
							auth_code: h,
							access_key: a,
							commercial_number: E.commercial_number
						});
						var c = E.redirect_app_download_url + "&download_type=303";
						r(), ArowserUI.Client.Analytics.trackEvent("download"), E.inIframe ? window.open(c, "_blank") : window.open(c, "_self")
					}), u.setLock(!0), $("#backControl").prop("disabled", !0), $("#markControl").prop("disabled", !0), $("#closeControl").prop("disabled", !0), u.show(), "url" === b) {
					var m = $(u.getContent()).find(".iframe-upper");
					m.off("click"), m.on("click", function() {
						$.post(F.bannerClick, {
							auth_code: h,
							access_key: a,
							commercial_number: E.commercial_number
						});
						var b = E.redirect_app_download_url + "&download_type=303";
						r(), ArowserUI.Client.Analytics.trackEvent("download"), E.inIframe ? window.open(b, "_blank") : window.open(b, "_self")
					})
				}
			}
		}

		function g(a) {
			a = Math.max(a, ArowserUI.Client.min_zoom), a = Math.min(a, ArowserUI.Client.max_zoom);
			var b = ArowserUI.Client.attachedClient;
			if(b) {
				b.getDisplay().scale(a);
				var c = ArowserUI.Client.params.resolution_scale,
					d = b.getDisplay().getElement(),
					e = document.getElementById("mainScreen"),
					f = document.getElementById("display");
				if("auto" === ArowserUI.Client.params.type) {
					var g = ArowserUI.Client.main;
					if(g) {
						var h = g.offsetWidth,
							i = g.offsetHeight;
						if(h > i) {
							var j = ArowserUI.Client.Control.controlHeight * a * c,
								k = parseInt(d.style.height) + j;
							if(f.style.width = k + "px", e) {
								var h = parseInt(d.style.width),
									l = "perspective(1px) rotate(270deg) translate(-" + h + "px, 0)";
								e = ArowserUI.Client.Tool.transformOrigin(e, l, "0 0")
							}
							270 === H && (d = ArowserUI.Client.Tool.transformOrigin(d, "rotate(180deg) translate(-" + h + "px, 0)", "0 50%"))
						} else f && (f.style.width = d.style.width), e && (e = ArowserUI.Client.Tool.transformOrigin(e, "")), d = ArowserUI.Client.Tool.transformOrigin(d, ""), 180 !== H && 270 !== H || (d = ArowserUI.Client.Tool.transformOrigin(d, "rotate(180deg)", "50% 50%"))
					}
					E.inIframe && (90 === H || 270 === H ? window.parent.postMessage("orientation landscape", "*") : window.parent.postMessage("orientation portrait", "*"))
				} else if("app" === ArowserUI.Client.params.type) f && (f.style.width = d.style.width), d = ArowserUI.Client.Tool.transformOrigin(d, ""), 180 !== H && 270 !== H || (d = ArowserUI.Client.Tool.transformOrigin(d, "rotate(180deg)", "50% 50%")), E.inIframe && window.parent.postMessage("orientation portrait", "*");
				else if(90 === H || 270 === H) {
					var j = ArowserUI.Client.Control.controlHeight * a * c,
						k = parseInt(d.style.height) + j;
					f && (f.style.width = k + "px");
					var h = parseInt(d.style.width);
					e && (e = ArowserUI.Client.Tool.transformOrigin(e, "perspective(1px) rotate(270deg) translate(-" + h + "px, 0)", "0 0")), 270 === H && (d = ArowserUI.Client.Tool.transformOrigin(d, "rotate(180deg) translate(-" + h + "px, 0)", "0 50%")), E.inIframe && window.parent.postMessage("orientation landscape", "*")
				} else f && (f.style.width = d.style.width), e && (e = ArowserUI.Client.Tool.transformOrigin(e, "")), d = ArowserUI.Client.Tool.transformOrigin(d, ""), 180 === H && (d = ArowserUI.Client.Tool.transformOrigin(d, "rotate(180deg)", "50% 50%")), E.inIframe && window.parent.postMessage("orientation portrait", "*");
				if(v) {
					var c = ArowserUI.Client.params.resolution_scale;
					v.setScale(a * c)
				}
				if(u) {
					var c = ArowserUI.Client.params.resolution_scale;
					u.setScale(a * c)
				}
				if(x) {
					var c = ArowserUI.Client.params.resolution_scale;
					x.setScale(a * c)
				}
				if(w) {
					var c = ArowserUI.Client.params.resolution_scale;
					w.setScale(a * c)
				}
			}
		}

		function h(a, d) {
			function e(a) {
				var b = ArowserUI.Client.Control,
					c = ArowserUI.Client.params.resolution_scale,
					d = new g.Mouse.State(a.x / j.getDisplay().getScale() / c, a.y / j.getDisplay().getScale() / c, a.left, a.middle, a.right, a.up, a.down);
				if("auto" === ArowserUI.Client.params.type) {
					var e = ArowserUI.Client.main;
					if(e) {
						var f = e.offsetWidth,
							h = e.offsetHeight;
						if(f > h)
							if(270 === H) {
								var i = b.sourceHeight,
									k = d.y,
									l = i - d.x;
								d.x = k, d.y = l
							} else {
								var m = b.sourceWidth,
									k = m - d.y,
									l = d.x;
								d.x = k, d.y = l
							}
						else if(270 === H) {
							var m = b.sourceWidth,
								i = b.sourceHeight,
								k = m - d.x,
								l = i - d.y;
							d.x = k, d.y = l
						}
					}
				} else if("app" === ArowserUI.Client.params.type) {
					if(270 === H) {
						var m = b.sourceWidth,
							i = b.sourceHeight,
							k = m - d.x,
							l = i - d.y;
						d.x = k, d.y = l
					}
				} else if("web" === ArowserUI.Client.params.type) {
					if(90 === H) {
						var m = b.sourceWidth,
							k = m - d.y,
							l = d.x;
						d.x = k, d.y = l
					}
					if(180 === H) {
						var m = b.sourceWidth,
							i = b.sourceHeight,
							k = m - d.x,
							l = i - d.y;
						d.x = k, d.y = l
					}
					if(270 === H) {
						var i = b.sourceHeight,
							k = d.y,
							l = i - d.x;
						d.x = k, d.y = l
					}
				}
				return d.x = 0 ^ d.x, d.y = 0 ^ d.y, d
			}

			function f(a) {
				var c = e(a),
					d = j.sendMouseState(c);
				b(d)
			}
			var g = g || {};
			g.ArowserArrayBufferReader = function(a) {
				var b = this;
				a.onblob = function(a) {
					b.ondata && b.ondata(new Uint8Array(a).buffer)
				}, a.onend = function() {
					b.onend && b.onend()
				}, this.ondata = null, this.onend = null
			};
			var g = g || {};
			g.ArrayBufferReader = function(a) {
				var b = this;
				a.onblob = function(a) {
					var c = window.atob(a),
						d = new ArrayBuffer(c.length);
					b.ondata && b.ondata(d)
				}, a.onend = function() {
					b.onend && b.onend()
				}, this.ondata = null, this.onend = null
			};
			var g = g || {};
			g.ArrayBufferWriter = function(a) {
				function b(b) {
					for(var c = "", d = 0; d < b.byteLength; d++) c += String.fromCharCode(b[d]);
					a.sendBlob(window.btoa(c))
				}
				var c = this;
				a.onack = function(a) {
					c.onack && c.onack(a)
				}, this.sendData = function(a) {
					var c = new Uint8Array(a);
					if(c.length <= 8064) b(c);
					else
						for(var d = 0; d < c.length; d += 8064) b(c.subarray(d, d + 8094))
				}, this.sendEnd = function() {
					a.sendEnd()
				}, this.onack = null
			};
			var g = g || {};
			g.AudioContextFactory = {
				singleton: null,
				getAudioContext: function(a) {
					var b = window.AudioContext || window.webkitAudioContext;
					if(b) try {
						return g.AudioContextFactory.singleton && !a || (g.AudioContextFactory.singleton = new b), g.AudioContextFactory.singleton
					} catch(c) {}
					return null
				}
			};
			var g = g || {};
			g.AudioPlayer = function() {
				this.sync = function() {}
			}, g.AudioPlayer.isSupportedType = function(a) {
				return g.RawAudioPlayer.isSupportedType(a)
			}, g.AudioPlayer.getSupportedTypes = function() {
				return g.RawAudioPlayer.getSupportedTypes()
			}, g.AudioPlayer.getInstance = function(a, b, c) {
				return g.CodecAudioPlayer.isSupportedType(b) ? new g.CodecAudioPlayer(a, b, c) : g.RawAudioPlayer.isSupportedType(b) ? new g.RawAudioPlayer(a, b, c) : g.AudioElementPlayer.isSupportedType(b) ? new g.AudioElementPlayer(a, b, c) : null;
			}, g.RawAudioPlayer = function(a, b, c) {
				var d = g.RawAudioPlayer._Format.parse(b),
					e = g.AudioContextFactory.getAudioContext();
				this.getContext = function() {
					return e
				}, this.renewContext = function() {
					e.close(), e = g.AudioContextFactory.getAudioContext(!0)
				};
				var f = e.currentTime,
					h = new g.ArowserArrayBufferReader(a),
					i = .02,
					j = .5,
					k = 1 === d.bytesPerSample ? window.Int8Array : window.Int16Array,
					l = 1 === d.bytesPerSample ? 128 : 32768,
					m = [],
					n = function(a) {
						if(a.length <= 1) return a[0];
						var b = 0;
						a.forEach(function(a) {
							b += a.length
						});
						var c = 0,
							d = new k(b);
						return a.forEach(function(a) {
							d.set(a, c), c += a.length
						}), d
					},
					o = function(a) {
						for(var b = Number.MAX_VALUE, c = a.length, e = Math.floor(a.length / d.channels), f = Math.floor(d.rate * i), g = Math.max(d.channels * f, d.channels * (e - f)), h = g; h < a.length; h += d.channels) {
							for(var j = 0, l = 0; l < d.channels; l++) j += Math.abs(a[h + l]);
							b >= j && (c = h + d.channels, b = j)
						}
						return c === a.length ? [a] : [new k(a.buffer.slice(0, c * d.bytesPerSample)), new k(a.buffer.slice(c * d.bytesPerSample))]
					},
					p = function(a) {
						m.push(new k(a))
					},
					q = function() {
						var a = n(m);
						return a ? (m = o(a), a = m.shift()) : null
					},
					r = function(a) {
						var b = a.length / d.channels,
							c = e.currentTime;
						c > f && (f = c);
						for(var g = e.createBuffer(d.channels, b, d.rate), h = 0; h < d.channels; h++)
							for(var i = g.getChannelData(h), j = h, k = 0; b > k; k++) i[k] = a[j] / l, j += d.channels;
						return g
					};
				h.ondata = function(a) {
					p(new k(a));
					var b = q();
					if(b) {
						var g = e.currentTime;
						g > f && (f = g);
						var h = e.createBufferSource();
						h.connect(e.destination), h.start || (h.start = h.noteOn), h.buffer = r(b), c.isMute() || h.start(f), f += b.length / d.channels / d.rate
					}
				}, this.sync = function() {
					var a = e.currentTime;
					f = Math.min(f, a + j)
				}
			}, g.RawAudioPlayer.prototype = new g.AudioPlayer, g.RawAudioPlayer._Format = function(a) {
				this.bytesPerSample = a.bytesPerSample, this.channels = a.channels, this.rate = a.rate
			}, g.RawAudioPlayer._Format.parse = function(a) {
				var b, c = null,
					d = 1;
				if("audio/L8;" === a.substring(0, 9)) a = a.substring(9), b = 1;
				else {
					if("audio/L16;" !== a.substring(0, 10)) return null;
					a = a.substring(10), b = 2
				}
				for(var e = a.split(","), f = 0; f < e.length; f++) {
					var h = e[f],
						i = h.indexOf("=");
					if(-1 === i) return null;
					var j = h.substring(0, i),
						k = h.substring(i + 1);
					switch(j) {
						case "channels":
							d = parseInt(k);
							break;
						case "rate":
							c = parseInt(k);
							break;
						default:
							return null
					}
				}
				return null === c ? null : new g.RawAudioPlayer._Format({
					bytesPerSample: b,
					channels: d,
					rate: c
				})
			}, g.RawAudioPlayer.isSupportedType = function(a) {
				return g.AudioContextFactory.getAudioContext() ? null !== g.RawAudioPlayer._Format.parse(a) : !1
			}, g.RawAudioPlayer.getSupportedTypes = function() {
				return g.AudioContextFactory.getAudioContext() ? ["audio/L8", "audio/L16"] : []
			}, g.CodecAudioPlayer = function(a, b, c) {
				var d = (g.CodecAudioPlayer._Format.parse(b), g.AudioContextFactory.getAudioContext());
				this.getContext = function() {
					return d
				}, this.renewContext = function() {
					d.close(), d = g.AudioContextFactory.getAudioContext(!0)
				};
				var e = d.currentTime,
					f = new g.ArowserArrayBufferReader(a),
					h = .7;
				f.ondata = function(a) {
					var b = function(a) {
						var b = d.createBufferSource();
						b.connect(d.destination), b.start || (b.start = b.noteOn);
						var f = d.currentTime;
						f > e && (e = f), b.buffer = a, c.isMute() || b.start(e), e += a.duration
					};
					d.decodeAudioData(a, function(a) {
						b(a)
					})
				}, this.sync = function() {
					var a = d.currentTime;
					e = Math.min(e, a + h)
				}
			}, g.CodecAudioPlayer.prototype = new g.AudioPlayer, g.CodecAudioPlayer._Format = function(a) {
				this.bytesPerSample = a.bytesPerSample, this.channels = a.channels, this.rate = a.rate
			}, g.CodecAudioPlayer._Format.parse = function(a) {
				var b, c = null,
					d = 1;
				if("audio/ogg;" === a.substring(0, 10)) a = a.substring(10), b = 2;
				else if("audio/mp4;" === a.substring(0, 10)) a = a.substring(10), b = 2;
				else {
					if("audio/mpeg;" !== a.substring(0, 11)) return null;
					a = a.substring(11), b = 2
				}
				for(var e = a.split(","), f = 0; f < e.length; f++) {
					var h = e[f],
						i = h.indexOf("=");
					if(-1 === i) return null;
					var j = h.substring(0, i),
						k = h.substring(i + 1);
					switch(j) {
						case "channels":
							d = parseInt(k);
							break;
						case "rate":
							c = parseInt(k);
							break;
						default:
							return null
					}
				}
				return null === c ? null : new g.CodecAudioPlayer._Format({
					bytesPerSample: b,
					channels: d,
					rate: c
				})
			}, g.CodecAudioPlayer.isSupportedType = function(a) {
				return g.AudioContextFactory.getAudioContext() ? null !== g.CodecAudioPlayer._Format.parse(a) : !1
			}, g.CodecAudioPlayer.getSupportedTypes = function() {
				return g.AudioContextFactory.getAudioContext() ? ["audio/ogg", "audio/mp4", "audio/mpeg"] : []
			}, g.AudioElementPlayer = function(a, b, c) {
				function d() {
					try {
						return new Audio
					} catch(a) {}
					return null
				}
				var e = g.AudioElementPlayer._Format.parse(b),
					f = d();
				this.getContext = function() {
					return f
				}, this.renewContext = function() {
					f = d()
				};
				var h = 0,
					i = new g.ArowserArrayBufferReader(a),
					j = .5,
					k = e.mediaType;
				i.ondata = function(a) {
					var b = new g.AudioElementPlayer.Packet(k, a),
						c = g.AudioElementPlayer.getTimestamp();
					c > h && (h = c), b.play(h), h += .256
				}, this.sync = function() {
					var a = g.AudioElementPlayer.getTimestamp();
					h = Math.min(h, a + j)
				}
			}, g.AudioElementPlayer.prototype = new g.AudioPlayer, g.AudioElementPlayer.Packet = function(a, b) {
				function c() {
					e.src ? e.play() : d = !0
				}
				this.play = function(a) {};
				var d = !1,
					e = null;
				try {
					e = new Audio
				} catch(f) {
					return
				}
				for(var h = "", i = new Uint8Array(b), j = 0; j < i.byteLength; j++) h += String.fromCharCode(i[j]);
				e.src = "data:" + a + ";base64," + window.btoa(h), d && e.play(), this.play = function(a) {
					var b = g.AudioElementPlayer.getTimestamp(),
						d = a - b;
					0 > d ? c() : window.setTimeout(c, d)
				}
			}, g.AudioElementPlayer.getTimestamp = function() {
				if(window.performance) {
					if(window.performance.now) return window.performance.now();
					if(window.performance.webkitNow) return window.performance.webkitNow()
				}
				return(new Date).getTime()
			}, g.AudioElementPlayer._Format = function(a) {
				this.mediaType = a.mediaType, this.bytesPerSample = a.bytesPerSample, this.channels = a.channels, this.rate = a.rate
			}, g.AudioElementPlayer._Format.parse = function(a) {
				var b, c, d = null,
					e = 1;
				if("audio/mpeg;" !== a.substring(0, 11)) return null;
				b = "audio/mpeg", a = a.substring(11), c = 2;
				for(var f = a.split(","), h = 0; h < f.length; h++) {
					var i = f[h],
						j = i.indexOf("=");
					if(-1 === j) return null;
					var k = i.substring(0, j),
						l = i.substring(j + 1);
					switch(k) {
						case "channels":
							e = parseInt(l);
							break;
						case "rate":
							d = parseInt(l);
							break;
						default:
							return null
					}
				}
				return null === d ? null : new g.AudioElementPlayer._Format({
					mediaType: b,
					bytesPerSample: c,
					channels: e,
					rate: d
				})
			}, g.AudioElementPlayer.isSupportedType = function(a) {
				try {
					new Audio
				} catch(b) {
					return !1
				}
				return null !== g.AudioElementPlayer._Format.parse(a)
			}, g.AudioElementPlayer.getSupportedTypes = function() {
				try {
					new Audio
				} catch(a) {
					return []
				}
				return ["audio/mpeg"]
			};
			var g = g || {};
			g.BlobReader = function(a, b) {
				var c, d = this,
					e = 0;
				c = window.BlobBuilder ? new BlobBuilder : window.WebKitBlobBuilder ? new WebKitBlobBuilder : window.MozBlobBuilder ? new MozBlobBuilder : new function() {
					var a = [];
					this.append = function(c) {
						a.push(new Blob([c], {
							type: b
						}))
					}, this.getBlob = function() {
						return new Blob(a, {
							type: b
						})
					}
				}, a.onblob = function(b) {
					var f = window.atob(b),
						g = new ArrayBuffer(f.length);
					c.append(g), e += g.byteLength, d.onprogress && d.onprogress(g.byteLength), a.sendAck("OK", 0)
				}, a.onend = function() {
					d.onend && d.onend()
				}, this.getLength = function() {
					return e
				}, this.getBlob = function() {
					return c.getBlob()
				}, this.reset = function() {
					e = 0, c = window.BlobBuilder ? new BlobBuilder : window.WebKitBlobBuilder ? new WebKitBlobBuilder : window.MozBlobBuilder ? new MozBlobBuilder : new function() {
						var a = [];
						this.append = function(c) {
							a.push(new Blob([c], {
								type: b
							}))
						}, this.getBlob = function() {
							return new Blob(a, {
								type: b
							})
						}
					}
				}, this.onprogress = null, this.onend = null
			};
			var g = g || {};
			g.Client = function(a, b) {
				function c(a, b) {
					this.w = a, this.h = b
				}

				function d(a) {
					this.canvas = a, this.canvasCtx = this.canvas.getContext("2d"), this.canvasBuffer = null, this.size = new c(a.width, a.height);
					var b = this;
					this.avc = new Player({
						render: !1,
						useWorker: !0,
						workerFile: "resources/js/Decoder.min.js",
						reuseMemory: !0,
						webgl: "auto"
					}), this.avc.onPictureDecoded = function(a, c, d) {
						if(a) {
							var e, f, g, h, i, j, k, l, m, n = c * d,
								o = n >> 2,
								p = a.subarray(0, n),
								q = a.subarray(n, n + o),
								r = a.subarray(n + o, n + o << 1),
								s = c >> 1;
							b.canvasBuffer && b.canvasBuffer.width === c && b.canvasBuffer.height === d || (b.canvasBuffer = b.canvasCtx.createImageData(c, d));
							for(var t = 0; d > t; t++) {
								h = t * c, i = t >> 1, m = i * s;
								for(var u = 0; c > u; u++) e = u + h, f = m + (u >> 1), j = 1.164 * (p[e] - 16), k = r[f] - 128, l = q[f] - 128, g = e << 2, b.canvasBuffer.data[g + 0] = j + 1.596 * k, b.canvasBuffer.data[g + 1] = j - .813 * k - .391 * l, b.canvasBuffer.data[g + 2] = j + 2.018 * l, b.canvasBuffer.data[g + 3] = 255
							}
							b.canvasCtx.putImageData(b.canvasBuffer, 0, 0)
						}
					}, this.decode = function(a) {
						this.avc.decode(a)
					}
				}

				function e(a) {
					a != q && (q = a, j.onstatechange && j.onstatechange(q))
				}

				function f() {
					return q == n || q == m
				}

				function h(a) {
					var b = w[a];
					return b || (b = 0 === a ? v.getDefaultLayer() : a > 0 ? v.createLayer() : v.createBuffer(), w[a] = b), b
				}

				function i(b) {
					var c = z[b];
					return null === c && (c = z[b] = new g.Parser, c.oninstruction = a.oninstruction), c
				}
				var j = this,
					k = 0,
					l = 1,
					m = 2,
					n = 3,
					o = 4,
					p = 5,
					q = k,
					r = 0,
					s = null,
					t = {
						0: "butt",
						1: "round",
						2: "square"
					},
					u = {
						0: "bevel",
						1: "miter",
						2: "round"
					},
					v = new g.Display,
					w = {},
					x = {};
				this.getAudioPlayers = function() {
					return x
				};
				var y, z = [],
					A = [],
					B = [],
					C = [],
					D = [],
					E = 0,
					F = 0,
					G = 0,
					H = [],
					I = new g.IntegerPool,
					J = [];
				"3" === b && (y = new d(h(0).getCanvas()));
				var K = !1;
				this.isMute = function() {
					return K
				}, this.setMute = function(a) {
					K = a
				};
				var L = 0;
				this.isReceivedImage = function() {
					return L > 1
				}, this.getDisplay = function() {
					return v
				}, this.sendSize = function(b, c) {
					f() && a.sendMessage("size", b, c)
				}, this.sendKeyEvent = function(b, c) {
					f() && a.sendMessage("key", c, b)
				}, this.sendMouseState = function(b) {
					if(f()) {
						var c = 0;
						b.left && (c |= 1), b.middle && (c |= 2), b.right && (c |= 4), b.up && (c |= 8), b.down && (c |= 16);
						var d = ["mouse", b.x, b.y, c];
						return a.sendMessage.apply(null, d), d
					}
				}, this.sendTouchState = function(b) {
					if(f()) {
						var c = b.length;
						if(0 !== c) {
							var d = new Array(3 + 2 * c),
								e = 0;
							d[e++] = "touch", d[e++] = c, b[0].left ? d[e++] = "1" : d[e++] = "0";
							for(var g = 0; c > g; g++) {
								var h = b[g];
								d[e++] = h.x, d[e++] = h.y
							}
							return a.sendMessage.apply(null, d), d
						}
					}
				}, this.sendGpsState = function(b, c, d) {
					f() && a.sendMessage("gps", b, c, d)
				}, this.sendGsensorState = function(b, c, d) {
					f() && (b = Number(b).toFixed(7), c = Number(c).toFixed(7), d = Number(d).toFixed(7), a.sendMessage("acc", b, c, d))
				}, this.sendGyroscopeState = function(b, c, d) {
					f() && a.sendMessage("gyroscope", b, c, d)
				}, this.sendScale = function(b) {
					f() && a.sendMessage("scale", b)
				}, this.sendAudioState = function(b) {
					f() && a.sendMessage("audio_enabled", b)
				}, this.setClipboard = function(a) {
					if(f()) {
						for(var b = j.createClipboardStream("text/plain"), c = new g.StringWriter(b), d = 0; d < a.length; d += 4096) c.sendText(a.substring(d, d + 4096));
						c.sendEnd()
					}
				}, this.createFileStream = function(b, c) {
					var d = I.next();
					a.sendMessage("file", d, b, c);
					var e = J[d] = new g.OutputStream(j, d),
						f = e.sendEnd;
					return e.sendEnd = function() {
						f(), I.free(d), delete J[d]
					}, e
				}, this.createPipeStream = function(b, c) {
					var d = I.next();
					a.sendMessage("pipe", d, b, c);
					var e = J[d] = new g.OutputStream(j, d),
						f = e.sendEnd;
					return e.sendEnd = function() {
						f(), I.free(d), delete J[d]
					}, e
				}, this.createClipboardStream = function(b) {
					var c = I.next();
					a.sendMessage("clipboard", c, b);
					var d = J[c] = new g.OutputStream(j, c),
						e = d.sendEnd;
					return d.sendEnd = function() {
						e(), I.free(c), delete J[c]
					}, d
				}, this.createObjectOutputStream = function(b, c, d) {
					var e = I.next();
					a.sendMessage("put", b, e, c, d);
					var f = J[e] = new g.OutputStream(j, e),
						h = f.sendEnd;
					return f.sendEnd = function() {
						h(), I.free(e), delete J[e]
					}, f
				}, this.requestObjectInputStream = function(b, c) {
					f() && a.sendMessage("get", b, c)
				}, this.sendAck = function(b, c, d) {
					f() && a.sendMessage("ack", b, c, d)
				}, this.sendBlob = function(b, c) {
					f() && a.sendMessage("blob", b, c)
				}, this.endStream = function(b) {
					f() && a.sendMessage("end", b)
				}, this.onstatechange = null, this.onname = null, this.onerror = null, this.onaudio = null, this.onclipboard = null, this.onfile = null, this.onfilesystem = null, this.onspeed = null, this.gpsInterval = null, this.ongps = function(a) {
					function b(a) {
						j.sendGpsState(a.coords.latitude, a.coords.longitude, f)
					}

					function c(a) {
						switch(a.code) {
							case 1:
								console.warn("Permission denied. Please enable the location service for the browser."), d();
								break;
							case 2:
								console.warn("Position unavailable. Please use WIFI connection."), d();
								break;
							case 3:
								console.warn("Timeout."), d()
						}
					}

					function d() {
						clearInterval(e.gpsInterval), e.gpsInterval = null
					}
					var e = this;
					if(a === !1) return void d();
					if(!e.gpsInterval) {
						if(!navigator.geolocation) return void console.warn("navigator.geolocation(gps) is not supported.");
						navigator.geolocation.getCurrentPosition(b, c, {
							maximumAge: 0,
							timeout: h,
							enableHighAccuracy: !0
						});
						var f = 0;
						void 0 !== window.DeviceOrientationEvent && (window.ondeviceorientation = function(a) {
							f = Math.round(a.alpha)
						});
						var g = 5e3,
							h = 5e3;
						this.gpsInterval = setInterval(function() {
							navigator.geolocation.getCurrentPosition(b, c, {
								maximumAge: 0,
								timeout: h,
								enableHighAccuracy: !0
							})
						}, g)
					}
				}, this.gsensorJob = null, this.ongsensor = function(a) {
					function b(a) {
						f = a.accelerationIncludingGravity.x, g = a.accelerationIncludingGravity.y, h = a.accelerationIncludingGravity.z
					}

					function c() {
						d.gsensorJob && (clearInterval(d.gsensorJob), d.gsensorJob = null)
					}
					var d = this;
					if(a === !1) return void c();
					if(!d.gsensorJob) {
						var e = 100,
							f = 0,
							g = 0,
							h = 0;
						void 0 !== window.DeviceMotionEvent ? (window.ondevicemotion = b, d.gsensorJob = setInterval(function() {
							null === f && null === g && null === h || 0 !== f && 0 !== g && 0 !== h && j.sendGsensorState(f, g, h)
						}, e)) : console.warn("DeviceMotionEvent(gsensor,accelerometer) is not supported.")
					}
				}, this.gyroscopeJob = null, this.ongyroscope = function(a) {
					function b(a) {
						f = Math.round(a.alpha), g = Math.round(a.beta), h = Math.round(a.gamma)
					}

					function c() {
						d.gyroscopeJob && (clearInterval(d.gyroscopeJob), d.gyroscopeJob = null)
					}
					var d = this;
					if(a === !1) return void c();
					if(!d.gyroscopeJob) {
						var e = 1e3,
							f = 0,
							g = 0,
							h = 0;
						void 0 !== window.DeviceOrientationEvent ? (window.ondeviceorientation = b, d.gyroscopeJob = setInterval(function() {
							0 !== f && 0 !== g && 0 !== h && j.sendGyroscopeState(f, g, h)
						}, e)) : console.warn("DeviceOrientationEvent(gyroscope) is not supported.")
					}
				}, this.onpipe = null, this.onsync = null;
				var M = {
						"miter-limit": function(a, b) {
							v.setMiterLimit(a, parseFloat(b))
						}
					},
					N = {
						ack: function(a) {
							var b = parseInt(a[0]),
								c = a[1],
								d = parseInt(a[2]),
								e = J[b];
							e && (e.onack && e.onack(new g.Status(d, c)), d >= 256 && (I.free(b), delete J[b]))
						},
						arc: function(a) {
							var b = h(parseInt(a[0])),
								c = parseInt(a[1]),
								d = parseInt(a[2]),
								e = parseInt(a[3]),
								f = parseFloat(a[4]),
								g = parseFloat(a[5]),
								i = parseInt(a[6]);
							v.arc(b, c, d, e, f, g, 0 !== i)
						},
						audio: function(a) {
							var b = parseInt(a[0]),
								c = a[1],
								d = A[b] = new g.InputStream(j, b),
								e = null;
							j.onaudio && (e = j.onaudio(d, c)), e || (e = g.AudioPlayer.getInstance(d, c, j)), e ? (x[b] = e, j.sendAck(b, "OK", 0)) : j.sendAck(b, "BAD TYPE", 783)
						},
						blob: function(a) {
							var b = parseInt(a[0]),
								c = a[1],
								d = A[b];
							B[b] && B[b] > 0 && (D[b] += c.length), d && d.onblob && d.onblob(c)
						},
						body: function(a) {
							var b = parseInt(a[0]),
								c = H[b],
								d = parseInt(a[1]),
								e = a[2],
								f = a[3];
							if(c && c.onbody) {
								var h = A[d] = new g.InputStream(j, d);
								c.onbody(h, e, f)
							} else j.sendAck(d, "Receipt of body unsupported", 256)
						},
						cfill: function(a) {
							var b = parseInt(a[0]),
								c = h(parseInt(a[1])),
								d = parseInt(a[2]),
								e = parseInt(a[3]),
								f = parseInt(a[4]),
								g = parseInt(a[5]);
							v.setChannelMask(c, b), v.fillColor(c, d, e, f, g)
						},
						clip: function(a) {
							var b = h(parseInt(a[0]));
							v.clip(b)
						},
						clipboard: function(a) {
							var b = parseInt(a[0]),
								c = a[1];
							if(j.onclipboard) {
								var d = A[b] = new g.InputStream(j, b);
								j.onclipboard(d, c)
							} else j.sendAck(b, "Clipboard unsupported", 256)
						},
						close: function(a) {
							var b = h(parseInt(a[0]));
							v.close(b)
						},
						copy: function(a) {
							var b = h(parseInt(a[0])),
								c = parseInt(a[1]),
								d = parseInt(a[2]),
								e = parseInt(a[3]),
								f = parseInt(a[4]),
								g = parseInt(a[5]),
								i = h(parseInt(a[6])),
								j = parseInt(a[7]),
								k = parseInt(a[8]);
							v.setChannelMask(i, g), v.copy(b, c, d, e, f, i, j, k)
						},
						cstroke: function(a) {
							var b = parseInt(a[0]),
								c = h(parseInt(a[1])),
								d = t[parseInt(a[2])],
								e = u[parseInt(a[3])],
								f = parseInt(a[4]),
								g = parseInt(a[5]),
								i = parseInt(a[6]),
								j = parseInt(a[7]),
								k = parseInt(a[8]);
							v.setChannelMask(c, b), v.strokeColor(c, d, e, f, g, i, j, k)
						},
						cursor: function(a) {
							var b = parseInt(a[0]),
								c = parseInt(a[1]),
								d = h(parseInt(a[2])),
								e = parseInt(a[3]),
								f = parseInt(a[4]),
								g = parseInt(a[5]),
								i = parseInt(a[6]);
							v.setCursor(b, c, d, e, f, g, i)
						},
						curve: function(a) {
							var b = h(parseInt(a[0])),
								c = parseInt(a[1]),
								d = parseInt(a[2]),
								e = parseInt(a[3]),
								f = parseInt(a[4]),
								g = parseInt(a[5]),
								i = parseInt(a[6]);
							v.curveTo(b, c, d, e, f, g, i)
						},
						dispose: function(a) {
							var b = parseInt(a[0]);
							if(b > 0) {
								var c = h(b);
								c.dispose(), delete w[b]
							} else 0 > b && delete w[b]
						},
						distort: function(a) {
							var b = parseInt(a[0]),
								c = parseFloat(a[1]),
								d = parseFloat(a[2]),
								e = parseFloat(a[3]),
								f = parseFloat(a[4]),
								g = parseFloat(a[5]),
								i = parseFloat(a[6]);
							if(b >= 0) {
								var j = h(b);
								j.distort(c, d, e, f, g, i)
							}
						},
						error: function(a) {
							var b = a[0],
								c = parseInt(a[1]);
							j.onerror && j.onerror(new g.Status(c, b)), j.disconnect()
						},
						end: function(a) {
							var b = parseInt(a[0]),
								c = A[b];
							if(c && (c.onend && c.onend(), delete A[b]), a[1]) {
								var d = B[b];
								if(d && d > 0) {
									var e = a[1],
										f = Date.now(),
										g = C[b],
										h = f - g,
										i = e - d,
										k = D[b],
										l = h - i;
									if(k > 1e4 && (l = l > 0 ? l : 1, F += l, E += k, G++), G >= 10 && E > 1e5) {
										var m = 8 * E / 1024 / 1024 / (F / 1e3);
										j.onspeed && j.onspeed(m), F = 0, E = 0, G = 0
									}
									delete B[b], delete C[b], delete D[b]
								}
							}
						},
						file: function(a) {
							var b = parseInt(a[0]),
								c = a[1],
								d = a[2];
							if(j.onfile) {
								var e = A[b] = new g.InputStream(j, b);
								j.onfile(e, c, d)
							} else j.sendAck(b, "File transfer unsupported", 256)
						},
						filesystem: function(a) {
							var b = parseInt(a[0]),
								c = a[1];
							if(j.onfilesystem) {
								var d = H[b] = new g.Object(j, b);
								j.onfilesystem(d, c)
							}
						},
						gps: function(a) {
							j.ongps && j.ongps()
						},
						gsensor: function(a) {
							j.ongsensor && j.ongsensor()
						},
						gyroscope: function(a) {
							j.ongyroscope && j.ongyroscope()
						},
						video: function(a) {
							1 >= L && (L += 1);
							var b = parseInt(a[0]),
								c = a[2];
							if(a[3]) {
								var d = a[3];
								B[b] = d, C[b] = Date.now(), D[b] = 0
							}
							var e = A[b] = new g.InputStream(j, b),
								f = new g.ArowserDataURIReader(e, c);
							f.onend = function() {
								var a = f.getBuffer();
								y.decode(a[0])
							}
						},
						identity: function(a) {
							var b = h(parseInt(a[0]));
							v.setTransform(b, 1, 0, 0, 1, 0, 0)
						},
						img: function(a) {
							1 >= L && (L += 1);
							var b = parseInt(a[0]),
								c = parseInt(a[1]),
								d = h(parseInt(a[2])),
								e = a[3],
								f = parseInt(a[4]),
								i = parseInt(a[5]);
							if(a[6]) {
								var k = a[6];
								B[b] = k, C[b] = Date.now(), D[b] = 0
							}
							var l = A[b] = new g.InputStream(j, b),
								m = new g.ArowserDataURIReader(l, e);
							m.onend = function() {
								v.setChannelMask(d, c);
								var a = m.getBlob();
								v.drawBlob(d, f, i, a)
							}
						},
						imgcache: function(a) {},
						jpeg: function(a) {
							var b = parseInt(a[0]),
								c = h(parseInt(a[1])),
								d = parseInt(a[2]),
								e = parseInt(a[3]),
								f = a[4];
							v.setChannelMask(c, b), v.draw(c, d, e, "data:image/jpeg;base64," + f)
						},
						lfill: function(a) {
							var b = parseInt(a[0]),
								c = h(parseInt(a[1])),
								d = h(parseInt(a[2]));
							v.setChannelMask(c, b), v.fillLayer(c, d)
						},
						line: function(a) {
							var b = h(parseInt(a[0])),
								c = parseInt(a[1]),
								d = parseInt(a[2]);
							v.lineTo(b, c, d)
						},
						lstroke: function(a) {
							var b = parseInt(a[0]),
								c = h(parseInt(a[1])),
								d = h(parseInt(a[2]));
							v.setChannelMask(c, b), v.strokeLayer(c, d)
						},
						move: function(a) {
							var b = parseInt(a[0]),
								c = parseInt(a[1]),
								d = parseInt(a[2]),
								e = parseInt(a[3]),
								f = parseInt(a[4]);
							if(b > 0 && c >= 0) {
								var g = h(b),
									i = h(c);
								g.move(i, d, e, f)
							}
						},
						name: function(a) {
							j.onname && j.onname(a[0])
						},
						nest: function(a) {
							var b = i(parseInt(a[0]));
							b.receive(a[1])
						},
						pipe: function(a) {
							var b = parseInt(a[0]),
								c = a[1],
								d = a[2];
							if(j.onpipe) {
								var e = A[b] = new g.InputStream(j, b);
								j.onpipe(e, c, d)
							} else j.sendAck(b, "Named pipes unsupported", 256)
						},
						png: function(a) {
							var b = parseInt(a[0]),
								c = h(parseInt(a[1])),
								d = parseInt(a[2]),
								e = parseInt(a[3]),
								f = a[4];
							v.setChannelMask(c, b), v.drawBinary(c, d, e, f)
						},
						pop: function(a) {
							var b = h(parseInt(a[0]));
							v.pop(b)
						},
						push: function(a) {
							var b = h(parseInt(a[0]));
							v.push(b)
						},
						rect: function(a) {
							var b = h(parseInt(a[0])),
								c = parseInt(a[1]),
								d = parseInt(a[2]),
								e = parseInt(a[3]),
								f = parseInt(a[4]);
							v.rect(b, c, d, e, f)
						},
						reset: function(a) {
							var b = h(parseInt(a[0]));
							v.reset(b)
						},
						set: function(a) {
							var b = h(parseInt(a[0])),
								c = a[1],
								d = a[2],
								e = M[c];
							e && e(b, d)
						},
						shade: function(a) {
							var b = parseInt(a[0]),
								c = parseInt(a[1]);
							if(b >= 0) {
								var d = h(b);
								d.shade(c)
							}
						},
						size: function(a) {
							var b = parseInt(a[0]),
								c = h(b),
								d = parseInt(a[1]),
								e = parseInt(a[2]);
							v.resize(c, d, e)
						},
						start: function(a) {
							var b = h(parseInt(a[0])),
								c = parseInt(a[1]),
								d = parseInt(a[2]);
							v.moveTo(b, c, d)
						},
						sync: function(a) {
							var b = parseInt(a[0]);
							v.flush(function() {
								for(var a in x) {
									var c = x[a];
									c && c.sync()
								}
								b !== r && (r = b)
							}), q === m && e(n), j.onsync && j.onsync(b)
						},
						transfer: function(a) {
							var b = h(parseInt(a[0])),
								c = parseInt(a[1]),
								d = parseInt(a[2]),
								e = parseInt(a[3]),
								f = parseInt(a[4]),
								i = parseInt(a[5]),
								j = h(parseInt(a[6])),
								k = parseInt(a[7]),
								l = parseInt(a[8]);
							3 === i ? v.put(b, c, d, e, f, j, k, l) : 5 !== i && v.transfer(b, c, d, e, f, j, k, l, g.Client.DefaultTransferFunction[i])
						},
						transform: function(a) {
							var b = h(parseInt(a[0])),
								c = parseFloat(a[1]),
								d = parseFloat(a[2]),
								e = parseFloat(a[3]),
								f = parseFloat(a[4]),
								g = parseFloat(a[5]),
								i = parseFloat(a[6]);
							v.transform(b, c, d, e, f, g, i)
						},
						undefine: function(a) {
							var b = parseInt(a[0]),
								c = H[b];
							c && c.onundefine && c.onundefine()
						}
					};
				a.oninstruction = function(a, b) {
					var c = N[a];
					c && c(b)
				}, this.disconnect = function() {
					q != p && q != o && (e(o), s && window.clearInterval(s), a.sendMessage("disconnect"), a.disconnect(), e(p))
				}, this.connect = function(b) {
					e(l);
					try {
						a.connect(b)
					} catch(c) {
						throw e(k), c
					}
					s = window.setInterval(function() {
						a.sendMessage("sync", r)
					}, 5e3), e(m)
				}
			}, g.Client.DefaultTransferFunction = {
				0: function(a, b) {
					b.red = b.green = b.blue = 0
				},
				15: function(a, b) {
					b.red = b.green = b.blue = 255
				},
				3: function(a, b) {
					b.red = a.red, b.green = a.green, b.blue = a.blue, b.alpha = a.alpha
				},
				5: function(a, b) {},
				12: function(a, b) {
					b.red = 255 & ~a.red, b.green = 255 & ~a.green, b.blue = 255 & ~a.blue, b.alpha = a.alpha
				},
				10: function(a, b) {
					b.red = 255 & ~b.red, b.green = 255 & ~b.green, b.blue = 255 & ~b.blue
				},
				1: function(a, b) {
					b.red = a.red & b.red, b.green = a.green & b.green, b.blue = a.blue & b.blue
				},
				14: function(a, b) {
					b.red = 255 & ~(a.red & b.red), b.green = 255 & ~(a.green & b.green), b.blue = 255 & ~(a.blue & b.blue)
				},
				7: function(a, b) {
					b.red = a.red | b.red, b.green = a.green | b.green, b.blue = a.blue | b.blue
				},
				8: function(a, b) {
					b.red = 255 & ~(a.red | b.red), b.green = 255 & ~(a.green | b.green), b.blue = 255 & ~(a.blue | b.blue)
				},
				6: function(a, b) {
					b.red = a.red ^ b.red, b.green = a.green ^ b.green, b.blue = a.blue ^ b.blue
				},
				9: function(a, b) {
					b.red = 255 & ~(a.red ^ b.red), b.green = 255 & ~(a.green ^ b.green), b.blue = 255 & ~(a.blue ^ b.blue)
				},
				4: function(a, b) {
					b.red = 255 & (~a.red & b.red), b.green = 255 & (~a.green & b.green), b.blue = 255 & (~a.blue & b.blue)
				},
				13: function(a, b) {
					b.red = 255 & (~a.red | b.red), b.green = 255 & (~a.green | b.green), b.blue = 255 & (~a.blue | b.blue)
				},
				2: function(a, b) {
					b.red = 255 & (a.red & ~b.red), b.green = 255 & (a.green & ~b.green), b.blue = 255 & (a.blue & ~b.blue)
				},
				11: function(a, b) {
					b.red = 255 & (a.red | ~b.red), b.green = 255 & (a.green | ~b.green), b.blue = 255 & (a.blue | ~b.blue)
				}
			};
			var g = g || {};
			g.ArowserDataURIReader = function(a, b) {
				var c = this,
					d = null,
					e = [];
				a.onblob = function(a) {
					e.push(a)
				}, a.onend = function() {
					d = new Blob(e, {
						type: b
					}), c.onend && c.onend()
				}, this.getBlob = function() {
					return d
				}, this.getBuffer = function() {
					return e
				}, this.onend = null
			}, g.DataURIReader = function(a, b) {
				var c = this,
					d = "data:" + b + ";base64,";
				a.onblob = function(a) {
					d += a
				}, a.onend = function() {
					c.onend && c.onend()
				}, this.getURI = function() {
					return d
				}, this.onend = null
			};
			var g = g || {};
			g.Display = function() {
				function a() {
					for(var a = 0; a < o.length;) {
						var b = o[a];
						if(!b.isReady()) break;
						b.flush(), a++
					}
					o.splice(0, a)
				}

				function b(a, b) {
					this.isReady = function() {
						for(var a = 0; a < b.length; a++)
							if(b[a].blocked) return !1;
						return !0
					}, this.flush = function() {
						for(var c = 0; c < b.length; c++) b[c].execute();
						a && a()
					}
				}

				function c(b, c) {
					var d = this;
					this.blocked = c, this.unblock = function() {
						d.blocked && (d.blocked = !1, a())
					}, this.execute = function() {
						b && b()
					}
				}

				function d(a, b) {
					var d = new c(a, b);
					return n.push(d), d
				}
				var e = this,
					f = 0,
					h = 0,
					i = 1,
					j = document.createElement("div");
				j.style.position = "relative", j.style.width = f + "px", j.style.height = h + "px", j.style.transformOrigin = j.style.webkitTransformOrigin = j.style.MozTransformOrigin = j.style.OTransformOrigin = j.style.msTransformOrigin = "0 0";
				var k = new g.Display.VisibleLayer(f, h),
					l = new g.Display.VisibleLayer(0, 0);
				l.setChannelMask(g.Layer.SRC), j.appendChild(k.getElement());
				var m = document.createElement("div");
				m.style.position = "relative", m.style.width = f * i + "px", m.style.height = h * i + "px", m.appendChild(j), this.cursorHotspotX = 0, this.cursorHotspotY = 0, this.cursorX = 0, this.cursorY = 0, this.onresize = null, this.oncursor = null;
				var n = [],
					o = [];
				this.getElement = function() {
					return m
				}, this.getWidth = function() {
					return f
				}, this.getHeight = function() {
					return h
				}, this.getDefaultLayer = function() {
					return k
				}, this.getCursorLayer = function() {
					return l
				}, this.createLayer = function() {
					var a = new g.Display.VisibleLayer(f, h);
					return a.move(k, 0, 0, 0), a
				}, this.createBuffer = function() {
					var a = new g.Layer(0, 0);
					return a.autosize = 1, a
				}, this.flush = function(c) {
					o.push(new b(c, n)), n = [], a()
				}, this.setCursor = function(a, b, c, f, g, h, i) {
					d(function() {
						e.cursorHotspotX = a, e.cursorHotspotY = b, l.resize(h, i), l.copy(c, f, g, h, i, 0, 0), e.moveCursor(e.cursorX, e.cursorY), e.oncursor && e.oncursor(l.getCanvas(), a, b)
					})
				}, this.showCursor = function(a) {
					var b = l.getElement(),
						c = b.parentNode;
					a === !1 ? c && c.removeChild(b) : c !== j && j.appendChild(b)
				}, this.moveCursor = function(a, b) {
					l.translate(a - e.cursorHotspotX, b - e.cursorHotspotY), e.cursorX = a, e.cursorY = b
				}, this.resize = function(a, b, c) {
					d(function() {
						a.resize(b, c), a === k && (f = b, h = c, j.style.width = f + "px", j.style.height = h + "px", m.style.width = f * i + "px", m.style.height = h * i + "px", e.onresize && e.onresize(b, c))
					})
				}, this.drawImage = function(a, b, c, d) {
					a.drawImage(b, c, d)
				}, this.drawBlob = function(a, b, c, d) {
					var e = URL.createObjectURL(d),
						f = new Image;
					f.onload = function() {
						a.drawImage(b, c, f), URL.revokeObjectURL(e)
					}, f.src = e
				}, this.draw = function(a, b, c, e) {
					var f = d(function() {
							a.drawImage(b, c, g)
						}, !0),
						g = new Image;
					g.onload = f.unblock, g.src = e
				}, this.drawBinary = function(a, b, c, d) {
					var f = new Blob([d], {
						type: "image/png"
					});
					e.drawBlob(a, b, c, f)
				}, this.play = function(a, b, c, e) {
					var f = document.createElement("video");
					f.type = b, f.src = e, f.addEventListener("play", function() {
						function b() {
							a.drawImage(0, 0, f), f.ended || window.setTimeout(b, 20)
						}
						b()
					}, !1), d(f.play)
				}, this.transfer = function(a, b, c, e, f, g, h, i, j) {
					d(function() {
						g.transfer(a, b, c, e, f, h, i, j)
					})
				}, this.put = function(a, b, c, e, f, g, h, i) {
					d(function() {
						g.put(a, b, c, e, f, h, i)
					})
				}, this.copy = function(a, b, c, e, f, g, h, i) {
					d(function() {
						g.copy(a, b, c, e, f, h, i)
					})
				}, this.moveTo = function(a, b, c) {
					d(function() {
						a.moveTo(b, c)
					})
				}, this.lineTo = function(a, b, c) {
					d(function() {
						a.lineTo(b, c)
					})
				}, this.arc = function(a, b, c, e, f, g, h) {
					d(function() {
						a.arc(b, c, e, f, g, h)
					})
				}, this.curveTo = function(a, b, c, e, f, g, h) {
					d(function() {
						a.curveTo(b, c, e, f, g, h)
					})
				}, this.close = function(a) {
					d(function() {
						a.close()
					})
				}, this.rect = function(a, b, c, e, f) {
					d(function() {
						a.rect(b, c, e, f)
					})
				}, this.clip = function(a) {
					d(function() {
						a.clip()
					})
				}, this.strokeColor = function(a, b, c, e, f, g, h, i) {
					d(function() {
						a.strokeColor(b, c, e, f, g, h, i)
					})
				}, this.fillColor = function(a, b, c, e, f) {
					d(function() {
						a.fillColor(b, c, e, f)
					})
				}, this.strokeLayer = function(a, b, c, e, f) {
					d(function() {
						a.strokeLayer(b, c, e, f)
					})
				}, this.fillLayer = function(a, b) {
					d(function() {
						a.fillLayer(b)
					})
				}, this.push = function(a) {
					d(function() {
						a.push()
					})
				}, this.pop = function(a) {
					d(function() {
						a.pop()
					})
				}, this.reset = function(a) {
					d(function() {
						a.reset()
					})
				}, this.setTransform = function(a, b, c, e, f, g, h) {
					d(function() {
						a.setTransform(b, c, e, f, g, h)
					})
				}, this.transform = function(a, b, c, e, f, g, h) {
					d(function() {
						a.transform(b, c, e, f, g, h)
					})
				}, this.setChannelMask = function(a, b) {
					d(function() {
						a.setChannelMask(b)
					})
				}, this.setMiterLimit = function(a, b) {
					d(function() {
						a.setMiterLimit(b)
					})
				}, this.scale = function(a) {
					j.style.transform = j.style.WebkitTransform = j.style.MozTransform = j.style.OTransform = j.style.msTransform = "scale(" + a + "," + a + ")", i = a, m.style.width = f * i + "px", m.style.height = h * i + "px"
				}, this.getScale = function() {
					return i
				}, this.flatten = function() {
					function a(a) {
						var b = [];
						for(var c in a.children) b.push(a.children[c]);
						return b.sort(function(a, b) {
							var c = a.z - b.z;
							if(0 !== c) return c;
							var d = a.getElement(),
								e = b.getElement(),
								f = e.compareDocumentPosition(d);
							return f & Node.DOCUMENT_POSITION_PRECEDING ? -1 : f & Node.DOCUMENT_POSITION_FOLLOWING ? 1 : 0
						}), b
					}

					function b(c, e, f) {
						if(c.width > 0 && c.height > 0) {
							var g = d.globalAlpha;
							d.globalAlpha *= c.alpha / 255, d.drawImage(c.getCanvas(), e, f);
							for(var h = a(c), i = 0; i < h.length; i++) {
								var j = h[i];
								b(j, e + j.x, f + j.y)
							}
							d.globalAlpha = g
						}
					}
					var c = document.createElement("canvas");
					c.width = k.width, c.height = k.height;
					var d = c.getContext("2d");
					return b(k, 0, 0), c
				}
			}, g.Display.VisibleLayer = function(a, b) {
				g.Layer.apply(this, [a, b]);
				var c = this;
				this.__unique_id = g.Display.VisibleLayer.__next_id++, this.alpha = 255, this.x = 0, this.y = 0, this.z = 0, this.matrix = [1, 0, 0, 1, 0, 0], this.parent = null, this.children = {};
				var d = c.getCanvas();
				d.style.position = "absolute", d.style.left = "0px", d.style.top = "0px";
				var e = document.createElement("div");
				e.appendChild(d), e.style.width = a + "px", e.style.height = b + "px", e.style.position = "absolute", e.style.left = "0px", e.style.top = "0px", e.style.overflow = "hidden";
				var f = this.resize;
				this.resize = function(a, b) {
					e.style.width = a + "px", e.style.height = b + "px", f(a, b)
				}, this.getElement = function() {
					return e
				};
				var h = "translate(0px, 0px)",
					i = "matrix(1, 0, 0, 1, 0, 0)";
				this.translate = function(a, b) {
					c.x = a, c.y = b, h = "translate(" + a + "px," + b + "px)", e.style.transform = e.style.WebkitTransform = e.style.MozTransform = e.style.OTransform = e.style.msTransform = h + " " + i
				}, this.move = function(a, b, d, f) {
					if(c.parent !== a) {
						c.parent && delete c.parent.children[c.__unique_id], c.parent = a, a.children[c.__unique_id] = c;
						var g = a.getElement();
						g.appendChild(e)
					}
					c.translate(b, d), c.z = f, e.style.zIndex = f
				}, this.shade = function(a) {
					c.alpha = a, e.style.opacity = a / 255
				}, this.dispose = function() {
					c.parent && (delete c.parent.children[c.__unique_id], c.parent = null), e.parentNode && e.parentNode.removeChild(e)
				}, this.distort = function(a, b, d, f, g, j) {
					c.matrix = [a, b, d, f, g, j], i = "matrix(" + a + "," + b + "," + d + "," + f + "," + g + "," + j + ")", e.style.transform = e.style.WebkitTransform = e.style.MozTransform = e.style.OTransform = e.style.msTransform = h + " " + i
				}
			}, g.Display.VisibleLayer.__next_id = 0;
			var g = g || {};
			g.InputStream = function(a, b) {
				var c = this;
				this.index = b, this.onblob = null, this.onend = null, this.sendAck = function(b, d) {
					a.sendAck(c.index, b, d)
				}
			};
			var g = g || {};
			g.IntegerPool = function() {
				var a = this,
					b = [];
				this.next_int = 0, this.next = function() {
					return b.length > 0 ? b.shift() : a.next_int++
				}, this.free = function(a) {
					b.push(a)
				}
			};
			var g = g || {};
			g.JSONReader = function(a) {
				var b = this,
					c = new g.StringReader(a),
					d = "";
				this.getLength = function() {
					return d.length
				}, this.getJSON = function() {
					return JSON.parse(d)
				}, c.ontext = function(a) {
					d += a, b.onprogress && b.onprogress(a.length)
				}, c.onend = function() {
					b.onend && b.onend()
				}, this.onprogress = null, this.onend = null
			};
			var g = g || {};
			g.Keyboard = function(a) {
				function b(a, b) {
					return a ? a[b] || a[0] : null
				}

				function c(a, c, d) {
					if(!a) return null;
					var f, g = a.indexOf("U+");
					if(g >= 0) {
						var h = a.substring(g + 2);
						f = String.fromCharCode(parseInt(h, 16))
					} else {
						if(1 !== a.length) return b(t[a], c);
						f = a
					}
					d === !0 ? f = f.toUpperCase() : d === !1 && (f = f.toLowerCase());
					var i = f.charCodeAt(0);
					return e(i)
				}

				function d(a) {
					return 31 >= a || a >= 127 && 159 >= a
				}

				function e(a) {
					return d(a) ? 65280 | a : a >= 0 && 255 >= a ? a : a >= 256 && 1114111 >= a ? 16777216 | a : null
				}

				function f(a, c) {
					return b(s[a], c)
				}

				function h(a, b) {
					if(!b) return !1;
					var c = b.indexOf("U+");
					if(-1 === c) return !0;
					var d = parseInt(b.substring(c + 2), 16);
					return a !== d ? !0 : a >= 65 && 90 >= a || a >= 48 && 57 >= a
				}

				function i(a) {
					var b = g.Keyboard.ModifierState.fromKeyboardEvent(a);
					m.modifiers.alt && b.alt === !1 && (m.release(65513), m.release(65514), m.release(65027)), m.modifiers.shift && b.shift === !1 && (m.release(65505), m.release(65506)), m.modifiers.ctrl && b.ctrl === !1 && (m.release(65507), m.release(65508)), m.modifiers.meta && b.meta === !1 && (m.release(65511), m.release(65512)), m.modifiers.hyper && b.hyper === !1 && (m.release(65515), m.release(65516)), m.modifiers = b
				}

				function j() {
					var a = l();
					if(!a) return !1;
					var b;
					do b = a, a = l(); while (null !== a);
					return b.defaultPrevented
				}

				function k(a) {
					m.modifiers.ctrl && m.modifiers.alt && (a >= 65 && 90 >= a || a >= 97 && 122 >= a || (255 >= a || 16777216 === (4278190080 & a)) && (m.release(65507), m.release(65508), m.release(65513), m.release(65514)))
				}

				function l() {
					var a = r[0];
					if(!a) return null;
					if(!(a instanceof o)) {
						if(a instanceof q) {
							var b = a.keysym;
							return b ? (m.release(b), a.defaultPrevented = !0, r.shift()) : (m.reset(), a)
						}
						return r.shift()
					}
					var b = null,
						c = [];
					if(a.reliable ? (b = a.keysym, c = r.splice(0, 1)) : r[1] instanceof p ? (b = r[1].keysym, c = r.splice(0, 2)) : r[1] && (b = a.keysym, c = r.splice(0, 1)), c.length > 0) {
						if(b) {
							k(b);
							var d = !m.press(b);
							w[a.keyCode] = b, m.modifiers.meta && 65511 !== b && 65512 !== b && m.release(b);
							for(var e = 0; e < c.length; e++) c[e].defaultPrevented = d
						}
						return a
					}
					return null
				}
				var m = this;
				this.onkeydown = null, this.onkeyup = null;
				var n = function() {
						var a = this;
						this.timestamp = (new Date).getTime(), this.defaultPrevented = !1, this.keysym = null, this.reliable = !1, this.getAge = function() {
							return(new Date).getTime() - a.timestamp
						}
					},
					o = function(a, b, d, e) {
						n.apply(this), this.keyCode = a, this.keyIdentifier = b, this.key = d, this.location = e, this.keysym = c(d, e) || f(a, e), this.keysym && (this.reliable = !0), !this.keysym && h(a, b) && (this.keysym = c(b, e, m.modifiers.shift));
						var g = !(m.modifiers.ctrl || navigator && navigator.platform && navigator.platform.match(/^mac/i)),
							i = !m.modifiers.alt;
						(i && m.modifiers.ctrl || g && m.modifiers.alt || m.modifiers.meta || m.modifiers.hyper) && (this.reliable = !0), w[a] = this.keysym
					};
				o.prototype = new n;
				var p = function(a) {
					n.apply(this), this.charCode = a, this.keysym = e(a), this.reliable = !0
				};
				p.prototype = new n;
				var q = function(a, b, d, e) {
					n.apply(this), this.keyCode = a, this.keyIdentifier = b, this.key = d, this.location = e, this.keysym = w[a] || f(a, e) || c(d, e), this.reliable = !0
				};
				q.prototype = new n;
				var r = [],
					s = {
						8: [65288],
						9: [65289],
						12: [65291, 65291, 65291, 65461],
						13: [65293],
						16: [65505, 65505, 65506],
						17: [65507, 65507, 65508],
						18: [65513, 65513, 65027],
						19: [65299],
						20: [65509],
						27: [65307],
						32: [32],
						33: [65365, 65365, 65365, 65465],
						34: [65366, 65366, 65366, 65459],
						35: [65367, 65367, 65367, 65457],
						36: [65360, 65360, 65360, 65463],
						37: [65361, 65361, 65361, 65460],
						38: [65362, 65362, 65362, 65464],
						39: [65363, 65363, 65363, 65462],
						40: [65364, 65364, 65364, 65458],
						45: [65379, 65379, 65379, 65456],
						46: [65535, 65535, 65535, 65454],
						91: [65515],
						92: [65383],
						93: null,
						96: [65456],
						97: [65457],
						98: [65458],
						99: [65459],
						100: [65460],
						101: [65461],
						102: [65462],
						103: [65463],
						104: [65464],
						105: [65465],
						106: [65450],
						107: [65451],
						109: [65453],
						110: [65454],
						111: [65455],
						112: [65470],
						113: [65471],
						114: [65472],
						115: [65473],
						116: [65474],
						117: [65475],
						118: [65476],
						119: [65477],
						120: [65478],
						121: [65479],
						122: [65480],
						123: [65481],
						144: [65407],
						145: [65300],
						225: [65027]
					},
					t = {
						Again: [65382],
						AllCandidates: [65341],
						Alphanumeric: [65328],
						Alt: [65513, 65513, 65027],
						Attn: [64782],
						AltGraph: [65027],
						ArrowDown: [65364],
						ArrowLeft: [65361],
						ArrowRight: [65363],
						ArrowUp: [65362],
						Backspace: [65288],
						CapsLock: [65509],
						Cancel: [65385],
						Clear: [65291],
						Convert: [65313],
						Copy: [64789],
						Crsel: [64796],
						CrSel: [64796],
						CodeInput: [65335],
						Compose: [65312],
						Control: [65507, 65507, 65508],
						ContextMenu: [65383],
						DeadGrave: [65104],
						DeadAcute: [65105],
						DeadCircumflex: [65106],
						DeadTilde: [65107],
						DeadMacron: [65108],
						DeadBreve: [65109],
						DeadAboveDot: [65110],
						DeadUmlaut: [65111],
						DeadAboveRing: [65112],
						DeadDoubleacute: [65113],
						DeadCaron: [65114],
						DeadCedilla: [65115],
						DeadOgonek: [65116],
						DeadIota: [65117],
						DeadVoicedSound: [65118],
						DeadSemivoicedSound: [65119],
						Delete: [65535],
						Down: [65364],
						End: [65367],
						Enter: [65293],
						EraseEof: [64774],
						Escape: [65307],
						Execute: [65378],
						Exsel: [64797],
						ExSel: [64797],
						F1: [65470],
						F2: [65471],
						F3: [65472],
						F4: [65473],
						F5: [65474],
						F6: [65475],
						F7: [65476],
						F8: [65477],
						F9: [65478],
						F10: [65479],
						F11: [65480],
						F12: [65481],
						F13: [65482],
						F14: [65483],
						F15: [65484],
						F16: [65485],
						F17: [65486],
						F18: [65487],
						F19: [65488],
						F20: [65489],
						F21: [65490],
						F22: [65491],
						F23: [65492],
						F24: [65493],
						Find: [65384],
						GroupFirst: [65036],
						GroupLast: [65038],
						GroupNext: [65032],
						GroupPrevious: [65034],
						FullWidth: null,
						HalfWidth: null,
						HangulMode: [65329],
						Hankaku: [65321],
						HanjaMode: [65332],
						Help: [65386],
						Hiragana: [65317],
						HiraganaKatakana: [65319],
						Home: [65360],
						Hyper: [65517, 65517, 65518],
						Insert: [65379],
						JapaneseHiragana: [65317],
						JapaneseKatakana: [65318],
						JapaneseRomaji: [65316],
						JunjaMode: [65336],
						KanaMode: [65325],
						KanjiMode: [65313],
						Katakana: [65318],
						Left: [65361],
						Meta: [65511, 65511, 65512],
						ModeChange: [65406],
						NumLock: [65407],
						PageDown: [65366],
						PageUp: [65365],
						Pause: [65299],
						Play: [64790],
						PreviousCandidate: [65342],
						PrintScreen: [64797],
						Redo: [65382],
						Right: [65363],
						RomanCharacters: null,
						Scroll: [65300],
						Select: [65376],
						Separator: [65452],
						Shift: [65505, 65505, 65506],
						SingleCandidate: [65340],
						Super: [65515, 65515, 65516],
						Tab: [65289],
						Up: [65362],
						Undo: [65381],
						Win: [65515],
						Zenkaku: [65320],
						ZenkakuHankaku: [65322]
					},
					u = {
						65027: !0,
						65505: !0,
						65506: !0,
						65507: !0,
						65508: !0,
						65511: !0,
						65512: !0,
						65513: !0,
						65514: !0,
						65515: !0,
						65516: !0
					};
				this.modifiers = new g.Keyboard.ModifierState, this.pressed = {};
				var v = {},
					w = {},
					x = null,
					y = null;
				this.press = function(a) {
					if(null !== a) {
						if(!m.pressed[a] && (m.pressed[a] = !0, m.onkeydown)) {
							var b = m.onkeydown(a);
							return v[a] = b, window.clearTimeout(x), window.clearInterval(y), u[a] || (x = window.setTimeout(function() {
								y = window.setInterval(function() {
									m.onkeyup(a), m.onkeydown(a)
								}, 50)
							}, 500)), b
						}
						return v[a] || !1
					}
				}, this.release = function(a) {
					m.pressed[a] && (delete m.pressed[a], window.clearTimeout(x), window.clearInterval(y), null !== a && m.onkeyup && m.onkeyup(a))
				}, this.reset = function() {
					for(var a in m.pressed) m.release(parseInt(a));
					r = []
				};
				var z = function(a) {
					return "location" in a ? a.location : "keyLocation" in a ? a.keyLocation : 0
				};
				a.addEventListener("keydown", function(a) {
					if(m.onkeydown) {
						var b;
						if(window.event ? b = window.event.keyCode : a.which && (b = a.which), i(a), 229 !== b) {
							var c = new o(b, a.keyIdentifier, a.key, z(a));
							r.push(c), j() && a.preventDefault()
						}
					}
				}, !0), a.addEventListener("keypress", function(a) {
					if(m.onkeydown || m.onkeyup) {
						var b;
						window.event ? b = window.event.keyCode : a.which && (b = a.which), i(a);
						var c = new p(b);
						r.push(c), j() && a.preventDefault()
					}
				}, !0), a.addEventListener("keyup", function(a) {
					if(m.onkeyup) {
						a.preventDefault();
						var b;
						window.event ? b = window.event.keyCode : a.which && (b = a.which), i(a);
						var c = new q(b, a.keyIdentifier, a.key, z(a));
						r.push(c), j()
					}
				}, !0)
			}, g.Keyboard.ModifierState = function() {
				this.shift = !1, this.ctrl = !1, this.alt = !1, this.meta = !1, this.hyper = !1
			}, g.Keyboard.ModifierState.fromKeyboardEvent = function(a) {
				var b = new g.Keyboard.ModifierState;
				return b.shift = a.shiftKey, b.ctrl = a.ctrlKey, b.alt = a.altKey, b.meta = a.metaKey, a.getModifierState && (b.hyper = a.getModifierState("OS") || a.getModifierState("Super") || a.getModifierState("Hyper") || a.getModifierState("Win")), b
			};
			var g = g || {};
			g.Layer = function(a, b) {
				function c(a, b) {
					var c = null;
					if(0 !== e.width && 0 !== e.height) {
						c = document.createElement("canvas"), c.width = e.width, c.height = e.height;
						var d = c.getContext("2d");
						d.drawImage(f, 0, 0, e.width, e.height, 0, 0, e.width, e.height)
					}
					var g = h.globalCompositeOperation;
					f.width = a, f.height = b, c && h.drawImage(c, 0, 0, e.width, e.height, 0, 0, e.width, e.height), h.globalCompositeOperation = g, e.width = a, e.height = b, j = 0, h.save()
				}

				function d(a, b, c, d) {
					var f, g = c + a,
						h = d + b;
					f = g > e.width ? g : e.width;
					var i;
					i = h > e.height ? h : e.height, e.resize(f, i)
				}
				var e = this,
					f = document.createElement("canvas"),
					h = f.getContext("2d");
				h.save();
				var i = !0,
					j = 0,
					k = {
						1: "destination-in",
						2: "destination-out",
						4: "source-in",
						6: "source-atop",
						8: "source-out",
						9: "destination-atop",
						10: "xor",
						11: "destination-over",
						12: "copy",
						14: "source-over",
						15: "lighter"
					};
				this.autosize = !1, this.width = a, this.height = b, this.getCanvas = function() {
					return f
				}, this.resize = function(a, b) {
					a === e.width && b === e.height || c(a, b)
				}, this.drawImage = function(a, b, c) {
					h.drawImage(c, a, b)
				}, this.transfer = function(a, b, c, f, i, j, k, l) {
					var m = a.getCanvas();
					if(!(b >= m.width || c >= m.height) && (b + f > m.width && (f = m.width - b), c + i > m.height && (i = m.height - c), 0 !== f && 0 !== i)) {
						e.autosize && d(j, k, f, i);
						for(var n = a.getCanvas().getContext("2d").getImageData(b, c, f, i), o = h.getImageData(j, k, f, i), p = 0; f * i * 4 > p; p += 4) {
							var q = new g.Layer.Pixel(n.data[p], n.data[p + 1], n.data[p + 2], n.data[p + 3]),
								r = new g.Layer.Pixel(o.data[p], o.data[p + 1], o.data[p + 2], o.data[p + 3]);
							l(q, r), o.data[p] = r.red, o.data[p + 1] = r.green, o.data[p + 2] = r.blue, o.data[p + 3] = r.alpha
						}
						h.putImageData(o, j, k)
					}
				}, this.put = function(a, b, c, f, g, i, j) {
					var k = a.getCanvas();
					if(!(b >= k.width || c >= k.height) && (b + f > k.width && (f = k.width - b), c + g > k.height && (g = k.height - c), 0 !== f && 0 !== g)) {
						e.autosize && d(i, j, f, g);
						var l = a.getCanvas().getContext("2d").getImageData(b, c, f, g);
						h.putImageData(l, i, j)
					}
				}, this.copy = function(a, b, c, f, g, i, j) {
					var k = a.getCanvas();
					b >= k.width || c >= k.height || (b + f > k.width && (f = k.width - b), c + g > k.height && (g = k.height - c), 0 !== f && 0 !== g && (e.autosize && d(i, j, f, g), h.drawImage(k, b, c, f, g, i, j, f, g)))
				}, this.moveTo = function(a, b) {
					i && (h.beginPath(), i = !1), e.autosize && d(a, b, 0, 0), h.moveTo(a, b)
				}, this.lineTo = function(a, b) {
					i && (h.beginPath(), i = !1), e.autosize && d(a, b, 0, 0), h.lineTo(a, b)
				}, this.arc = function(a, b, c, f, g, j) {
					i && (h.beginPath(), i = !1), e.autosize && d(a, b, 0, 0), h.arc(a, b, c, f, g, j)
				}, this.curveTo = function(a, b, c, f, g, j) {
					i && (h.beginPath(), i = !1), e.autosize && d(g, j, 0, 0), h.bezierCurveTo(a, b, c, f, g, j)
				}, this.close = function() {
					h.closePath(), i = !0
				}, this.rect = function(a, b, c, f) {
					i && (h.beginPath(), i = !1), e.autosize && d(a, b, c, f), h.rect(a, b, c, f)
				}, this.clip = function() {
					h.clip(), i = !0
				}, this.strokeColor = function(a, b, c, d, e, f, g) {
					h.lineCap = a, h.lineJoin = b, h.lineWidth = c, h.strokeStyle = "rgba(" + d + "," + e + "," + f + "," + g / 255 + ")", h.stroke(), i = !0
				}, this.fillColor = function(a, b, c, d) {
					h.fillStyle = "rgba(" + a + "," + b + "," + c + "," + d / 255 + ")", h.fill(), i = !0
				}, this.strokeLayer = function(a, b, c, d) {
					h.lineCap = a, h.lineJoin = b, h.lineWidth = c, h.strokeStyle = h.createPattern(d.getCanvas(), "repeat"), h.stroke(), i = !0
				}, this.fillLayer = function(a) {
					h.fillStyle = h.createPattern(a.getCanvas(), "repeat"), h.fill(), i = !0
				}, this.push = function() {
					h.save(), j++
				}, this.pop = function() {
					j > 0 && (h.restore(), j--)
				}, this.reset = function() {
					for(; j > 0;) h.restore(), j--;
					h.restore(), h.save(), h.beginPath(), i = !1
				}, this.setTransform = function(a, b, c, d, e, f) {
					h.setTransform(a, b, c, d, e, f)
				}, this.transform = function(a, b, c, d, e, f) {
					h.transform(a, b, c, d, e, f)
				}, this.setChannelMask = function(a) {
					h.globalCompositeOperation = k[a]
				}, this.setMiterLimit = function(a) {
					h.miterLimit = a
				}, f.width = a, f.height = b, f.style.zIndex = -1
			}, g.Layer.ROUT = 2, g.Layer.ATOP = 6, g.Layer.XOR = 10, g.Layer.ROVER = 11, g.Layer.OVER = 14, g.Layer.PLUS = 15, g.Layer.RIN = 1, g.Layer.IN = 4, g.Layer.OUT = 8, g.Layer.RATOP = 9, g.Layer.SRC = 12, g.Layer.Pixel = function(a, b, c, d) {
				this.red = a, this.green = b, this.blue = c, this.alpha = d
			};
			var g = g || {};
			g.Mouse = function(a) {
				function b(a) {
					a.stopPropagation(), a.preventDefault && a.preventDefault(), a.returnValue = !1
				}

				function c() {
					f = e.touchMouseThreshold
				}

				function d(a) {
					var c = a.deltaY || -a.wheelDeltaY || -a.wheelDelta;
					if(c ? 1 === a.deltaMode ? c = a.deltaY * e.PIXELS_PER_LINE : 2 === a.deltaMode && (c = a.deltaY * e.PIXELS_PER_PAGE) : c = a.detail * e.PIXELS_PER_LINE, h += c, h <= -e.scrollThreshold) {
						do e.onmousedown && (e.currentState.up = !0, e.onmousedown(e.currentState)), e.onmouseup && (e.currentState.up = !1, e.onmouseup(e.currentState)), h += e.scrollThreshold; while (h <= -e.scrollThreshold);
						h = 0
					}
					if(h >= e.scrollThreshold) {
						do e.onmousedown && (e.currentState.down = !0, e.onmousedown(e.currentState)), e.onmouseup && (e.currentState.down = !1, e.onmouseup(e.currentState)), h -= e.scrollThreshold; while (h >= e.scrollThreshold);
						h = 0
					}
					b(a)
				}
				var e = this;
				this.touchMouseThreshold = 3, this.scrollThreshold = 53, this.PIXELS_PER_LINE = 18, this.PIXELS_PER_PAGE = 16 * this.PIXELS_PER_LINE, this.currentState = new g.Mouse.State(0, 0, !1, !1, !1, !1, !1), this.onmousedown = null, this.onmouseup = null, this.onmousemove = null, this.onmouseout = null;
				var f = 0,
					h = 0;
				a.addEventListener("contextmenu", function(a) {
					b(a)
				}, !1), a.addEventListener("mousemove", function(c) {
					return b(c), f ? void f-- : (e.currentState.fromClientPosition(a, c.clientX, c.clientY), void(e.onmousemove && e.onmousemove(e.currentState, c)))
				}, !1), a.addEventListener("mousedown", function(a) {
					if(b(a), !f) {
						switch(a.button) {
							case 0:
								e.currentState.left = !0;
								break;
							case 1:
								e.currentState.middle = !0;
								break;
							case 2:
								e.currentState.right = !0
						}
						e.onmousedown && e.onmousedown(e.currentState, a)
					}
				}, !1), a.addEventListener("mouseup", function(a) {
					if(b(a), !f) {
						switch(a.button) {
							case 0:
								e.currentState.left = !1;
								break;
							case 1:
								e.currentState.middle = !1;
								break;
							case 2:
								e.currentState.right = !1
						}
						e.onmouseup && e.onmouseup(e.currentState, a)
					}
				}, !1), a.addEventListener("mouseout", function(c) {
					c || (c = window.event);
					for(var d = c.relatedTarget || c.toElement; d;) {
						if(d === a) return;
						d = d.parentNode
					}
					b(c), (e.currentState.left || e.currentState.middle || e.currentState.right) && (e.currentState.left = !1, e.currentState.middle = !1, e.currentState.right = !1, e.onmouseup && e.onmouseup(e.currentState)), e.onmouseout && e.onmouseout()
				}, !1), a.addEventListener("selectstart", function(a) {
					b(a)
				}, !1), a.addEventListener("touchmove", c, !1), a.addEventListener("touchstart", c, !1), a.addEventListener("touchend", c, !1), a.addEventListener("DOMMouseScroll", d, !1), a.addEventListener("mousewheel", d, !1), a.addEventListener("wheel", d, !1);
				var i = function() {
					var a = document.createElement("div");
					if(!("cursor" in a.style)) return !1;
					try {
						a.style.cursor = "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==) 0 0, auto"
					} catch(b) {
						return !1
					}
					return /\burl\([^()]*\)\s+0\s+0\b/.test(a.style.cursor || "")
				}();
				this.setCursor = function(b, c, d) {
					if(i) {
						var e = b.toDataURL("image/png");
						return a.style.cursor = "url(" + e + ") " + c + " " + d + ", auto", !0
					}
					return !1
				}
			}, g.Mouse.State = function(a, b, c, d, e, f, g) {
				var h = this;
				this.x = a, this.y = b, this.left = c, this.middle = d, this.right = e, this.up = f, this.down = g, this.fromClientPosition = function(a, b, c) {
					h.x = b - a.offsetLeft, h.y = c - a.offsetTop;
					for(var d = a.offsetParent; d && d !== document.body;) h.x -= d.offsetLeft - d.scrollLeft, h.y -= d.offsetTop - d.scrollTop, d = d.offsetParent
				}
			}, g.Mouse.Touchpad = function(a) {
				var b = this;
				this.scrollThreshold = 20 * (window.devicePixelRatio || 1), this.clickTimingThreshold = 250, this.clickMoveThreshold = 10 * (window.devicePixelRatio || 1), this.currentState = new g.Mouse.State(0, 0, !1, !1, !1, !1, !1), this.onmousedown = null, this.onmouseup = null, this.onmousemove = null;
				var c = 0,
					d = 0,
					e = 0,
					f = 0,
					h = 0,
					i = {
						1: "left",
						2: "right",
						3: "middle"
					},
					j = !1,
					k = null;
				a.addEventListener("touchend", function(a) {
					if(a.preventDefault(), j && 0 === a.touches.length) {
						var d = (new Date).getTime(),
							e = i[c];
						b.currentState[e] && (b.currentState[e] = !1, b.onmouseup && b.onmouseup(b.currentState), k && (window.clearTimeout(k), k = null)), d - f <= b.clickTimingThreshold && h < b.clickMoveThreshold && (b.currentState[e] = !0, b.onmousedown && b.onmousedown(b.currentState), k = window.setTimeout(function() {
							b.currentState[e] = !1, b.onmouseup && b.onmouseup(b.currentState), j = !1
						}, b.clickTimingThreshold)), k || (j = !1)
					}
				}, !1), a.addEventListener("touchstart", function(a) {
					if(a.preventDefault(), c = Math.min(a.touches.length, 3), k && (window.clearTimeout(k), k = null), !j) {
						j = !0;
						var b = a.touches[0];
						d = b.clientX, e = b.clientY, f = (new Date).getTime(), h = 0
					}
				}, !1), a.addEventListener("touchmove", function(g) {
					g.preventDefault();
					var i = g.touches[0],
						j = i.clientX - d,
						k = i.clientY - e;
					if(h += Math.abs(j) + Math.abs(k), 1 === c) {
						var l = h / ((new Date).getTime() - f),
							m = 1 + l;
						b.currentState.x += j * m, b.currentState.y += k * m, b.currentState.x < 0 ? b.currentState.x = 0 : b.currentState.x >= a.offsetWidth && (b.currentState.x = a.offsetWidth - 1), b.currentState.y < 0 ? b.currentState.y = 0 : b.currentState.y >= a.offsetHeight && (b.currentState.y = a.offsetHeight - 1), b.onmousemove && b.onmousemove(b.currentState), d = i.clientX, e = i.clientY
					} else if(2 === c && Math.abs(k) >= b.scrollThreshold) {
						var n;
						n = k > 0 ? "down" : "up", b.currentState[n] = !0, b.onmousedown && b.onmousedown(b.currentState), b.currentState[n] = !1, b.onmouseup && b.onmouseup(b.currentState), d = i.clientX, e = i.clientY
					}
				}, !1)
			}, g.Mouse.Touchscreen = function(a) {
				function b(a) {
					j.currentState[a] || (j.currentState[a] = !0, j.onmousedown && j.onmousedown(j.currentState))
				}

				function c(a) {
					j.currentState[a] && (j.currentState[a] = !1, j.onmouseup && j.onmouseup(j.currentState))
				}

				function d(a) {
					b(a), c(a)
				}

				function e(b, c) {
					j.currentState.fromClientPosition(a, b, c), j.onmousemove && j.onmousemove(j.currentState)
				}

				function f(a) {
					var b = a.touches[0] || a.changedTouches[0],
						c = b.clientX - l,
						d = b.clientY - m;
					return Math.sqrt(c * c + d * d) >= j.clickMoveThreshold
				}

				function h(a) {
					var b = a.touches[0];
					k = !0, l = b.clientX, m = b.clientY
				}

				function i() {
					window.clearTimeout(n), window.clearTimeout(o), k = !1
				}
				var j = this,
					k = !1,
					l = null,
					m = null,
					n = null,
					o = null;
				this.scrollThreshold = 20 * (window.devicePixelRatio || 1), this.clickTimingThreshold = 250, this.clickMoveThreshold = 16 * (window.devicePixelRatio || 1), this.longPressThreshold = 500, this.currentState = new g.Mouse.State(0, 0, !1, !1, !1, !1, !1), this.onmousedown = null, this.onmouseup = null, this.onmousemove = null, a.addEventListener("touchend", function(a) {
					if(k) {
						if(0 !== a.touches.length || 1 !== a.changedTouches.length) return void i();
						window.clearTimeout(o), c("left"), i()
					}
				}, !1), a.addEventListener("touchstart", function(a) {
					if(c("left"), 1 !== a.touches.length) return void i();
					a.preventDefault(), h(a);
					var f = a.touches[0];
					e(f.clientX, f.clientY), b("left"), window.clearTimeout(n), o = window.setTimeout(function() {
						var b = a.touches[0];
						e(b.clientX, b.clientY), d("right")
					}, j.longPressThreshold)
				}, !1), a.addEventListener("touchmove", function(a) {
					if(k) {
						if(f(a) && window.clearTimeout(o), 1 !== a.touches.length) return void i();
						if(j.currentState.left) {
							a.preventDefault();
							var b = a.touches[0];
							e(b.clientX, b.clientY)
						}
					}
				}, !1)
			}, g.Mouse.Touch = function(a) {
				function b(b, c) {
					d.onmousedown && d.onmousedown(a, b, c, !0)
				}

				function c(b, c) {
					d.onmouseup && d.onmouseup(a, b, c, !1)
				}
				var d = this;
				this.onmousedown = null, this.onmouseup = null, this.onmousemove = null, a.addEventListener("touchstart", function(a) {
					a.preventDefault();
					var c = a.touches;
					b(c, a)
				}, !1), a.addEventListener("touchmove", function(a) {
					a.preventDefault();
					var c = a.touches;
					b(c, a)
				}, !1), a.addEventListener("touchend", function(a) {
					a.preventDefault();
					var b = a.changedTouches;
					c(b, a)
				}, !1)
			};
			var g = g || {};
			g.Object = function(a, b) {
				var c = this,
					d = {},
					e = function(a) {
						var b = d[a];
						if(!b) return null;
						var c = b.shift();
						return 0 === b.length && delete d[a], c
					},
					f = function(a, b) {
						var c = d[a];
						c || (c = [], d[a] = c), c.push(b)
					};
				this.index = b, this.onbody = function(a, b, c) {
					var d = e(c);
					d && d(a, b)
				}, this.onundefine = null, this.requestInputStream = function(b, d) {
					d && f(b, d), a.requestObjectInputStream(c.index, b)
				}, this.createOutputStream = function(b, d) {
					return a.createObjectOutputStream(c.index, b, d)
				}
			}, g.Object.ROOT_STREAM = "/", g.Object.STREAM_INDEX_MIMETYPE = "";
			var g = g || {};
			g.OnScreenKeyboard = function(a) {
				var b = this,
					c = {},
					d = {},
					e = [],
					f = 0,
					h = function(a, b, c, d) {
						this.width = b, this.height = c, this.scale = function(e) {
							a.style.width = b * e + "px", a.style.height = c * e + "px", d && (a.style.lineHeight = c * e + "px", a.style.fontSize = e + "px")
						}
					},
					i = function(a) {
						for(var b = 0; b < a.length; b++) {
							var d = a[b];
							if(!(d in c)) return !1
						}
						return !0
					},
					j = function(a) {
						var c = b.keys[a];
						if(!c) return null;
						for(var d = c.length - 1; d >= 0; d--) {
							var e = c[d];
							if(i(e.requires)) return e
						}
						return null
					},
					k = function(a, e) {
						if(!d[a]) {
							var f = j(a);
							if(f.modifier) {
								var g = c[f.modifier];
								g ? (delete c[f.modifier], b.onkeyup && b.onkeyup(g)) : (c[f.modifier] = f.keysym, b.onkeydown && b.onkeydown(f.keysym))
							} else b.onkeydown && b.onkeydown(f.keysym);
							d[a] = !0
						}
					},
					l = function(a, c) {
						if(d[a]) {
							var e = j(a);
							!e.modifier && b.onkeyup && b.onkeyup(e.keysym), d[a] = !1
						}
					},
					m = document.createElement("div");
				m.onselectstart = m.onmousemove = m.onmouseup = m.onmousedown = function(a) {
					return f && f--, a.stopPropagation(), !1
				}, this.touchMouseThreshold = 3, this.onkeydown = null, this.onkeyup = null, this.layout = new g.OnScreenKeyboard.Layout(a), this.getElement = function() {
					return m
				}, this.resize = function(a) {
					for(var c = Math.floor(10 * a / b.layout.width) / 10, d = 0; d < e.length; d++) {
						var f = e[d];
						f.scale(c)
					}
				};
				var n = function(a, b) {
						if(b instanceof Array) {
							for(var c = [], d = 0; d < b.length; d++) c.push(new g.OnScreenKeyboard.Key(b[d], a));
							return c
						}
						return "number" == typeof b ? [new g.OnScreenKeyboard.Key({
							name: a,
							keysym: b
						})] : "string" == typeof b ? [new g.OnScreenKeyboard.Key({
							name: a,
							title: b
						})] : [new g.OnScreenKeyboard.Key(b, a)]
					},
					o = function(b) {
						var c = {};
						for(var d in a.keys) c[d] = n(d, b[d]);
						return c
					};
				this.keys = o(a.keys);
				var p = function q(a, c, d) {
					var g, i = document.createElement("div");
					if(c instanceof Array)
						for(g = 0; g < c.length; g++) q(i, c[g]);
					else if(c instanceof Object) {
						var j = Object.keys(c).sort();
						for(g = 0; g < j.length; g++) {
							var d = j[g];
							q(i, c[d], d)
						}
					} else if("number" == typeof c) e.push(new h(i, c, c));
					else if("string" == typeof c) {
						var m = c;
						1 === m.length && (m = "0x" + m.charCodeAt(0).toString(16));
						var n = document.createElement("div"),
							o = b.keys[c];
						if(o)
							for(g = 0; g < o.length; g++) {
								var p = o[g],
									r = document.createElement("div");
								r.textContent = p.title;
								for(var s = 0; s < p.requires.length; s++) {
									p.requires[s]
								}
								n.appendChild(r)
							}
						i.appendChild(n), e.push(new h(i, b.layout.keyWidths[c] || 1, 1, !0));
						var t = function(a) {
								a.preventDefault(), f = b.touchMouseThreshold, k(c, n)
							},
							u = function(a) {
								a.preventDefault(), f = b.touchMouseThreshold, l(c, n)
							},
							v = function(a) {
								a.preventDefault(), 0 === f && k(c, n)
							},
							w = function(a) {
								a.preventDefault(), 0 === f && l(c, n)
							};
						n.addEventListener("touchstart", t, !0), n.addEventListener("touchend", u, !0), n.addEventListener("mousedown", v, !0), n.addEventListener("mouseup", w, !0), n.addEventListener("mouseout", w, !0)
					}
					a.appendChild(i)
				};
				p(m, a.layout)
			}, g.OnScreenKeyboard.Layout = function(a) {
				this.language = a.language, this.type = a.type, this.keys = a.keys, this.layout = a.layout, this.width = a.width, this.keyWidths = a.keyWidths || {}
			}, g.OnScreenKeyboard.Key = function(a, b) {
				this.name = b || a.name, this.title = a.title || this.name, this.keysym = a.keysym || function(a) {
					if(!a || 1 !== a.length) return null;
					var b = a.charCodeAt(0);
					return b >= 0 && 255 >= b ? b : b >= 256 && 1114111 >= b ? 16777216 | b : null
				}(this.title), this.modifier = a.modifier, this.requires = a.requires || []
			};
			var g = g || {};
			g.OutputStream = function(a, b) {
				var c = this;
				this.index = b, this.onack = null, this.sendBlob = function(b) {
					a.sendBlob(c.index, b)
				}, this.sendEnd = function() {
					a.endStream(c.index)
				}
			};
			var g = g || {};
			g.Parser = function() {
				var a = this,
					b = "",
					c = [],
					d = -1,
					e = 0;
				this.receive = function(f) {
					for(e > 4096 && d >= e && (b = b.substring(e), d -= e, e = 0), b += f; d < b.length;) {
						if(d >= e) {
							var g = b.substring(e, d),
								h = b.substring(d, d + 1);
							if(c.push(g), ";" == h) {
								var i = c.shift();
								null !== a.oninstruction && a.oninstruction(i, c), c.length = 0
							} else if("," != h) throw new Error("Illegal terminator.");
							e = d + 1
						}
						var j = b.indexOf(".", e);
						if(-1 == j) {
							e = b.length;
							break
						}
						var k = parseInt(b.substring(d + 1, j));
						if(isNaN(k)) throw new Error("Non-numeric character in element length.");
						e = j + 1, d = e + k
					}
				}, this.oninstruction = null
			};
			var g = g || {};
			g.Status = function(a, b) {
				var c = this;
				this.code = a, this.message = b, this.isError = function() {
					return c.code < 0 || c.code > 255
				}
			}, g.Status.Code = {
				SUCCESS: 0,
				UNSUPPORTED: 256,
				SERVER_ERROR: 512,
				SERVER_BUSY: 513,
				UPSTREAM_TIMEOUT: 514,
				UPSTREAM_ERROR: 515,
				RESOURCE_NOT_FOUND: 516,
				RESOURCE_CONFLICT: 517,
				CLIENT_BAD_REQUEST: 768,
				CLIENT_UNAUTHORIZED: 769,
				CLIENT_FORBIDDEN: 771,
				CLIENT_TIMEOUT: 776,
				CLIENT_OVERRUN: 781,
				CLIENT_BAD_TYPE: 783,
				CLIENT_TOO_MANY: 797
			};
			var g = g || {};
			g.StringReader = function(a) {
				function b(a) {
					for(var b = "", c = new Uint8Array(a), d = 0; d < c.length; d++) {
						var g = c[d];
						0 === e ? 127 === (127 | g) ? b += String.fromCharCode(g) : 223 === (31 | g) ? (f = 31 & g, e = 1) : 239 === (15 | g) ? (f = 15 & g, e = 2) : 247 === (7 | g) ? (f = 7 & g, e = 3) : b += "" : 191 === (63 | g) ? (f = f << 6 | 63 & g, e--, 0 === e && (b += String.fromCharCode(f))) : (e = 0, b += "")
					}
					return b
				}
				var c = this,
					d = new g.ArrayBufferReader(a),
					e = 0,
					f = 0;
				d.ondata = function(a) {
					var d = b(a);
					c.ontext && c.ontext(d)
				}, d.onend = function() {
					c.onend && c.onend()
				}, this.ontext = null, this.onend = null
			};
			var g = g || {};
			g.StringWriter = function(a) {
				function b(a) {
					if(i + a >= h.length) {
						var b = new Uint8Array(2 * (i + a));
						b.set(h), h = b
					}
					i += a
				}

				function c(a) {
					var d, e;
					if(127 >= a) d = 0, e = 1;
					else if(2047 >= a) d = 192, e = 2;
					else if(65535 >= a) d = 224, e = 3;
					else {
						if(!(2097151 >= a)) return void c(65533);
						d = 240, e = 4
					}
					b(e);
					for(var f = i - 1, g = 1; e > g; g++) h[f--] = 128 | 63 & a, a >>= 6;
					h[f] = d | a
				}

				function d(a) {
					for(var b = 0; b < a.length; b++) {
						var d = a.charCodeAt(b);
						c(d)
					}
					if(i > 0) {
						var e = h.subarray(0, i);
						return i = 0, e
					}
				}
				var e = this,
					f = new g.ArrayBufferWriter(a),
					h = new Uint8Array(8192),
					i = 0;
				f.onack = function(a) {
					e.onack && e.onack(a)
				}, this.sendText = function(a) {
					f.sendData(d(a))
				}, this.sendEnd = function() {
					f.sendEnd()
				}, this.onack = null
			};
			var g = g || {};
			g.Tunnel = function() {
				this.connect = function(a) {}, this.disconnect = function() {}, this.sendMessage = function(a) {}, this.state = g.Tunnel.State.CONNECTING, this.receiveTimeout = 15e3, this.onerror = null, this.onstatechange = null, this.oninstruction = null
			}, g.Tunnel.State = {
				CONNECTING: 0,
				OPEN: 1,
				CLOSED: 2
			}, g.HTTPTunnel = function(a, b) {
				function c() {
					window.clearTimeout(u), u = window.setTimeout(function() {
						d(new g.Status(g.Status.Code.UPSTREAM_TIMEOUT, "Server timeout."))
					}, k.receiveTimeout)
				}

				function d(a) {
					k.state !== g.Tunnel.State.CLOSED && (a.code !== g.Status.Code.SUCCESS && k.onerror && (k.state !== g.Tunnel.State.CONNECTING && a.code === g.Status.Code.RESOURCE_NOT_FOUND || k.onerror(a)), k.state = g.Tunnel.State.CLOSED, r = !1, k.onstatechange && k.onstatechange(k.state))
				}

				function e() {
					if(k.state === g.Tunnel.State.OPEN)
						if(s.length > 0) {
							r = !0;
							var a = new XMLHttpRequest;
							a.open("POST", n + j), a.withCredentials = t, a.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=UTF-8"), a.onreadystatechange = function() {
								4 === a.readyState && (200 !== a.status ? f(a) : e())
							}, a.send(s), s = ""
						} else r = !1
				}

				function f(a) {
					var b = parseInt(a.getResponseHeader("Arowser-Status-Code")),
						c = a.getResponseHeader("Arowser-Error-Message");
					d(new g.Status(b, c))
				}

				function h(a) {
					function b() {
						if(k.state !== g.Tunnel.State.OPEN) return void(null !== d && clearInterval(d));
						if(!(a.readyState < 2)) {
							var j;
							try {
								j = a.status
							} catch(p) {
								j = 200
							}
							if(e || 200 !== j || (e = i()), 3 === a.readyState || 4 === a.readyState) {
								if(c(), q === o && (3 !== a.readyState || d ? 4 !== a.readyState || d || clearInterval(d) : d = setInterval(b, 30)), 0 === a.status) return void k.disconnect();
								if(200 !== a.status) return void f(a);
								var r;
								try {
									r = a.response
								} catch(p) {
									return
								}
								if(r)
									if(r instanceof ArrayBuffer) {
										m = 0;
										try {
											for(; m + 4 < r.byteLength;) {
												var s = new Uint8Array(r, m, 4);
												m += 4;
												for(var t = 0, u = s.length - 1; u >= 0; u--) t = (t << 8) + s[u];
												if(s.length = 0, -1 === t) {
													var v = n.shift();
													v = String.fromCharCode.apply(null, v);
													var w = [];
													for(var u in n) {
														var x, y = n[u];
														x = "png" === v && 4 === parseInt(u) ? new Uint8Array(y) : "blob" === v && 1 === parseInt(u) ? y : String.fromCharCode.apply(null, y), w.push(x)
													}
													n.length = 0, k.oninstruction && k.oninstruction(v, w), w.length = 0
												} else {
													var z = new Uint8Array(r, m, t);
													m += t, n.push(z), z.length = 0
												}
											}
											d || clearInterval(d), a.onreadystatechange = null, a.abort(), e && h(e)
										} catch(p) {}
									} else
										for(; l < r.length;) {
											if(l >= m) {
												var A = r.substring(m, l),
													B = r.substring(l, l + 1);
												if(n.push(A), ";" === B) {
													var v = n.shift();
													k.oninstruction && k.oninstruction(v, n), n.length = 0
												}
												m = l + 1
											}
											var C = r.indexOf(".", m);
											if(-1 === C) {
												m = r.length;
												break
											}
											var t = parseInt(r.substring(l + 1, C));
											if(0 === t) {
												d || clearInterval(d), a.onreadystatechange = null, a.abort(), e && h(e);
												break
											}
											m = C + 1, l = m + t
										}
							}
						}
					}
					var d = null,
						e = null,
						j = 0,
						l = -1,
						m = 0,
						n = [];
					q === o ? a.onreadystatechange = function() {
						3 === a.readyState && (j++, j >= 2 && (q = p, a.onreadystatechange = b)), b()
					} : a.onreadystatechange = b, b()
				}

				function i() {
					var a = new XMLHttpRequest;
					return a.open("GET", m + j + ":" + v++), a.withCredentials = t, a.send(null), a.responseType = "arraybuffer", a
				}
				var j, k = this,
					l = a + "?connect",
					m = a + "?read:",
					n = a + "?write:",
					o = 1,
					p = 0,
					q = o,
					r = !1,
					s = "",
					t = !!b,
					u = null;
				this.sendMessage = function() {
					function a(a) {
						var b = String(a);
						return b.length + "." + b
					}
					if(k.state === g.Tunnel.State.OPEN && 0 !== arguments.length) {
						for(var b = a(arguments[0]), c = 1; c < arguments.length; c++) b += "," + a(arguments[c]);
						b += ";", s += b, r || e()
					}
				};
				var v = 0;
				this.connect = function(a) {
					c();
					var b = new XMLHttpRequest;
					b.onreadystatechange = function() {
						if(4 === b.readyState) {
							if(200 !== b.status) return void f(b);
							c(), j = b.responseText, k.state = g.Tunnel.State.OPEN, k.onstatechange && k.onstatechange(k.state), h(i())
						}
					}, b.open("POST", l, !0), b.withCredentials = t, b.setRequestHeader("Content-type", "application/x-www-form-urlencoded;charset=UTF-8"), b.send(a)
				}, this.disconnect = function() {
					d(new g.Status(g.Status.Code.SUCCESS, "Manually closed."))
				}
			}, g.HTTPTunnel.prototype = new g.Tunnel, g.WebSocketTunnel = function(a) {
				function b() {
					window.clearTimeout(i), i = window.setTimeout(function() {
						c(new g.Status(g.Status.Code.UPSTREAM_TIMEOUT, "Server timeout."))
					}, f.receiveTimeout)
				}

				function c(a) {
					f.state !== g.Tunnel.State.CLOSED && (a.code !== g.Status.Code.SUCCESS && f.onerror && f.onerror(a), f.state = g.Tunnel.State.CLOSED, f.onstatechange && f.onstatechange(f.state), h && h.close())
				}

				function d(a) {
					var b = 0,
						d = [],
						e = [];
					try {
						do {
							var h = new Uint8Array(a, b, 4);
							b += 4;
							for(var i = 0, j = h.length - 1; j >= 0; j--) i = (i << 8) + h[j];
							if(h = null, -1 === i) {
								var k = d.shift();
								k = String.fromCharCode.apply(null, k);
								for(var j in d) {
									var l, m = d[j];
									l = "png" === k && 4 === parseInt(j) ? new Uint8Array(m) : "blob" === k && 1 === parseInt(j) ? m : String.fromCharCode.apply(null, m), e.push(l), l = void 0
								}
								d = [], f.oninstruction && f.oninstruction(k, e), e = []
							} else {
								var n = new Uint8Array(a, b, i);
								b += i, d.push(n), n = []
							}
						} while (b < a.byteLength)
					} catch(o) {
						console.error(o), c(new g.Status(g.Status.Code.SERVER_ERROR, "Incomplete instruction."))
					}
					d = null, e = null, a.length = 0, a = null
				}

				function e(a) {
					var b, d = 0,
						e = [];
					do {
						var h = a.indexOf(".", d);
						if(-1 !== h) {
							var i = parseInt(a.substring(b + 1, h));
							d = h + 1, b = d + i
						} else c(new g.Status(g.Status.Code.SERVER_ERROR, "Incomplete instruction."));
						var j = a.substring(d, b),
							k = a.substring(b, b + 1);
						if(e.push(j), ";" === k) {
							var l = e.shift();
							f.oninstruction && f.oninstruction(l, e), e.length = 0
						}
						d = b + 1
					} while (d < a.length)
				}
				var f = this,
					h = null,
					i = null,
					j = {
						"http:": "ws:",
						"https:": "wss:"
					};
				if("ws:" !== a.substring(0, 3) && "wss:" !== a.substring(0, 4)) {
					var k = j[window.location.protocol];
					if("/" === a.substring(0, 1)) a = k + "//" + window.location.host + a;
					else {
						var l = window.location.pathname.lastIndexOf("/"),
							m = window.location.pathname.substring(0, l + 1);
						a = k + "//" + window.location.host + m + a
					}
				}
				this.sendMessage = function(a) {
					function b(a) {
						var b = String(a);
						return b.length + "." + b
					}
					if(f.state === g.Tunnel.State.OPEN && 0 !== arguments.length) {
						for(var c = b(arguments[0]), d = 1; d < arguments.length; d++) c += "," + b(arguments[d]);
						c += ";", h.send(c)
					}
				}, this.connect = function(i) {
					b(), h = new WebSocket(a + "?" + i), h.binaryType = "arraybuffer", h.onopen = function(a) {
						b(), f.state = g.Tunnel.State.OPEN, f.onstatechange && f.onstatechange(f.state)
					}, h.onclose = function(a) {
						c(new g.Status(parseInt(a.reason), a.reason))
					}, h.onerror = function(a) {
						c(new g.Status(g.Status.Code.SERVER_ERROR, a.data))
					}, h.onmessage = function(a) {
						b();
						var c = a.data;
						c instanceof ArrayBuffer ? d(c) : e(c)
					}
				}, this.disconnect = function() {
					c(new g.Status(g.Status.Code.SUCCESS, "Manually closed."))
				}
			}, g.WebSocketTunnel.prototype = new g.Tunnel, g.ChainedTunnel = function(a) {
				function b(a) {
					function h() {
						var c = e.shift();
						return c && (a.onerror = null, a.oninstruction = null, a.onstatechange = null, b(c)), c
					}

					function i() {
						a.onstatechange = d.onstatechange, a.oninstruction = d.oninstruction, a.onerror = d.onerror, f = a
					}
					d.disconnect = a.disconnect, d.sendMessage = a.sendMessage, a.onstatechange = function(a) {
						switch(a) {
							case g.Tunnel.State.OPEN:
								i(), d.onstatechange && d.onstatechange(a);
								break;
							case g.Tunnel.State.CLOSED:
								!h() && d.onstatechange && d.onstatechange(a)
						}
					}, a.oninstruction = function(a, b) {
						i(), d.oninstruction && d.oninstruction(a, b)
					}, a.onerror = function(a) {
						!h() && d.onerror && d.onerror(a)
					}, a.connect(c)
				}
				for(var c, d = this, e = [], f = null, h = 0; h < arguments.length; h++) e.push(arguments[h]);
				this.connect = function(a) {
					c = a;
					var h = f ? f : e.shift();
					h ? b(h) : d.onerror && d.onerror(g.Status.Code.SERVER_ERROR, "No tunnels to try.")
				}
			}, g.ChainedTunnel.prototype = new g.Tunnel;
			var h, g = g || {};
			if(window.WebSocket) {
				var i;
				E.connect_url.indexOf("https://") > -1 ? i = E.connect_url.replace("https://", "wss://") : E.connect_url.indexOf("http://") > -1 && (i = E.connect_url.replace("http://", "ws://")), h = new g.ChainedTunnel(new g.WebSocketTunnel(i + "/websocket-tunnel"), new g.HTTPTunnel(E.protocol + E.connect_url + "/tunnel"))
			} else h = new g.ChainedTunnel(new g.HTTPTunnel(E.protocol + E.connect_url + "/tunnel"));
			var j = new g.Client(h, E.encode_type);
			j.onstatechange = function(a) {
				3 === a && d(j)
			}, j.onerror = function(a) {
				j.disconnect(), "interrupt" === a.message ? q("interrupt") : "error" === a.message ? q("disconnect", 1002) : q("disconnect", 1002)
			};
			var k = j.getDisplay().getElement();
			k.onclick = function(a) {
				return a.preventDefault(), !1
			};
			var l = function() {};
			D.iOS && (l = function() {
				var a = 44100,
					b = j.getAudioPlayers();
				for(var c in b) {
					var d = b[c];
					try {
						var e = d.getContext();
						if(e && "running" !== e.state) {
							var f = e.createBufferSource(),
								g = e.createBuffer(1, 1, a);
							f.buffer = g, f.connect(e.destination), f.start || (f.start = f.noteOn), f.start(0), 48e3 === e.sampleRate && d.renewContext()
						}
					} catch(h) {}
				}
			});
			var m = new g.Mouse.Touch(k);
			m.onmousedown = m.onmouseup = m.onmousemove = function(a, d, f, h) {
				l();
				for(var i = [], k = 0; k < d.length; k++) {
					var m = d[k],
						n = new g.Mouse.State(m.clientX, m.clientY, h, !1, !1, !1, !1);
					h === !0 && n.fromClientPosition(a, m.clientX, m.clientY);
					var o = e(n);
					i.push(o)
				}
				var p = j.sendTouchState(i);
				b(p), c(f)
			};
			var n = new g.Mouse(k);
			n.onmousedown = n.onmouseup = n.onmousemove = function(a, b) {
				f(a), c(b)
			}, setTimeout(function() {
				var a = j.isReceivedImage();
				a === !1 && (f(new g.Mouse.State(0, 0, !0, !1, !1, !1, !1)), f(new g.Mouse.State(0, 0, !1, !1, !1, !1, !1)))
			}, 1e3);
			var p = new g.Keyboard(document);
			p.onkeydown = function(a) {
				j.sendKeyEvent(1, a)
			}, p.onkeyup = function(a) {
				j.sendKeyEvent(0, a)
			}, D.attachedKeyboard = p, o(j);
			var r = ArowserUI.Client.Control,
				s = r.sourceWidth,
				t = r.sourceHeight,
				u = window.devicePixelRatio || 1,
				v = 96 * u,
				w = s * u,
				x = t * u;
			if(t > w && t > x) {
				var y = Math.max(t / w, t / x);
				w *= y, x *= y
			}
			var z = "width=" + Math.floor(w) + "&height=" + Math.floor(x) + "&dpi=" + Math.floor(v) + "&access_key=" + a + "&resolution_scale=" + ArowserUI.Client.params.resolution_scale + "&encode_type=" + ArowserUI.Client.params.encode_type,
				A = document.createElement("video");
			if(window.AudioContext || window.webkitAudioContext) {
				var B = ["audio/ogg"];
				for(var C in B) {
					var F = B[C],
						G = A.canPlayType(F);
					"maybe" !== G && "probably" !== G || (z += "&audio=" + F)
				}
				var B = ["audio/mp4", "audio/mpeg"];
				for(var C in B) {
					var F = B[C],
						G = A.canPlayType(F);
					"maybe" !== G && "probably" !== G || (z += "&audio=" + F)
				}
			} else try {
				new Audio;
				var B = ["audio/mpeg"];
				for(var C in B) {
					var F = B[C],
						G = A.canPlayType(F);
					"maybe" !== G && "probably" !== G || (z += "&audio=" + F)
				}
			} catch(I) {}
			var J = function(a) {
				console.log("connect tunnel"), j.connect(a)
			};
			! function() {
				var a = new Image;
				a.onload = function() {
					var b = !1;
					try {
						b = a.height > 0 && a.width > 0
					} catch(c) {}
					b && !navigator.userAgent.match("CriOS") && (z += "&image=image/webp"), J(z)
				}, a.onerror = function() {
					J(z)
				}, a.src = "data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA=="
			}()
		}

		function i() {
			return !!(document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement)
		}

		function j() {
			var a = document.getElementById("zoomControl");
			if(a) {
				var b = "";
				90 !== H && 270 !== H || (b = "_vert"), i() ? a.className = "zoomout" + b : a.className = "zoomin" + b
			}
		}

		function k() {
			if(i()) m();
			else {
				var a = document.documentElement,
					b = a.requestFullscreen || a.mozRequestFullScreen || a.webkitRequestFullscreen || a.msRequestFullscreen;
				void 0 !== b && b.call(a)
			}
		}

		function l() {
			var a = document.documentElement,
				b = a.requestFullscreen || a.mozRequestFullScreen || a.webkitRequestFullscreen || a.msRequestFullscreen;
			return void 0 !== b
		}

		function m() {
			var a = document,
				b = a.exitFullscreen || a.mozCancelFullScreen || a.webkitExitFullscreen || a.msExitFullscreen;
			void 0 !== b && b.call(a)
		}

		function n(a, b) {
			function c() {
				return w && w.isShow() ? void w.hide() : v && v.isShow() ? void v.hide() : (a.sendKeyEvent(1, 65307), a.sendKeyEvent(0, 65307), ArowserUI.Client.Analytics.trackEvent("back"), void $.post(F.back, {
					access_key: E.access_key,
					history_app_id: E.history_app_id,
					app_type: E.app_type
				}))
			}
			var d = ArowserUI.Client.params.control_button_number;
			0 === ArowserUI.Client.params.enable_zoom ? 5 === d && (d = 4) : 1 === ArowserUI.Client.params.enable_zoom && (l() || 5 !== d || (d = 4));
			var e = 2 * ArowserUI.Client.Control.sourceWidth / d,
				f = document.createElement("button");
			f.id = "backControl", f.className = "back", f.style.width = e + "px", f.addEventListener("mouseup", function() {
				c()
			});
			var g = document.createElement("button");
			g.id = "markControl", g.className = "markControl", g.style.width = e + "px", g.addEventListener("mouseup", function(a) {
				w && w.isShow() && w.hide(), v.toggle(), ArowserUI.Client.Analytics.trackEvent("menu"), $.post(F.more, {
					access_key: E.access_key,
					history_app_id: E.history_app_id,
					app_type: E.app_type
				})
			});
			var h = document.getElementById("download-href");
			if(h.id = "downloadControl", h.className = "download", h.target = "_top", h.style.width = e + "px", "download" === E.layout) {
				h.className = "download-only fix-blur";
				var i = '<div class="dl-text-special noselect"></div><div class="dl-text-special noselect"></div><div class="dl-text-special noselect"></div><div class="dl-text-special noselect"></div>';
				h.innerHTML = '<div class="dl-img"></div><div class="dl-text noselect">' + E.download_text + "</div>" + i
			}
			h.addEventListener("mouseup", function(a) {
				a.preventDefault();
				var b = E.redirect_app_download_url + "&download_type=302";
				r(), ArowserUI.Client.Analytics.trackEvent("download"), E.inIframe ? window.open(b, "_blank") : window.open(b, "_self")
			});
			var m = document.createElement("button");
			if(m.id = "zoomControl", 0 === E.zoom_status ? m.className = "zoomin" : m.className = "zoomout", m.style.width = e + "px", m.addEventListener("mouseup", function() {
					var a = "";
					90 !== H && 270 !== H || (a = "_vert"), m.className === "zoomout" + a ? (ArowserUI.Client.Analytics.trackEvent("zoomout"), $.post(F.zoomout, {
						access_key: E.access_key,
						history_app_id: E.history_app_id,
						app_type: E.app_type
					}), 2 === ArowserUI.Client.params.enable_zoom && (m.className = "zoomin" + a, E.inIframe && window.parent.postMessage("exit fullscreen", "*"))) : (ArowserUI.Client.Analytics.trackEvent("zoomin"), $.post(F.zoomin, {
						access_key: E.access_key,
						history_app_id: E.history_app_id,
						app_type: E.app_type
					}), 2 === ArowserUI.Client.params.enable_zoom && (m.className = "zoomout" + a, E.inIframe && window.parent.postMessage("enter fullscreen", "*"))), 1 === ArowserUI.Client.params.enable_zoom && k(m)
				}), 1 === ArowserUI.Client.params.enable_zoom) {
				var n = "webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange";
				$(document).on(n, j)
			}
			var o = document.createElement("button");
			o.id = "closeControl", o.className = "close", o.style.width = e + "px", o.addEventListener("mouseup", function() {
				v && v.isShow() && v.hide();
				var a = i18n.t("finish_preplay") || "Preplay service will be finished.",
					b = i18n.t("leave_play") || "Leave current play ?",
					c = document.getElementById("confirmPanel");
				if(c.getElementsByClassName("confirm-text")[0].innerHTML = a, c.getElementsByClassName("confirm-header-text")[0].innerHTML = b, w) {
					if("close" === w.getName()) return void w.toggle();
					w.hide()
				}
				w = ArowserUI.Client.Utility.Lightbox(c.innerHTML, K, L, y), w.setZindex(90), w.setName("close"), w.setConfirmCallback(function() {
					ArowserUI.Client.Analytics.trackEvent("close"), $.post(F.close, {
						access_key: E.access_key,
						history_app_id: E.history_app_id,
						app_type: E.app_type
					}), r()
				}), G.updateDisplayScale(), w.show()
			});
			var p = ArowserUI.Client.Control.sourceHeight,
				q = ArowserUI.Client.Control.controlWidth,
				s = ArowserUI.Client.Control.controlHeight,
				t = ArowserUI.Client.params.resolution_scale;
			isNaN(parseFloat(t)) || (p *= t, q *= t, s *= t);
			var u = document.createElement("div");
			u.className = "controlPanel480", u.style.width = 2 * ArowserUI.Client.Control.controlWidth + "px", u.style.height = 2 * ArowserUI.Client.Control.controlHeight + "px", "download" === E.layout ? (u.className += " download-only-480 " + E.theme, u.appendChild(h)) : (u.appendChild(f), u.appendChild(g), 5 === d ? (u.appendChild(h), u.appendChild(m)) : 4 === d && u.appendChild(h), u.appendChild(o)), b.appendChild(u)
		}

		function o(b) {
			function c(a, b) {
				var c = a.height() * b;
				a.find(".dl-img").css({
					width: c + "px",
					"background-size": c + "px " + c + "px"
				})
			}

			function d() {
				var a = ArowserUI.Client.attachedClient;
				if(a) {
					var b = $(v.getContent()).find(".audio .more-img");
					document[V] ? b.hasClass("audio-img") && (a.setMute(!0), a.sendAudioState(0)) : b.hasClass("audio-img") && (a.setMute(!1), a.sendAudioState(1))
				}
			}
			ArowserUI.Client.attachedClient && ArowserUI.Client.attachedClient.disconnect(), ArowserUI.Client.attachedClient = b, b.getDisplay().onresize = function(a, b) {
				240 === a && 400 === b ? E.resolution_scale = .5 : 288 === a && 480 === b ? E.resolution_scale = .6 : 312 === a && 520 === b ? E.resolution_scale = .65 : 336 === a && 560 === b ? E.resolution_scale = .7 : 360 === a && 600 === b ? E.resolution_scale = .75 : 384 === a && 640 === b ? E.resolution_scale = .8 : 480 === a && 800 === b && (E.resolution_scale = 1), G.updateDisplayScale()
			}, D.iOS ? window.addEventListener("pagehide", function(a) {
				E.ignore_onbeforeunload_attach || (b.disconnect(), r()), E.ignore_onbeforeunload_attach = !1
			}, !1) : $(window).on("beforeunload", function() {
				E.ignore_onbeforeunload_attach || (b.disconnect(), r()), E.ignore_onbeforeunload_attach = !1
			});
			var e = document.createElement("div");
			e.id = "warning", e.style.position = "absolute", e.style.left = 0, e.style.top = 0, e.style.width = "100%", e.style.height = "100%", e.style.zIndex = "100", "pointerEvents" in document.body.style ? e.style.pointerEvents = "none" : e.style.display = "none";
			var f = document.getElementById("startGameWarningPanel"),
				g = i18n.t("Game Start") || "Game Start",
				h = i18n.t("Direct Play") || "Direct Play";
			C = new ArowserUI.Client.Utility.ClearWarningDisplay(f);
			var i = C.getText(".text-content");
			C.setText(".text-content", g + " " + h + " " + i + " !"), C.setName("startgame");
			var f = document.createElement("div");
			f.className = "warning-container fix-blur";
			var g = i18n.t("Slow internet speeds") || "Slow internet speeds";
			f.innerHTML = "<div class='image-content'><img src='https://arowser.fiiser.com/resources/image/speed.png'></div><div class='text-content'>" + g + " <span class='speed-text'></span> <span class='resolution-text'></span></div>", z = new ArowserUI.Client.Utility.ClearWarningDisplay(f);
			var f = document.createElement("div");
			f.className = "warning-container fix-blur";
			var g = i18n.t("Stream quality update to") || "Stream quality update to:";
			f.innerHTML = "<div class='image-content'><img src='https://arowser.fiiser.com/resources/image/speed.png'></div><div class='text-content'>" + g + " <span class='resolution-text'></span></div>", A = new ArowserUI.Client.Utility.ClearWarningDisplay(f);
			var f = document.createElement("div");
			f.className = "warning-container fix-blur";
			var g = i18n.t("Please use Safari") || "Please use Safari";
			f.innerHTML = "<div class='image-content'><img src='https://arowser.fiiser.com/resources/image/warning.png' style='-webkit-filter: invert(1); -moz-filter: invert(1); -ms-filter: invert(1); -o-filter: invert(1); filter: invert(1);'></div><div class='text-content'>" + g + "</div>", B = new ArowserUI.Client.Utility.ClearWarningDisplay(f);
			var j = document.createElement("div");
			j.id = "shader", y = document.createElement("div"), y.id = "mainDisplay", y.style.position = "relative", y.appendChild(b.getDisplay().getElement()), y.appendChild(e);
			var k = document.createElement("div");
			k.id = "controlDisplay", k.style.display = "none", n(b, k);
			var l = document.createElement("div");
			l.id = "mainScreen", l.style.position = "relative", l.appendChild(j), l.appendChild(y), l.appendChild(k);
			var m = document.createElement("div");
			if(m.id = "display", m.style.marginLeft = "auto", m.style.marginRight = "auto", m.appendChild(C.getContent()), m.appendChild(z.getContent()), m.appendChild(A.getContent()), m.appendChild(B.getContent()), m.appendChild(l), $(ArowserUI.Client.main).prepend(m), "bright" === E.theme && (document.body.style.backgroundColor = "#f1f1f1"), C.fadeIn(ArowserUI.Client.params.fadeInFadeOutIntervalTime, function() {
					b.onspeed = function(a) {
						p(a, E.measureSpeedLowerbound)
					}
				}), "download" === E.layout) {
				var o = !1;
				ArowserUI.Client.blinkDownloadInterval = setInterval(function() {
					if(!o) {
						var a = $("div.controlPanel480 button"),
							b = a.find(".dl-img");
						b.toggleClass("hover"), b.hasClass("hover") ? c(a, 1.1) : c(a, 1)
					}
				}, 1e3), $("div.controlPanel480 button").hover(function() {
					$(this).find(".dl-img").addClass("hover"), c($(this), 1.1), o = !0
				}, function() {
					$(this).find(".dl-img").removeClass("hover"), c($(this), 1), o = !1
				})
			}
			if("popupad" === E.interstitial_ad) {
				var q = document.getElementById("advertisePanel"),
					s = document.createDocumentFragment(),
					t = document.createElement("ins");
				t.className = "adsbygoogle", t.style.display = "inline-block", t.style.width = "336px", t.style.height = "280px";
				var F = document.createElement("script");
				F.innerHTML = "try {(adsbygoogle = window.adsbygoogle || []).push({});} catch (ex) {}", s.appendChild(t), s.appendChild(F);
				var H = q.querySelector(".ad_content");
				H && (H.innerHTML = "", H.appendChild(s)), u = new ArowserUI.Client.Utility.Lightbox(q.innerHTML, 361, 330, y, 1)
			}
			var I = document.getElementById("forceDownloadPanel");
			x = ArowserUI.Client.Utility.Lightbox(I.innerHTML, 361, 330, y, 1);
			var J = 280,
				M = 320;
			D.mobile && (M += 50), E.block_app_detail_link && (M -= 50, D.mobile && (M -= 10));
			var N = document.getElementById("controlPanel");
			v = new ArowserUI.Client.Utility.Lightbox(N.outerHTML, J, M, y), D.mobile && $(v.getContent()).find(".controlElement>a").css("margin-bottom", "20px");
			var O = document.getElementById("sharePanel");
			O.className = "embededSharePanel fix-blur";
			var P = ArowserUI.Client.Utility.Choices(O.outerHTML, "#shareContainer", v);
			if($(v.getContent()).find(".share").on("click", function(a) {
					a.preventDefault(), a.stopPropagation(), U.isOpen() && U.hide(), P.isOpen() ? (v.setSize(J, M), v.setInputHeight(M), v.setInputWidth(J)) : ArowserUI.Client.mobile ? (v.setSize(J + 60, M + 100), v.setInputWidth(J + 60), v.setInputHeight(M + 100)) : (v.setSize(J + 60, M + 100), v.setInputWidth(J + 60), v.setInputHeight(M + 100)), P.toggle()
				}), b) {
				var Q = $("#resolutionPanel");
				if(Q.find(".resolution_scale").removeClass("not-active"), "auto" === E.resolution) {
					var R = Q.find('.resolution_scale[data-rel="resolution_auto"]');
					R.addClass("not-active");
					var S = D.scales;
					"0" !== E.encode_type && (S = D.scales_264), E.resolution_scale === S.low ? R.attr("data-resolution", "low") : E.resolution_scale === S.normal ? R.attr("data-resolution", "normal") : E.resolution_scale === S.high && R.attr("data-resolution", "high")
				} else "low" === E.resolution ? Q.find('.resolution_scale[data-rel="resolution_low"]').addClass("not-active") : "normal" === E.resolution ? Q.find('.resolution_scale[data-rel="resolution_normal"]').addClass("not-active") : "high" === E.resolution && Q.find('.resolution_scale[data-rel="resolution_high"]').addClass("not-active")
			}
			var T = document.getElementById("resolutionPanel");
			T.className = "embededResolutionPanel";
			var U = ArowserUI.Client.Utility.Choices(T.outerHTML, "#resolutionContainer", v);
			$(v.getContent()).find(".resolution").on("click", function(a) {
				if(a.preventDefault(), a.stopPropagation(), P.isOpen() && P.hide(), U.isOpen()) v.setSize(J, M), v.setInputHeight(M), v.setInputWidth(J);
				else {
					var b = 90;
					v.setSize(J + b, M + 50), v.setInputWidth(J + b), v.setInputHeight(M + 50)
				}
				U.toggle()
			});
			var V, W;
			"undefined" != typeof document.hidden ? (V = "hidden", W = "visibilitychange") : "undefined" != typeof document.mozHidden ? (V = "mozHidden", W = "mozvisibilitychange") : "undefined" != typeof document.msHidden ? (V = "msHidden", W = "msvisibilitychange") : "undefined" != typeof document.webkitHidden && (V = "webkitHidden", W = "webkitvisibilitychange"), document.addEventListener(W, d, !1), $(v.getContent()).find(".audio").on("click", function(a) {
				var b = ArowserUI.Client.attachedClient;
				if(b) {
					var c = $(this).find(".more-img");
					c.hasClass("audio-img") ? (b.setMute(!0), b.sendAudioState(0), c.removeClass("audio-img").addClass("audio-off-img")) : (b.setMute(!1), b.sendAudioState(1), c.removeClass("audio-off-img").addClass("audio-img"))
				}
			}), $(v.getContent()).find(".cancel").on("click", function(a) {
				a.preventDefault(), a.stopPropagation(), v.hide()
			}), $(document).on("click", ".resolution_scale", function() {
				z && z.hide(), B && B.hide();
				var a = ArowserUI.Client.attachedClient;
				if(a) {
					var b = $(this).data("rel"),
						c = D.scales;
					"0" !== E.encode_type && (c = D.scales_264), $(v.getContent()).find(".resolution_scale").removeClass("not-active"), $(this).addClass("not-active");
					var d;
					if("resolution_low" === b) a.sendScale(c.low), d = i18n.t("resolution.low") || "Low", E.resolution = "low";
					else if("resolution_high" === b) a.sendScale(c.high), d = i18n.t("resolution.high") || "High", E.resolution = "high";
					else if("resolution_normal" === b) a.sendScale(c.normal), d = i18n.t("resolution.normal") || "Normal", E.resolution = "normal";
					else if("resolution_auto" === b) {
						d = i18n.t("resolution.auto") || "Auto", E.resolution = "auto";
						var e = $(v.getContent()).find('.resolution_scale[data-rel="resolution_auto"]');
						E.resolution_scale === c.low ? e.attr("data-resolution", "low") : E.resolution_scale === c.normal ? e.attr("data-resolution", "normal") : E.resolution_scale === c.high && e.attr("data-resolution", "high")
					}
					A.setText(".resolution-text", d), A.fadeIn(3e3)
				}
			}), $(v.getContent()).find(".link").on("click", function(a) {
				a.preventDefault();
				var b = i18n.t("finish_preplay") || "Preplay service will be finished.";
				b += " ";
				var c = $(this).data("rel");
				"fiiser" === c ? b += i18n.t("Go to Fiiser Page?") || "Go to Fiiser page?" : "detail" === c && (b += i18n.t("Go to App Detail Page?") || "Go to App Detail page?");
				var d = i18n.t("leave_play") || "Leave current play ?",
					e = document.getElementById("confirmPanel");
				e.getElementsByClassName("confirm-text")[0].innerHTML = b, e.getElementsByClassName("confirm-header-text")[0].innerHTML = d;
				var f = $(this).attr("href"),
					g = $(this).attr("target");
				w && w.hide(), w = ArowserUI.Client.Utility.Lightbox(e.innerHTML, K, L, y), w.setZindex(90), w.setConfirmCallback(function() {
					ArowserUI.Client.Analytics.trackEvent(c), void 0 !== g ? (r(), window.open(f, g)) : window.open(f, "_self")
				}), G.updateDisplayScale(), w.toggle()
			}), Arowser.getToken(function(a) {
				null !== a && D.Tool.getFavApps(function(a) {
					var b = D.Tool.isFavorite(a);
					if(b) {
						var c = $(v.getContent()).find(".fav");
						c.find(".more-img").removeClass("fav-img").addClass("fav-added-img");
						var d = i18n.t("Added") || "Added";
						c.find(".fav-text").text(d)
					}
				})
			}), $(v.getContent()).find(".fav").on("click", function(a) {
				if(a.preventDefault(), a.stopPropagation(), D.uiwebview) return z && z.hide(), A && A.hide(), void B.fadeIn(3e3);
				var b = 400,
					c = 480,
					d = "https://www.fiiser.com/service/login/iframe/?cs=1",
					e = screen.width / 2 - b / 2,
					f = screen.height / 2 - c / 2;
				if(E.locale) {
					var g = "";
					"ja" === E.locale ? g = "ja" : "zh_TW" === E.locale ? g = "zh-tw" : "zh_CN" === E.locale && (g = "zh-cn"), "" !== g && (d += "&language=" + g)
				}
				var h = window.open("", "", "toolbar=no, location=1, directories=no, status=1, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=" + b + ", height=" + c + ", top=" + f + ", left=" + e),
					i = $(this);
				Arowser.getToken(function(a) {
					if(null !== a) h.close(), D.Tool.getFavApps(function(b) {
						var c = D.Tool.isFavorite(b);
						i.find(".more-img").removeClass("fav-img").removeClass("fav-added-img").addClass("fav-loading"), c ? D.Tool.editFav("delete", function(b) {
							if(null === b || 500 === b.status) {
								i.find(".more-img").removeClass("fav-loading").addClass("fav-added-img");
								var c = i18n.t("Added") || "Added";
								i.find(".fav-text").text(c)
							} else if(0 === b.status) {
								i.find(".more-img").removeClass("fav-loading").addClass("fav-img");
								var c = i18n.t("Add App") || "Add App";
								i.find(".fav-text").text(c), D.Tool.addViewToPageFav(b, "delete", a), ArowserUI.Client.Analytics.trackEvent("favorite", "delete")
							}
						}) : D.Tool.editFav("add", function(b) {
							if(null === b || 500 === b.status) {
								i.find(".more-img").removeClass("fav-loading").addClass("fav-img");
								var c = i18n.t("Add App") || "Add App";
								i.find(".fav-text").text(c)
							} else if(0 === b.status) {
								i.find(".more-img").removeClass("fav-loading").addClass("fav-added-img");
								var c = i18n.t("Added") || "Added";
								i.find(".fav-text").text(c), D.Tool.addViewToPageFav(b, "add", a), ArowserUI.Client.Analytics.trackEvent("favorite", "add")
							}
						})
					});
					else {
						i.find(".more-img").removeClass("fav-loading").addClass("fav-img");
						var b = i18n.t("Add App") || "Add App";
						i.find(".fav-text").text(b), setTimeout(function() {
							h.location = d
						}, 500);
						var c = setInterval(function() {
							h.closed !== !1 && (clearInterval(c), Arowser.getToken(function(a) {
								null !== a && D.Tool.getFavApps(function(b) {
									var c = D.Tool.isFavorite(b);
									if(c) {
										i.find(".more-img").removeClass("fav-img").addClass("fav-added-img");
										var d = i18n.t("Added") || "Added";
										i.find(".fav-text").text(d)
									} else i.find(".more-img").removeClass("fav-img").removeClass("fav-added-img").addClass("fav-loading"), D.Tool.editFav("add", function(b) {
										if(null === b || 500 === b.status) {
											i.find(".more-img").removeClass("fav-loading").addClass("fav-img");
											var c = i18n.t("Add App") || "Add App";
											i.find(".fav-text").text(c)
										} else if(0 === b.status) {
											i.find(".more-img").removeClass("fav-loading").addClass("fav-added-img");
											var c = i18n.t("Added") || "Added";
											i.find(".fav-text").text(c), D.Tool.addViewToPageFav(b, "add", a), ArowserUI.Client.Analytics.trackEvent("favorite", "add")
										}
									})
								})
							}))
						}, 200)
					}
				})
			}), $(v.getContent()).find(".take_picture").on("click", function(b) {
				if(b.preventDefault(), b.stopPropagation(), a) {
					var c = 400,
						d = 480,
						e = "https://www.fiiser.com/service/login/iframe/?cs=1",
						f = screen.width / 2 - c / 2,
						g = screen.height / 2 - d / 2;
					if(E.locale) {
						var h = "";
						"ja" === E.locale ? h = "ja" : "zh_TW" === E.locale ? h = "zh-tw" : "zh_CN" === E.locale && (h = "zh-cn"), "" !== h && (e += "&language=" + h)
					}
					var i = window.open("", "", "toolbar=no, location=1, directories=no, status=1, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=" + c + ", height=" + d + ", top=" + g + ", left=" + f);
					Arowser.getToken(function(b) {
						if(null !== b) i.close(), $.get(E.protocol + E.connect_url + "/action/screenshot?access_key=" + a, function() {
							v.toggle();
							var a = i18n.t("Screen captured") || "Screen captured";
							C.setText(".text-content", a), C.fadeIn(3e3)
						});
						else {
							setTimeout(function() {
								i.location = e
							}, 500);
							var c = setInterval(function() {
								i.closed !== !1 && (clearInterval(c), Arowser.getToken(function(b) {
									null !== b && $.get(E.protocol + E.connect_url + "/action/screenshot?access_key=" + a, function() {
										v.toggle();
										var a = i18n.t("Screen captured") || "Screen captured";
										C.setText(".text-content", a), C.fadeIn(3e3)
									})
								}))
							}, 200)
						}
					})
				}
			})
		}

		function p(a, b) {
			if(b > a) {
				a > 0 ? z.setText(".speed-text", a.toFixed(2) + " Mbps ") : z.setText(".speed-text", "");
				var c = ArowserUI.Client.attachedClient;
				if(c && v && "auto" === E.resolution) {
					if(E.resolution_scale !== D.scales.low && "0" === E.encode_type) {
						c.sendScale(D.scales.low);
						var d = i18n.t("Stream quality update to") || "Stream quality update to:",
							e = i18n.t("resolution.low") || "Low";
						z.setText(".resolution-text", ". " + d + " " + e), $(v.getContent()).find('.resolution_scale[data-rel="resolution_auto"]').attr("data-resolution", "low")
					} else if(E.resolution_scale !== D.scales_h264.low && "0" !== E.encode_type) {
						c.sendScale(D.scales_h264.low);
						var d = i18n.t("Stream quality update to") || "Stream quality update to:",
							e = i18n.t("resolution.low") || "Low";
						z.setText(".resolution-text", ". " + d + " " + e), $(v.getContent()).find('.resolution_scale[data-rel="resolution_auto"]').attr("data-resolution", "low")
					}
				} else z.setText(".resolution-text", "");
				setTimeout(function() {
					A && A.hide(), B && B.hide(), z.fadeIn(ArowserUI.Client.params.fadeInFadeOutIntervalTime, function() {})
				}, 1e3)
			}
			ArowserUI.Client.records.measuredSpeeds.push(a), ArowserUI.Client.records.measuredspeedTotal += a;
			var f = ArowserUI.Client.records.measuredSpeeds,
				g = ArowserUI.Client.records.measuredspeedTotal,
				h = f.length;
			h > 0 && (ArowserUI.Client.records.internet_speed = g / h)
		}

		function q(a, b) {
			N || (N = !0, s(), G.onError && G.onError(a, b, function() {
				t()
			}))
		}

		function r() {
			N || (N = !0, s(), G.onError && G.onError("", null, function() {
				t()
			}))
		}

		function s() {
			try {
				u && u.hide(), x && x.hide()
			} catch(b) {}
			try {
				v && v.hide()
			} catch(b) {}
			1 === E.enable_zoom && l() ? m() : 2 === E.enable_zoom && E.inIframe && window.parent.postMessage("exit fullscreen", "*");
			try {
				R.length > 0 && ($.post(F.mousemovement, {
					access_key: a,
					movement: R.join(";")
				}), R.length = 0)
			} catch(b) {}
		}

		function t() {
			try {
				var a = ArowserUI.Client.attachedClient;
				if(a) try {
					a.disconnect()
				} catch(b) {}
				var c = D.attachedKeyboard;
				c && (c.onkeydown = null, c.onkeyup = null)
			} catch(b) {}
			try {
				if(I) try {
					I.close()
				} catch(b) {}
			} catch(b) {}
			try {
				if(J) try {
					J.close()
				} catch(b) {}
			} catch(b) {}
		}
		$("#mainframe-bc").remove();
		var u, v, w, x, y, z, A, B, C, D = ArowserUI.Client,
			E = D.params,
			F = (E.locale, D.records, D.URLs),
			G = this,
			H = !1,
			I = null,
			J = null,
			K = 420,
			L = 170,
			M = !0,
			N = !1;
		this.onError = null, D.load.onReceiveMessage = function(a) {
			if(2 === E.enable_zoom) {
				var b = document.getElementById("zoomControl");
				if(b) {
					var c = "";
					switch(90 !== H && 270 !== H || (c = "_vert"), a.data) {
						case "enter fullscreen":
							b.className = "zoomout" + c;
							break;
						case "exit fullscreen":
							b.className = "zoomin" + c
					}
				}
			}
		};
		var O, P, Q, R = [],
			S = 500;
		this.run = function() {
			ArowserUI.Client.Current = G, E.inIframe && window.parent.postMessage("arowser play", "*"), E.playStartTime = (new Date).getTime(),
				function() {
					O = (new Date).getTime();
					var a = 18e5,
						b = document.getElementsByTagName("html"),
						d = document.getElementsByTagName("div"),
						e = function() {
							var b = (new Date).getTime();
							b - O > a && q("idle")
						};
					for(var f in b) {
						var g = b[f];
						null !== g && "object" == typeof g && (g.addEventListener("mousemove", c), g.addEventListener("touchstart", c))
					}
					for(var f in d) {
						var h = d[f];
						null !== h && "object" == typeof h && (h.addEventListener("mousemove", c), h.addEventListener("touchstart", c))
					}
					setInterval(e, 1e4)
				}();
			var b = function(a) {
				d(a)
			};
			h(a, b)
		}, this.updateDisplayScale = function() {
			var a = ArowserUI.Client.attachedClient;
			if(a) {
				if(M && "clear" !== E.layout) {
					M = !1;
					var b = document.getElementById("controlDisplay");
					b && (b.style.display = "block")
				}
				var c = a.getDisplay().getScale() === ArowserUI.Client.min_zoom,
					d = 1 + ArowserUI.Client.Control.controlHeight / ArowserUI.Client.Control.sourceHeight,
					e = document.getElementById("downloadControl"),
					f = document.getElementById("markControl"),
					h = document.getElementById("backControl"),
					i = document.getElementById("closeControl"),
					j = document.getElementById("zoomControl"),
					k = "";
				if(90 !== H && 270 !== H || (k = "_vert"), e && ("download" === E.layout ? e.className = "download-only" + k : e.className = "download" + k), h && (h.className = "back" + k), f && (f.className = "markControl" + k), i && (i.className = "close" + k), j && ("zoomin" === j.className ? j.className = "zoomin" + k : "zoomout" === j.className && (j.className = "zoomout" + k)), "auto" === ArowserUI.Client.params.type) {
					var l = ArowserUI.Client.main;
					if(l) {
						var m = l.offsetWidth,
							n = l.offsetHeight;
						m > n ? ArowserUI.Client.min_zoom = Math.min(l.offsetHeight / Math.max(a.getDisplay().getWidth(), 1), l.offsetWidth / Math.max(a.getDisplay().getHeight() * d, 1)) : ArowserUI.Client.min_zoom = Math.min(l.offsetWidth / Math.max(a.getDisplay().getWidth(), 1), l.offsetHeight / Math.max(a.getDisplay().getHeight() * d, 1))
					}
				} else if("app" === ArowserUI.Client.params.type) {
					var l = ArowserUI.Client.main;
					l && (ArowserUI.Client.min_zoom = Math.min(l.offsetWidth / Math.max(a.getDisplay().getWidth(), 1), l.offsetHeight / Math.max(a.getDisplay().getHeight() * d, 1)))
				} else {
					var l = ArowserUI.Client.main;
					l && (90 === H || 270 === H ? ArowserUI.Client.min_zoom = Math.min(l.offsetHeight / Math.max(a.getDisplay().getWidth(), 1), l.offsetWidth / Math.max(a.getDisplay().getHeight() * d, 1)) : ArowserUI.Client.min_zoom = Math.min(l.offsetWidth / Math.max(a.getDisplay().getWidth(), 1), l.offsetHeight / Math.max(a.getDisplay().getHeight() * d, 1)))
				}
				ArowserUI.Client.max_zoom = Math.max(ArowserUI.Client.min_zoom, 3), a.getDisplay().getScale() < ArowserUI.Client.min_zoom || c ? g(ArowserUI.Client.min_zoom) : a.getDisplay().getScale() > ArowserUI.Client.max_zoom && g(ArowserUI.Client.max_zoom);
				var l = ArowserUI.Client.main;
				if(l) {
					C && C.setScale(l.offsetWidth, l.offsetHeight, H, y), z && z.setScale(l.offsetWidth, l.offsetHeight, H, y), A && A.setScale(l.offsetWidth, l.offsetHeight, H, y), B && B.setScale(l.offsetWidth, l.offsetHeight, H, y);
					var b = document.getElementById("controlDisplay"),
						m = $(y).find("div").width(),
						o = m / 8;
					$(b).width(m + "px").height(o + "px");
					var p = $(".controlPanel480");
					p.width(m + "px").height(o + "px");
					var q = [];
					p[0] && p[0].children && (q = p[0].children);
					for(var r = q.length, s = m / r, t = o + "px " + o + "px", u = 0; r > u; u++) {
						var v = q[u];
						if($(v).hasClass("download-only") || $(v).hasClass("download-only_vert")) {
							var w = Math.floor(o / 25),
								x = "0 0 0 " + w + "px white inset, 0 0 0 " + 2 * w + "px #9e9e9e inset";
							$(v).css({
								"-moz-box-shadow": x,
								"-webkit-box-shadow": x,
								"box-shadow": x
							});
							var D = $(v).height();
							$(v).find(".dl-img").css({
								width: D + "px",
								height: D + "px",
								"background-size": D + "px " + D + "px"
							});
							var F = 35,
								G = 10,
								I = m;
							120 >= I ? (F = 8, G = 2) : 250 >= I ? (F = 10, G = 3) : 300 >= I ? (F = 15, G = 4) : 375 >= I ? (F = 20, G = 5) : 481 >= I ? (F = 25, G = 8) : 641 >= I ? F = 30 : 800 >= I ? F = 40 : 961 >= I ? F = 45 : 1025 >= I && (F = 50), $(v).hasClass("download-only") ? ($(v).find(".dl-text-special").css("font-size", "0px").css("margin-left", "0px").css("width", "0px"), $(v).find(".dl-text").css("font-size", F + "px").css("margin-left", G + "px")) : ($(v).find(".dl-text").css("font-size", "0px").css("margin-left", "0px"), $(v).find(".dl-text-special").css("font-size", F + "px").css("margin-left", G + "px").css("height", "inherit").css("width", ""))
						} else $(v).width(s).height(o).css("background-size", t)
					}
				}
			}
		}
	}, ArowserUI.Client.Error = function(a, b) {
		function c() {
			1 === k.imageLoaded || 0 === k.imageLoaded ? k.inIframe && window.parent.postMessage("orientation landscape", "*") : 2 === k.imageLoaded && k.inIframe && window.parent.postMessage("orientation portrait", "*")
		}

		function d(a) {
			if(a && a.length > 0) {
				for(var b = a.length, c = [], d = 0; b > d && !(d >= 4); d++) {
					var e = {};
					e.history_app_id = a[d].history_app_id, e.current_app_id = a[d].current_app_id, e.app_type = a[d].app_type, e.app_icon = a[d].app_icon, e.title = a[d].title, e.market_id = a[d].market_id, c.push(e)
				}
				$.ajax({
					url: k.protocol + k.connect_url + "/ajax/apps",
					data: {
						history_app_id: k.history_app_id,
						app_type: k.app_type,
						type: k.type,
						locale: k.locale,
						access_key: k.access_key,
						view_type: "myapp",
						data: JSON.stringify(c)
					},
					dataType: "json",
					timeout: 5e3,
					type: "post",
					success: function(a) {
						for(var c = $("#addedAppList"), d = "", e = 0; e < a.length && !(3 === e && b > 4); e++) {
							var f = '<a class="app-item app-item-favorite" href="' + a[e].arowserUrl + '" data-current_app_id="' + a[e].appDetail.current_app_id + '" data-app_type="' + a[e].appDetail.app_type + '"><img class="icon" title="' + a[e].appDetail.title + '" alt="' + a[e].appDetail.title + '" src="' + a[e].icon_url + '"></a>';
							d += f
						}
						var g = c.find(".similar");
						g.empty().append(d), b > 4 && $(".hidden .morebutton.more-fav").clone().appendTo(g), c.show()
					},
					error: function(a) {}
				}), 0 === parseInt(k.similar_app_length) || null === k.similar_app_length ? f(k.category, function(a) {
					g(a)
				}) : $("#hotAppList").hide()
			} else $("#addedAppList").hide(), f(k.category, function(a) {
				g(a)
			})
		}

		function e(a, b) {
			if(b) {
				a.find("img").attr("src", E);
				var c = i18n.t("Added") || "Added";
				a.find("h2").text(c)
			} else {
				a.find("img").attr("src", D);
				var c = i18n.t("Add App") || "Add App";
				a.find("h2").text(c)
			}
		}

		function f(a, b) {
			if(k.disable_hotapps_link === !0) return void b();
			var c;
			a ? (c = a.toString(), "8" === c.charAt(0) && (c = "8")) : c = "999", $.ajax({
				url: "https://api.fiiser.com/intraservice/gettopranklist?count=3&detail=1&category=" + c,
				dataType: "json",
				timeout: 5e3,
				success: function(a) {
					var c = a.result;
					b(c)
				},
				error: function(a) {
					b()
				}
			})
		}

		function g(a) {
			if(a && a.length > 0) {
				for(var b = a.length, c = [], d = 0; b > d && !(d >= 4); d++) {
					var e = {};
					e.history_app_id = a[d].history_app_id, e.current_app_id = a[d].current_app_id, e.app_type = a[d].app_type, e.app_icon = a[d].app_icon, e.title = a[d].title, e.market_id = a[d].market_id, c.push(e)
				}
				$.ajax({
					url: k.protocol + k.connect_url + "/ajax/apps",
					data: {
						history_app_id: k.history_app_id,
						app_type: k.app_type,
						type: k.type,
						locale: k.locale,
						access_key: k.access_key,
						view_type: "hotapp",
						data: JSON.stringify(c)
					},
					dataType: "json",
					timeout: 5e3,
					type: "post",
					success: function(a) {
						for(var b = $("#hotAppList"), c = "", d = 0; d < a.length; d++) {
							var e = '<a class="app-item app-item-hot" href="' + a[d].arowserUrl + '" data-current_app_id="' + a[d].appDetail.current_app_id + '" data-app_type="' + a[d].appDetail.app_type + '" ><img class="icon" title="' + a[d].appDetail.title + '" alt="' + a[d].appDetail.title + '" src="' + a[d].icon_url + '"></a>';
							c += e
						}
						var f = b.find(".similar");
						f.empty().append(c), $(".hidden .morebutton.more-hot").clone().appendTo(f), b.show()
					},
					error: function(a) {}
				})
			} else $("#hotAppList").hide()
		}

		function h(a) {
			var b = "";
			return b = void 0 === a || "" === a ? i18n.t("error.finished") || "Service finished." : "timeout" === a || "commercial_unavailable" === a ? i18n.t("error.timeout") || "Thanks for playing." : "disconnect" === a ? i18n.t("error.disconnect") || "Please check your internet connection and try again." : "interrupt" === a ? i18n.t("error.interrupt") || "Another app is running on other window/tab. Please turn it off and try again." : "error" === a ? i18n.t("error.error") || "There is an error in this app. Please try other apps or try again later." : "client_error" === a ? i18n.t("error.client_error") || "There is an error occurred in this web page. Please try other apps or try again later." : "busy" === a ? i18n.t("error.busy") || "System busy." : "idle" === a ? i18n.t("error.idle") || "This app has been idle for too long and has expired. Please try again." : "none" === a ? i18n.t("error.none") || "Can't find this app. Please try other apps." : "unarowserable" === a ? i18n.t("error.unarowserable") || "Not offer this App demo. Please try other apps." : "wrong_parameters" === a ? i18n.t("error.wrong_parameters") || "Parameter error." : "often" === a ? i18n.t("error.often") || "Try too many times, please play again later." : "oldbrowser" === a ? i18n.t("error.oldbrowser") || "This browser version is too old, please update or upgrade your browser." : "progress" === a ? i18n.t("error.progress") || "Preparing your App data, please be patient." : "update" === a ? i18n.t("error.update") || "System is being updated, please try again later." : "no_cookie" === a ? i18n.t("error.no_cookie") || "Please enable cookie in the browser, thank you." : i18n.t("error.default") || "Please check your internet connection and try again."
		}

		function i(a) {
			if(a = Math.max(a, l.min_zoom), a = Math.min(a, l.max_zoom), q && (q.style.width = l.displayWidth * a + "px", q.style.height = l.displayHeight * a + "px"), r) {
				var b = "scale(" + a + "," + a + ")";
				r.css("transform", b), r.css("-webkit-transform", b), r.css("-moz-transform", b), r.css("-o-transform", b), r.css("-ms-transform", b)
			}
			C && C.setScale(a), l.displayScale = a
		}
		var j = ArowserUI.Client;
		if(!j.isClose) {
			j.isClose = !0, ArowserUI.Client.Current = this;
			var k = ArowserUI.Client.params,
				l = this;
			document.body.style.backgroundColor = "#ffffff";
			var m = ArowserUI.Client.main;
			$(m).remove(), clearInterval(ArowserUI.Client.measureSpeedInterval), clearInterval(ArowserUI.Client.blinkDownloadInterval);
			var n = window.innerWidth,
				o = window.innerHeight,
				p = document.getElementById("main-end");
			p && (ArowserUI.Client.main = p, p.style.width = n + "px", p.style.height = o + "px", p.style.margin = "0");
			var q = document.getElementById("mainframe"),
				r = $("#content");
			r.css("background-size", "cover");
			var s, t = h(a);
			if(1 === k.finish_page || "timeout" === a || "commercial_unavailable" === a) {
				$(".end-fiiser").show(), j.mobile || $("#errormsg_fiiser").addClass("smaller"), s = $("#errormsg_fiiser"), void 0 !== a && "" !== a && ("timeout" === a && k.preplay_timeout_message ? s.find(".error-text").html(k.preplay_timeout_message) : (s.find(".error-text").html(t), b && s.find(".error-code").html(b)));
				var u = null;
				if(-1 !== k.imageLoaded ? c() : u = setInterval(function() {
						-1 !== k.imageLoaded && l.updateDisplayScale && (l.updateDisplayScale(), c(), clearInterval(u), u = null)
					}, 500), "timeout" === a || "commercial_unavailable" === a) {
					var v = $(".customized-download");
					"" !== v.find("iframe").attr("src") ? v.css("display", "inline-block") : $(".action-layer .end-downloadnow").css("display", "inline-block")
				} else {
					$(".app-replay").css("display", "inline-block"), $(document).on("click", ".app-replay", function() {
						ArowserUI.Client.Analytics.trackEvent("replay")
					});
					var w = (new Date).getTime();
					if(k.playStartTime && w - k.playStartTime > 3e4 && (void 0 === a || "" === a)) {
						if(j.mobile) {
							$(".score-container").find(".star").css("font-size", "40px"), $(".score-container").find(".score-header").css("font-size", "25px"), $(".score-container").find(".score-footer").css("font-size", "25px"), $(".score-container").find(".score-close").css("margin-left", "30px"), $(".score-container").find(".star-symbol").css("width", "50px"), $(".score-container").find(".app-comment").css("height", "40px").css("line-height", "40px"), $(".score-container").find(".app-comment img").css("height", "40px").css("width", "40px"), $(".select-for-mobile").css("display", "inline-block");
							var x = !1;
							$(document).on("change", ".report-choice", function() {
								var a = $(this).val();
								console.log("val = " + a), a && -1 !== $.inArray("OTHER", a) ? x || (x = !0, console.log("oher is clicked")) : x && (x = !1, console.log("oher is disabled"))
							})
						} else $(".app-comment").addClass("pc"), $(".select-for-pc").css("display", "inline-block"), $(document).on("click", ".app-comment", function() {
							var a = $(".report");
							a.is(":visible") ? ($(".score-container").css("background-color", "rgba(0, 0, 0, 0.7)"), $(".report").hide()) : ($(".score-container").css("background-color", "rgba(0, 0, 0, 0.9)"), $(".report").show())
						}), $(document).on("click", ".report li", function() {
							if($(this).find(".report-other").length > 0) return void window.open("https://www.fiiser.com/contact/", "_blank");
							var a = $(this).find(".report-select");
							$(this).hasClass("checked") ? (a.text(""), $(this).removeClass("checked")) : ($(this).addClass("checked"), a.text(""))
						});
						$(".score-container").fadeIn("slow"), $(document).on("click", ".star-symbol", function() {
							$(".score-container").find(".score-submit-before").removeClass("score-submit-before").addClass("score-submit");
							var a = $(this);
							a.prevAll().text("").addClass("stared"), a.text("").addClass("stared"), a.nextAll().text("").removeClass("stared")
						}), $(document).on("click", ".score-close", function() {
							$(".score-container").slideUp("slow", function() {
								$(this).remove()
							})
						}), $(document).on("click", ".score-submit", function() {
							var a = $(".score-container"),
								b = a.find(".star-symbol.stared").length;
							$.post(ArowserUI.Client.URLs.score, {
								access_key: k.access_key,
								content: b,
								history_app_id: k.history_app_id,
								app_type: k.app_type
							}), a.find(".star").remove(), a.find(".comment").remove(), a.find(".score-footer").remove(), a.find(".score-header").css("margin-bottom", "20px");
							var c = i18n.t("Thanks for your feedback") || "Thanks for your feedback!";
							a.find(".score-text").text(c), setTimeout(function() {
								a.slideUp("slow", function() {
									$(this).remove()
								})
							}, 1500)
						})
					}
				}
			} else if(0 === k.finish_page) {
				if($(".end-main").show(), s = $("#errormsg"), s.find(".error-text").html(t), s.find(".error-code").html(b), "oldbrowser" === a) {
					var y = k.full_url,
						z = y.split("://"),
						A = "intent://" + z[1] + "#Intent;scheme=" + z[0] + ";package=com.android.chrome;end";
					j.Android && s.find(".chrome_btn").attr("href", A).css("display", "inline-block")
				}
				$(document).on("click", ".app-item-similar", function() {
					var a = $(this).data("current_app_id"),
						b = $(this).data("app_type");
					if(ArowserUI.Client.Analytics.trackEvent("similarapps", a + "_" + b), k.inIframe) {
						var c = "current_app_id " + a + "; app_type " + b;
						window.parent.postMessage(c, "*")
					}
				}), $(document).on("click", ".app-item-favorite", function() {
					var a = $(this).data("current_app_id"),
						b = $(this).data("app_type");
					if(ArowserUI.Client.Analytics.trackEvent("favoriteapps", a + "_" + b), k.inIframe) {
						var c = "current_app_id " + a + "; app_type " + b;
						window.parent.postMessage(c, "*")
					}
				}), $(document).on("click", ".app-item-hot", function() {
					var a = $(this).data("current_app_id"),
						b = $(this).data("app_type");
					if(ArowserUI.Client.Analytics.trackEvent("hotapps", a + "_" + b), k.inIframe) {
						var c = "current_app_id " + a + "; app_type " + b;
						window.parent.postMessage(c, "*")
					}
				}), $("img.cross_message").on("click", function() {
					k.inIframe && window.parent.postMessage("control close", "*")
				}), $(".appbutton a").hover(function() {
					$(this).addClass("hover");
					var a = $(this).parent().find("img"),
						b = a.attr("src").replace("icon_", "h_");
					a.attr("src", b)
				}, function() {
					$(this).removeClass("hover");
					var a = $(this).parent().find("img"),
						b = a.attr("src").replace("h_", "icon_");
					a.attr("src", b)
				});
				var B = document.getElementById("sharePanel");
				B.className = "popupSharePanel fix-blur";
				var C = ArowserUI.Client.Utility.Lightbox(B.outerHTML, 360, 120);
				C.setName("shareBox"), $(r).find("a.share").on("click", function(a) {
					a.preventDefault(), a.stopPropagation(), C.show();
					var b = ArowserUI.Client.short_url;
					if(j.mobile) $(C.getContent()).find(".share-url-mobile a").text(b).attr("href", b);
					else {
						var c = $(C.getContent()).find(".share-url input");
						c.attr("value", b).trigger("click")
					}
				});
				var D = "https://arowser.fiiser.com/resources/image/icon_fav.png",
					E = "https://arowser.fiiser.com/resources/image/icon_faved.png",
					F = $(r).find("a#addfav");
				j.uiwebview ? F.parent().hide() : F.on("click", function(a) {
					a.preventDefault(), a.stopPropagation();
					var b = 400,
						c = 480,
						h = "https://www.fiiser.com/service/login/iframe/?cs=1",
						i = screen.width / 2 - b / 2,
						l = screen.height / 2 - c / 2;
					if(k.locale) {
						var m = "";
						"ja" === k.locale ? m = "ja" : "zh_TW" === k.locale ? m = "zh-tw" : "zh_CN" === k.locale && (m = "zh-cn"), "" !== m && (h += "&language=" + m)
					}
					var n = window.open("", "", "toolbar=no, location=1, directories=no, status=1, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=" + b + ", height=" + c + ", top=" + l + ", left=" + i);
					Arowser.getToken(function(a) {
						if(null !== a) n.close(), j.Tool.getFavApps(function(b) {
							var c = j.Tool.isFavorite(b),
								e = F.find("img").attr("src");
							F.find("img").attr("src", "https://arowser.fiiser.com/resources/image/new_loading.gif"), c ? j.Tool.editFav("delete", function(b) {
								if(null === b || 500 === b.status) F.find("img").attr("src", e), F.removeClass("hover");
								else if(0 === b.status) {
									F.find("img").attr("src", D);
									var c = i18n.t("Add App") || "Add App";
									F.find("h2").text(c), F.removeClass("hover"), j.Tool.addViewToPageFav(b, "delete", a, function() {
										j.Tool.getFavApps(function(a) {
											d(a)
										})
									}), ArowserUI.Client.Analytics.trackEvent("favorite", "delete")
								}
							}) : j.Tool.editFav("add", function(b) {
								if(null === b || 500 === b.status) F.find("img").attr("src", e), F.removeClass("hover");
								else if(0 === b.status) {
									F.find("img").attr("src", E);
									var c = i18n.t("Added") || "Added";
									F.find("h2").text(c), F.removeClass("hover"), j.Tool.addViewToPageFav(b, "add", a, function() {
										j.Tool.getFavApps(function(a) {
											d(a)
										})
									}), ArowserUI.Client.Analytics.trackEvent("favorite", "add")
								}
							})
						});
						else {
							F.find("img").attr("src", D);
							var b = i18n.t("Add App") || "Add App";
							F.find("h2").text(b), f(k.category, function(a) {
								g(a)
							}), $("#addedAppList").hide(), setTimeout(function() {
								n.location = h
							}, 500);
							var c = setInterval(function() {
								n.closed !== !1 && (clearInterval(c), Arowser.getToken(function(a) {
									null !== a && j.Tool.getFavApps(function(b) {
										d(b);
										var c = j.Tool.isFavorite(b);
										if(e(F, c), F.find("img").attr("src") === D) {
											var h = F.find("img").attr("src");
											F.find("img").attr("src", "https://arowser.fiiser.com/resources/image/new_loading.gif"), j.Tool.editFav("add", function(b) {
												if(null === b || 500 === b.status) F.find("img").attr("src", h), F.removeClass("hover");
												else if(0 === b.status) {
													F.find("img").attr("src", E);
													var c = i18n.t("Added") || "Added";
													F.find("h2").text(c), F.removeClass("hover"), j.Tool.addViewToPageFav(b, "add", a, function() {
														j.Tool.getFavApps(function(a) {
															d(a)
														})
													}), ArowserUI.Client.Analytics.trackEvent("favorite", "add")
												}
											})
										}
										null !== b && (0 === parseInt(k.similar_app_length) || null === k.similar_app_length ? f(k.category, function(a) {
											g(a)
										}) : $("#hotAppList").hide())
									})
								}), F.removeClass("hover"))
							}, 200)
						}
					})
				}), Arowser.getToken(function(a) {
					null !== a ? j.Tool.getFavApps(function(a) {
						d(a);
						var b = j.Tool.isFavorite(a);
						e(F, b)
					}) : f(k.category, function(a) {
						g(a)
					})
				})
			}
			if($(p).show(), "progress" === a) {
				var G = "https://arowser.fiiser.com/resources/image/dot.gif";
				1 === k.finish_page && (G = "https://arowser.fiiser.com/resources/image/dot_w.gif");
				var H = "<img src='" + G + "'>";
				s.append(H), setInterval(function() {
					s.append(H)
				}, 2e3), setTimeout(function() {
					window.location = $(".app-replay").attr("href")
				}, 1e4)
			}
			k.inIframe && (void 0 === a || "" === a || "timeout" === a ? window.parent.postMessage("arowser finish error.finished " + t, "*") : window.parent.postMessage("arowser finish error." + a + " " + t, "*")), this.min_zoom = 1, this.max_zoom = 3, this.displayScale = 1, this.updateDisplayScale = function() {
				if(1 === k.finish_page || "timeout" === a || "commercial_unavailable" === a ? (k.inIframe && 1 === k.finish_page || ($(p).height() > $(p).width() ? ($(".end-fiiser").width(480), $(".end-fiiser").height(860)) : ($(".end-fiiser").width(860), $(".end-fiiser").height(480))), l.displayWidth = $(".end-fiiser").width(), l.displayHeight = $(".end-fiiser").height()) : 0 === k.finish_page && ($(p).height() > $(p).width() ? (l.displayWidth = 480, l.displayHeight = 860) : (l.displayWidth = 860, l.displayHeight = 480)), p) {
					var b = l.displayScale === l.min_zoom;
					l.min_zoom = Math.min(p.offsetWidth / Math.max(l.displayWidth, 1), p.offsetHeight / Math.max(l.displayHeight, 1)), l.max_zoom = Math.max(l.min_zoom, 3), l.displayScale < l.min_zoom || b ? i(l.min_zoom) : l.displayScale > l.max_zoom && i(l.max_zoom)
				}
			}, this.updateDisplayScale()
		}
	}, ArowserUI.Client.Utility = {
		measureSpeed: function(a) {
			var b = "fiiserad.jpg?" + Math.random().toString(),
				c = "resources/image/" + b,
				d = (new Date).getTime(),
				e = $.ajax({
					type: "GET",
					url: c,
					timeout: 5e3,
					success: function(c) {
						var f = {},
							g = (new Date).getTime() - d,
							h = e.getResponseHeader("Content-Length"),
							i = 8 * h / 1024 / 1024 / (g / 1e3);
						f.speedByDateRef = i, f.timeByDateRef = g, f.imageSize = h;
						try {
							for(var j = window.performance.getEntries(), k = j.length, l = 0; k > l; l++)
								if(j[l].name.split("/").pop() === b) {
									g = j[l].responseEnd - j[l].requestStart, i = 8 * h / 1024 / 1024 / (g / 1e3), f.speedByResourceTiming = i, f.timeByResourceTiming = g, f.durationByResourceTiming = j[l].duration;
									break
								}
						} catch(m) {}
						f.speed = i, a(f)
					},
					error: function(b, c, d) {
						var e = {};
						e.speed = 0, a(e)
					}
				})
		},
		Popupbox: function(a, b, c) {
			function d(a, b) {
				k.style.left = a + "px", k.style.top = b + "px";
				var c = document.createDocumentFragment();
				i.appendChild(j), i.appendChild(k), c.appendChild(i), j.addEventListener("click", function(a) {
					a.stopPropagation(), a.preventDefault(), j.removeEventListener("click"), i && i.parentNode && i.parentNode.removeChild(i)
				}), document.body.appendChild(c)
			}

			function e() {
				i && i.parentNode && i.parentNode.removeClass(i)
			}

			function f(a) {
				i = ArowserUI.Client.Tool.transformOrigin(i, "scale(" + a + "," + a + ")")
			}
			var g = 480,
				h = 480,
				i = document.createElement("div");
			i.className = "lightbox";
			var j = document.createElement("div");
			j.className = "lightshadow";
			var k = document.createElement("div");
			return k.style.position = "absolute", k.style.left = 0, k.style.top = 0, k.innerHTML = a, b && c && (g = b, h = c), k.style.width = g + "px", k.style.height = h + "px", {
				show: d,
				hide: e,
				setScale: f
			}
		},
		ClearWarningDisplay: function(a) {
			function b() {
				return a
			}

			function c(b, c) {
				$(a).find(b).text(c)
			}

			function d(b) {
				return $(a).find(b).text()
			}

			function e(a) {
				m = a
			}

			function f() {
				return $(a).is(":visible")
			}

			function g() {
				$(a).show()
			}

			function h() {
				window.clearTimeout(n), n = null
			}

			function i() {
				f() && ($(a).hide(), h())
			}

			function j(a, b) {
				f() && i(), g(), n = setTimeout(function() {
					k(function() {
						b && b()
					})
				}, a)
			}

			function k(b) {
				$(a).fadeOut("slow", function() {
					b && b()
				})
			}

			function l(b, c, d, e) {
				var f = $(e).find("div").width(),
					g = $(e).find("div").height();
				"auto" === ArowserUI.Client.params.type ? a = b > c ? 90 === d || 270 === d ? ArowserUI.Client.Tool.transformOrigin(a, "") : ArowserUI.Client.Tool.transformOrigin(a, "rotate(270deg) translate(-" + f + "px,0)") : 90 === d || 270 === d ? ArowserUI.Client.Tool.transformOrigin(a, "rotate(90deg) translate(0,-" + f + "px)") : ArowserUI.Client.Tool.transformOrigin(a, "") : "app" === ArowserUI.Client.params.type && (90 !== d && 270 !== d || (a = ArowserUI.Client.Tool.transformOrigin(a, "rotate(90deg) translate(0,-" + f + "px)")));
				var h, i = 35,
					j = 5;
				90 === d || 270 === d ? (h = g, 375 >= h ? (i = 10, j = 3) : 481 >= h ? i = 15 : 641 >= h ? i = 20 : 961 >= h ? i = 25 : 1025 >= h && (i = 30)) : (h = f, 250 >= h ? (i = 10, j = 3) : 375 >= h ? (i = 15, j = 3) : 481 >= h ? i = 20 : 641 >= h ? i = 25 : 961 >= h ? i = 30 : 1025 >= h && (i = 30)), a.style.width = h + "px", a.style.fontSize = i + "px", a.style.padding = j + "px 0px", $(a).find(".text-content").css("margin-left", 2 * j + "px"), $(a).find(".image-content").css("margin-left", j + "px");
				var g = i + 5;
				$(a).find(".image-content img").width(g + "px").height(g + "px")
			}
			a.className = "clearWarningDisplay", a = ArowserUI.Client.Tool.transformOrigin(a, void 0, "0 0"), a.style.display = "none";
			var m, n = null;
			return {
				show: g,
				hide: i,
				setScale: l,
				fadeIn: j,
				fadeOut: k,
				setText: c,
				isShow: f,
				setName: e,
				getText: d,
				getContent: b
			}
		},
		WarningDisplay: function(a, b, c, d) {
			function e(a) {
				p.style.zIndex = a
			}

			function f() {
				return !!p.parentNode
			}

			function g() {
				b && b.appendChild(p)
			}

			function h() {
				window.clearTimeout(r), r = null
			}

			function i() {
				p.parentNode && (b.removeChild(p), h())
			}

			function j(a, b) {
				f() && i(), g(), $(p).show(), r = setTimeout(function() {
					k(function() {
						b && b()
					})
				}, a)
			}

			function k(a) {
				$(p).fadeOut("slow", function() {
					a && a()
				})
			}

			function l(a, b) {
				$(p).find(a).text(b)
			}

			function m(a) {
				return $(p).find(a).text()
			}

			function n(a, b) {
				var e = "perspective(1px) scale(" + a + "," + a + ")";
				if(90 === b || 270 === b) {
					p.style.width = "780px", e += " rotate(90deg)";
					var f = " translate(" + c + "px," + -1 * (ArowserUI.Client.Control.sourceWidth - d) + "px)";
					e += f
				} else {
					p.style.width = "460px";
					var f = " translate(" + d + "px," + c + "px)";
					e += f
				}
				p = ArowserUI.Client.Tool.transformOrigin(p, e)
			}

			function o(a) {
				q = a
			}
			var p = document.createElement("div");
			p.className = "warningDisplay", p = ArowserUI.Client.Tool.transformOrigin(p, void 0, "0 0"), p.style.display = "none", p.appendChild(a);
			var q, r = null;
			return c || (c = 0), d || (d = 0), {
				show: g,
				hide: i,
				setScale: n,
				fadeIn: j,
				fadeOut: k,
				setText: l,
				isShow: f,
				setZindex: e,
				setName: o,
				getText: m
			}
		},
		Lightbox: function(a, b, c, d, e) {
			function f(a) {
				a && a.stopPropagation(), q()
			}

			function g() {
				var a = !1;
				return G && G.parentNode && (a = !0), a
			}

			function h() {
				g() ? q() : i()
			}

			function i() {
				var a = document.createDocumentFragment();
				G.appendChild(H), G.appendChild(I), a.appendChild(G), d ? d.appendChild(a) : document.body.appendChild(a), j()
			}

			function j() {
				var a = I.getElementsByClassName("lightbox-action-close"),
					b = function(a) {
						a.preventDefault(), a.stopPropagation(), q()
					};
				for(var c in a) {
					var d = a[c];
					d && d.addEventListener && d.addEventListener("click", b)
				}
				var e = I.getElementsByClassName("lightbox-action-download"),
					f = function(a) {
						a.preventDefault(), a.stopPropagation(), q(), M && M()
					};
				for(var c in e) {
					var g = e[c];
					g && g.addEventListener && g.addEventListener("click", f)
				}
				var h = I.getElementsByClassName("lightbox-action-confirm"),
					i = function(a) {
						q(), K && K()
					};
				for(var c in h) {
					var j = h[c];
					j && j.addEventListener && j.addEventListener("click", i)
				}
				var k = ArowserUI.Client.attachedKeyboard;
				k && (k.onkeydown = null, k.onkeyup = null)
			}

			function k(a) {
				J = a
			}

			function l(a) {
				K = a
			}

			function m(a) {
				L = a
			}

			function n(a) {
				M = a
			}

			function o(a) {
				N = a
			}

			function p() {
				return N
			}

			function q() {
				var a = ArowserUI.Client.attachedClient;
				if(a) {
					var b = ArowserUI.Client.attachedKeyboard;
					b && (b.onkeydown = function(b) {
						a.sendKeyEvent(1, b)
					}, b.onkeyup = function(b) {
						a.sendKeyEvent(0, b)
					})
				}
				G && G.parentNode && G.parentNode.removeChild(G), L && L()
			}

			function r(a) {
				D = a;
				var b = ArowserUI.Client.orientation,
					c = ArowserUI.Client.Control.sourceHeight,
					d = ArowserUI.Client.Control.sourceWidth,
					e = 0,
					f = 0,
					g = "perspective(1px) scale(" + a + ", " + a + ")";
				"shareBox" === O ? (I.style.marginLeft = -(E / 2) + "px", I.style.marginTop = -(F / 2) + "px", I.style.top = I.style.left = "50%") : (90 === b || 270 === b ? (e = (c - E) / 2, f = -(d + F) / 2, g += " rotate(90deg)") : (e = (d - E) / 2, f = (c - F) / 2), I = ArowserUI.Client.Tool.transformOrigin(I, void 0, "0 0")), g += " translate(" + e + "px," + f + "px)", I = ArowserUI.Client.Tool.transformOrigin(I, g)
			}

			function s(a, b, c) {
				a && b && (E = a, F = b, c ? $(I).animate({
					width: E + "px",
					height: F + "px"
				}) : (I.style.width = E + "px", I.style.height = F + "px"), r(D))
			}

			function t(a) {
				var b = I.getElementsByClassName("speed-val")[0];
				b.innerHTML = a
			}

			function u() {
				return G
			}

			function v() {
				return I
			}

			function w(a) {
				I.innerHTML = a, j()
			}

			function x() {
				return O
			}

			function y(a) {
				O = a
			}

			function z(a) {
				G.style.zIndex = a
			}

			function A(a) {
				c = a
			}

			function B(a) {
				b = a
			}

			function C(a) {
				H.className = a
			}
			var D, E = b,
				F = c,
				G = document.createElement("div");
			G.className = "lightbox";
			var H = document.createElement("div");
			H.className = "shadow";
			var I = document.createElement("div");
			I.className = "content", I.style.width = E + "px", I.style.height = F + "px", I.innerHTML = a;
			var J = null,
				K = null,
				L = null,
				M = null,
				N = !1,
				O = null;
			return 1 !== e && (G.addEventListener("mousedown", function(a) {
				a.stopPropagation()
			}), G.addEventListener("mouseup", function(a) {
				a.stopPropagation()
			}), G.addEventListener("touchstart", function(a) {
				a.stopPropagation()
			}), G.addEventListener("touchend", function(a) {
				a.stopPropagation()
			}), H.addEventListener("mouseup", function(a) {
				f(a)
			})), {
				show: i,
				hide: q,
				toggle: h,
				setScale: r,
				setSize: s,
				setZindex: z,
				isShow: g,
				getElement: u,
				setContent: w,
				getContent: v,
				setSpeed: t,
				setArowserCallback: k,
				setConfirmCallback: l,
				setCloseCallback: m,
				setLock: o,
				isLock: p,
				getName: x,
				setName: y,
				setDownloadCallback: n,
				setInputHeight: A,
				setInputWidth: B,
				setShadowClass: C
			}
		},
		Choices: function(a, b, c) {
			function d() {
				0 === $(h).children().length ? f() : g()
			}

			function e() {
				return 0 !== $(h).children().length
			}

			function f() {
				var b = document.createElement("div");
				b.innerHTML = a, h.append($(b));
				var c = ArowserUI.Client.short_url;
				if(ArowserUI.Client.mobile) h.find(".share-url-mobile a").text(c).attr("href", c);
				else {
					var d = h.find(".share-url input");
					d.attr("value", c).trigger("click")
				}
			}

			function g() {
				$(h).empty()
			}
			var h = $(c.getContent()).find(b);
			return {
				toggle: d,
				isOpen: e,
				show: f,
				hide: g
			}
		},
		ChainedWebsocket: function(a) {
			function b(a) {
				function f() {
					var c = e.shift();
					return c && (a.onerror = null, a.onopen = null, a.onresult = null, a.onclose = null, b(c)), c
				}

				function g() {
					d = a
				}
				console.log("attach websocket " + a.getUrl()), a.onopen = c.onopen, a.onresult = c.onresult, a.onclose = c.onclose, a.onerror = c.onerror, a.onopen = function() {
					g(), c.onopen && c.onopen()
				}, a.onerror = function(a) {
					!f() && c.onerror && c.onerror(a)
				}, a.onresult = function(a) {
					g(), c.onresult && c.onresult(a)
				}, a.onclose = function(a) {
					!f() && c.onclose && c.onclose(a)
				}, a.connect()
			}
			for(var c = this, d = null, e = [], f = 0; f < arguments.length; f++) e.push(arguments[f]);
			this.close = function() {
				e = [], d && d.close()
			}, this.connect = function() {
				var a = d ? d : e.shift();
				a ? b(a) : c.onerror && c.onerror()
			}
		},
		EventSourceControl: function(a, b, c, d, e) {
			function f() {
				j.onopen && j.onopen()
			}

			function g(a) {
				var b = a.data;
				try {
					var c = JSON.parse(b);
					0 === c.status && c.result && j.onresult && j.onresult(c.result)
				} catch(a) {
					j.onerror && j.onerror(a)
				}
			}

			function h(a) {
				a.readyState === EventSource.CLOSED ? j.onclose && j.onclose(a) : j.onerror && j.onerror(a)
			}
			var i = null,
				j = this;
			a += "?access_key=" + b, c && (a += "&current_app_id=" + c), d && (a += "&app_type=" + d), e && (a += "&commercial_number=" + e), this.onopen = null, this.onerror = null, this.onresult = null, this.onclose = null, this.close = function() {
				i.close()
			}, this.connect = function() {
				"undefined" != typeof EventSource ? (i = new EventSource(a), i.onopen = f, i.onmessage = g, i.onerror = h) : j.onclose && j.onclose()
			}, this.getUrl = function() {
				return a
			}
		},
		WebsocketControl: function(a, b, c, d, e, f) {
			function g() {
				o.onopen && o.onopen()
			}

			function h(a) {
				q && clearInterval(q), r || o.onclose && o.onclose(a)
			}

			function i(a) {
				var b = a.data;
				if(b) {
					if("sync" === b) {
						var c = ArowserUI.Client.params.protocol + ArowserUI.Client.params.connect_url + "/action/sync";
						return $.get(c), void p.send("sync")
					}
					try {
						var d = JSON.parse(b);
						0 === d.status && d.result && o.onresult && o.onresult(d.result)
					} catch(a) {
						o.onerror && o.onerror(a)
					}
				}
			}

			function j(a) {
				o.onerror && o.onerror(a)
			}
			var k = {
				"http:": "http:",
				"https:": "https:"
			};
			if("http:" !== a.substring(0, 5) && "https:" !== a.substring(0, 6)) {
				var l = k[window.location.protocol];
				if("/" === a.substring(0, 1)) a = l + "//" + window.location.host + a;
				else {
					var m = window.location.pathname.lastIndexOf("/"),
						n = window.location.pathname.substring(0, m + 1);
					a = l + "//" + window.location.host + n + a
				}
			}
			a += "?access_key=" + b + "&times=" + c, d && (a += "&current_app_id=" + d), e && (a += "&app_type=" + e), f && (a += "&commercial_number=" + f);
			var o = this;
			this.onopen = null, this.onerror = null, this.onresult = null, this.onclose = null;
			var p = null,
				q = null,
				r = !1;
			this.close = function() {
				q && clearInterval(q), r = !0, p && p.close()
			}, this.connect = function() {
				p = new SockJS(a), p.onopen = g, p.onclose = h, p.onmessage = i, p.onerror = j
			}, this.getUrl = function() {
				return a
			}
		},
		Youtube: function(a, b) {
			function c(b) {
				a.onVideoReady && a.onVideoReady()
			}

			function d(b) {
				switch(b.data) {
					case YT.PlayerState.PLAYING:
						a.onVideoPlaying && a.onVideoPlaying();
						break;
					case YT.PlayerState.ENDED:
						a.onVideoEnded && a.onVideoEnded()
				}
			}
			var e, f = a.videoWidth,
				g = a.videoHeight;
			return function() {
				var a = document.createElement("script");
				a.src = "https://www.youtube.com/iframe_api";
				var b = document.getElementsByTagName("script")[0];
				b.parentNode.insertBefore(a, b)
			}(), {
				onYouTubeIframeAPIReady: function() {
					e = new YT.Player("player", {
						playerVars: {
							autoplay: 1,
							controls: 0,
							disablekb: 1,
							enablejsapi: 1,
							rel: 0,
							showinfo: 0,
							playsinline: 1
						},
						height: g,
						width: f,
						videoId: b,
						events: {
							onReady: c,
							onStateChange: d
						}
					})
				},
				setSize: function(a, b) {
					e && e.setSize(a, b)
				}
			}
		},
		Videojs: function(a, b) {
			var c, d, e = a.videoWidth,
				f = a.videoHeight;
			! function() {
				var a = document.getElementById("player"),
					g = document.createElement("source");
				g.src = b, g.type = "video/mp4";
				var h = document.createElement("p");
				h.className = "vjs-no-js", h.innerHTML = 'To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>', d = document.createElement("video"), d.id = "player", d.poster = ArowserUI.Client.ImageURLS.app_base, d.width = e, d.height = f, d.className = "video-js vjs-default-skin vjs-big-play-centered", d.dataset.setup = '{ "controls": ' + ArowserUI.Client.mobile + ', "autoplay": true, "preload": "auto" }', d.appendChild(g), d.appendChild(h), a.parentNode.replaceChild(d, a), c = videojs("player"), c.width(e), c.height(f)
			}();
			return c.ready(function() {
				a.onVideoReady && a.onVideoReady()
			}), c.on("play", function() {
				a.onVideoPlaying && a.onVideoPlaying()
			}), c.on("ended", function() {
				a.onVideoEnded && a.onVideoEnded()
			}), {
				setSize: function(a, b) {
					c && (c.width(a), c.height(b)), d && (d.width = a, d.height = b)
				},
				close: function() {
					c && c.dispose()
				}
			}
		},
		IMA: function(a) {
			function b() {
				q = new google.ima.AdDisplayContainer(document.getElementById("adContainer"))
			}

			function c() {
				try {
					b(), q.initialize(), p = new google.ima.AdsLoader(q), p.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, d, !1), p.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, f, !1);
					var a = new google.ima.AdsRequest;
					a.adTagUrl = "http://googleads.g.doubleclick.net/pagead/ads?ad_type=video&client=ca-video-pub-4968145218643279&videoad_start_delay=0&description_url=http%3A%2F%2Fwww.google.com&max_ad_duration=40000&adtest=on", a.linearAdSlotWidth = 800, a.linearAdSlotHeight = 400, a.nonLinearAdSlotWidth = 800, a.nonLinearAdSlotHeight = 150, p.requestAds(a)
				} catch(c) {
					f()
				}
			}

			function d(a) {
				o = a.getAdsManager(s), o.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, f), o.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, g), o.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, h), o.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED, e), o.addEventListener(google.ima.AdEvent.Type.LOADED, e), o.addEventListener(google.ima.AdEvent.Type.STARTED, e), o.addEventListener(google.ima.AdEvent.Type.COMPLETE, e), o.addEventListener(google.ima.AdEvent.Type.SKIPPED, e);
				try {
					o.init(800, 480, google.ima.ViewMode.NORMAL), o.start()
				} catch(b) {}
			}

			function e(b) {
				var c = b.getAd();
				switch(b.type) {
					case google.ima.AdEvent.Type.LOADED:
						!c.isLinear();
						var d = c.isSkippable();
						d || a.onVideoReady && a.onVideoReady();
						break;
					case google.ima.AdEvent.Type.STARTED:
						c.isLinear() && (r = setInterval(function() {
							o.getRemainingTime()
						}, 300)), a.onVideoPlaying && a.onVideoPlaying();
						break;
					case google.ima.AdEvent.Type.SKIPPED:
					case google.ima.AdEvent.Type.COMPLETE:
						c.isLinear() && clearInterval(r), a.onVideoEnded && a.onVideoEnded()
				}
			}

			function f(b) {
				var c = document.createDocumentFragment(),
					d = document.createElement("img");
				for(d.className = "loading", d.src = "https://arowser.fiiser.com/resources/image/loading.gif", c.appendChild(d); i.firstChild;) i.removeChild(i.firstChild);
				i.appendChild(c), a.onVideoEnded && a.onVideoEnded()
			}

			function g() {
				s.pause()
			}

			function h() {
				s.play()
			}
			var i = document.getElementById("player"),
				j = document.createDocumentFragment(),
				k = document.createElement("div");
			k.setAttribute("id", "mainContainer");
			var l = document.createElement("div");
			l.setAttribute("id", "adContent");
			var m = document.createElement("video");
			m.setAttribute("id", "contentElement"), m.style.width = "800px", m.style.height = "480px", l.appendChild(m);
			var n = document.createElement("div");
			n.setAttribute("id", "adContainer"), k.appendChild(l), k.appendChild(n), j.appendChild(k), i.appendChild(j);
			var o, p, q, r, s = document.getElementById("contentElement");
			if(a.isMobile) {
				var t = function() {
					document.querySelector("div.description").style.display = "none", c(), window.removeEventListener("mouseup", t), window.removeEventListener("touchend", t)
				};
				document.querySelector("div.description").style.display = "block", window.addEventListener("mouseup", t, !1), window.addEventListener("touchend", t, !1)
			} else c();
			var u = 1;
			return {
				setSize: function(a, b) {
					if(k) {
						var c = Math.min(a / 800, b / 480);
						if(c !== u) {
							u = c;
							var d = 800 * u,
								e = 480 * u;
							i.style.width = d + "px", i.style.height = e + "px", k = ArowserUI.Client.Tool.transformOrigin(k, "scale(" + u + "," + u + ")", "0 0")
						}
					}
				}
			}
		}
	}, ArowserUI.Client.Analytics = {
		trackEvent: function(a, b) {
			var c = ArowserUI.Client.params.current_app_id + "_" + ArowserUI.Client.params.app_type;
			b = void 0 === b ? c : c + " " + b, ga("send", {
				hitType: "event",
				eventCategory: "clickEvent",
				eventAction: a,
				eventLabel: b
			})
		}
	}, ArowserUI.Client.Tool = {
		getFavApps: function(a) {
			var b = "https://www.fiiser.com/service/myfavorite/",
				c = "https://mobile.fiiser.com/service/myfavorite/",
				d = b;
			ArowserUI.Client.mobile && (d = c), $.ajax({
				url: d,
				dataType: "json",
				timeout: 5e3,
				type: "POST",
				cache: !1,
				xhrFields: {
					withCredentials: !0
				},
				success: function(b) {
					var c = b;
					a(c)
				},
				error: function(b) {
					a()
				}
			})
		},
		editFav: function(a, b) {
			var c = ArowserUI.Client.params,
				d = "https://www.fiiser.com/service/myfavorite/",
				e = "https://mobile.fiiser.com/service/myfavorite/",
				f = d;
			ArowserUI.Client.mobile && (f = e), f += a + "/?history_app_id=" + c.history_app_id + "&current_app_id=" + c.current_app_id + "&app_type=" + c.app_type;
			var g = "APA91bEf1YGd3GFjpaz_fiiser_yct5zv1Z2TDCQS39cX9b4jEGgakWq8Qr7qn5mZ2feNZ0U79WCoBeEpfcBsaEA_service",
				h = {
					client_key: g
				};
			$.ajax({
				url: f,
				dataType: "json",
				timeout: 3e3,
				type: "POST",
				data: h,
				xhrFields: {
					withCredentials: !0
				},
				headers: {
					"x-requested-with": "XMLHttpRequest"
				},
				success: function(a) {
					var c = a;
					c.url = f, b(c)
				},
				error: function(a) {
					b()
				}
			})
		},
		isFavorite: function(a) {
			var b = !1;
			if(a && a.length)
				for(var c = a.length, d = ArowserUI.Client.params, e = 0; c > e; e++)
					if(d.current_app_id === a[e].current_app_id.toString() && d.app_type === a[e].app_type) {
						b = !0;
						break
					}
			return b
		},
		addViewToPageFav: function(a, b, c, d) {
			var e = ArowserUI.Client.params;
			$.ajax({
				url: ArowserUI.Client.URLs.favs,
				type: "POST",
				data: {
					url: a.url,
					access_key: e.access_key,
					action: b,
					token: c,
					history_app_id: e.history_app_id,
					app_type: e.app_type,
					package_name: e.package_name
				},
				success: function() {
					d && d()
				}
			})
		},
		transformOrigin: function(a, b, c) {
			return void 0 !== b && (a.style.transform = a.style.webkitTransform = a.style.mozTransform = a.style.oTransform = a.style.msTransform = b), void 0 !== c && (a.style.transformOrigin = a.style.webkitTransformOrigin = a.style.MozTransformOrigin = a.style.OTransformOrigin = a.style.msTransformOrigin = c), a
		},
		getAuthCode: function() {
			return Math.random().toString(36).substring(7)
		}
	},
	function() {
		function a() {
			if(document.body.scrollLeft !== b || document.body.scrollTop !== c || document.body.scrollWidth !== d || document.body.scrollHeight !== e || window.innerWidth !== f || window.innerHeight !== g) {
				c = document.body.scrollTop, b = document.body.scrollLeft, d = document.body.scrollWidth, e = document.body.scrollHeight, f = window.innerWidth, g = window.innerHeight;
				var a = window.innerWidth,
					h = window.innerHeight,
					i = ArowserUI.Client.main;
				i.style.top = document.body.scrollTop + "px", i.style.left = document.body.scrollLeft + "px", i.style.width = a + "px", i.style.height = h + "px", ArowserUI.Client.Current && "function" == typeof ArowserUI.Client.Current.updateDisplayScale && ArowserUI.Client.Current.updateDisplayScale()
			}
		}
		var b = 0,
			c = 0,
			d = 0,
			e = 0,
			f = 0,
			g = 0;
		window.onresize = a, window.onscroll = a, ArowserUI.Client.resizeInterval = window.setInterval(a, 10)
	}();
var Arowser = Arowser || {};
Arowser.initURL = "/action/init?access_key=", Arowser.getAccessKeyURL = "/sdk/getaccesskey",
	function() {
		if(window) {
			var a = 5,
				b = {};
			window.onerror = function(c, d, e, f, g) {
				if(c in b ? b[c] += 1 : b[c] = 1, !(b[c] > a) && (c += " [ERROR TIMES#" + b[c] + "]", Arowser.connect_url)) {
					var h = Arowser.protocol + Arowser.connect_url + "/ajax/error",
						i = {
							message: c,
							url: d,
							line: e,
							href: window.location.href
						};
					f && (i.column = f), g && g.stack && (i.error = g.stack.toString()), Arowser.access_key && (i.access_key = Arowser.access_key), d && $.post(h, i)
				}
			};
			console.log;
			console.log = function(a) {
				if(Arowser.connect_url) {
					var b = Arowser.protocol + Arowser.connect_url + "/ajax/log",
						c = {
							message: a
						};
					Arowser.access_key && (c.access_key = Arowser.access_key), a && $.post(b, c)
				}
			}
		}
	}(), Arowser.getAccessKey = function(a, b) {
		var c = a.query_string,
			d = a.connect_url;
		a.protocol;
		if(!d) return void b(1, {
			errormsg: "busy"
		});
		var e = d + Arowser.getAccessKeyURL + c;
		$.ajax({
			url: e,
			dataType: "json",
			timeout: 3e4,
			xhrFields: {
				withCredentials: !0
			},
			success: function(a) {
				b(a.status, a.result)
			},
			error: function(a) {
				b(1, null)
			}
		})
	}, Arowser.init = function(a, b) {
		if(Arowser.access_key = a.access_key, "" !== a.error) return void b(!1);
		var c = a.access_key,
			d = a.token,
			e = a.current_app_id,
			f = a.app_type,
			g = a.connect_url,
			h = a.protocol;
		if(Arowser.connect_url = g, Arowser.protocol = h, c) {
			var i = h + g + Arowser.initURL + c;
			d ? (i += "&token=" + d, getFavApps(function(a) {
				var c = !1;
				if(null !== a)
					for(var d = a.length, g = 0; d > g; g++)
						if(e === a[g].current_app_id.toString() && f === a[g].app_type) {
							c = !0;
							break
						}
				i += "&isFavorite=" + c, $.ajax({
					url: i,
					dataType: "json",
					timeout: 3e4,
					xhrFields: {
						withCredentials: !0
					},
					success: function(a) {
						return 0 === a.status || 1 === a.status ? void b(!0, a.status) : void b(!1)
					},
					error: function(a) {
						b(!1)
					}
				})
			})) : $.ajax({
				url: i,
				dataType: "json",
				timeout: 3e4,
				xhrFields: {
					withCredentials: !0
				},
				success: function(a) {
					return 0 === a.status || 1 === a.status ? void b(!0, a.status) : void b(!1)
				},
				error: function(a) {
					b(!1)
				}
			})
		}
	}, Arowser.getToken = function(a) {
		var b = null,
			c = "https://www.fiiser.com/service/login/token/";
		ArowserUI.Client.mobile && (c = "https://mobile.fiiser.com/service/login/token/"), $.ajax({
			url: c,
			dataType: "json",
			timeout: 5e3,
			type: "GET",
			xhrFields: {
				withCredentials: !0
			},
			success: function(c) {
				if(0 === c.status && c.result) {
					var d = c.result;
					null !== d && (b = d.token)
				}
				a(b)
			},
			error: function(c) {
				a(b)
			}
		})
	}, Arowser.support = function() {
		function a() {
			var a = document.createElement("canvas");
			return !(!a.getContext || !a.getContext("2d"))
		}

		function b() {
			"function" != typeof Object.create && (Object.create = function() {
				var a = function() {};
				return function(b) {
					if(arguments.length > 1) throw Error("Second argument not supported");
					if("object" != typeof b) throw new TypeError("Argument must be an object");
					a.prototype = b;
					var c = new a;
					return a.prototype = null, c
				}
			}())
		}
		var c = !0;
		return a() || (c = !1), b(), c
	}, Arowser.checkCookie = function() {
		var a = !!navigator.cookieEnabled;
		return "undefined" != typeof navigator.cookieEnabled || a || (document.cookie = "testcookie", a = -1 !== document.cookie.indexOf("testcookie")), a
	};
var Fiiser = window.Fiiser || {};
Fiiser.Share = function(a) {
	function b() {
		var b = a(".share-share");
		c(b, "")
	}

	function c(b, c) {
		var p = i18n.t("title") || "Fiiser App Search Engine";
		k = b.data("app_tiny_url"), l = b.data("uri"), m = b.data("app_icon"), n = b.data("title"), o = b.data("content");
		var r = o + "\n\n'" + n + "'\n";
		b.find(".share-email").replaceWith(h(r, "share-email", k, p)), b.find(".share-google").replaceWith(g(m, "share-google", k)), b.find(".share-twitter").replaceWith(i(r, "share-twitter", k)), ArowserUI.Client.short_url = k, a.ajax({
			url: ArowserUI.Client.URLs.shortenUrl,
			type: "POST",
			data: {
				long_url: k
			},
			success: function(a) {
				ArowserUI.Client.short_url = a
			},
			error: function(a) {
				ArowserUI.Client.short_url = k
			}
		}), q ? (b.find(".share-line").replaceWith(j(r, "share-line", k)), b.find(".share-url").remove()) : (b.find(".share-line").remove(), b.find(".share-url-mobile").remove()), d(b, c), e(), f(c)
	}

	function d(b, c, d) {
		a(document).on("click", ".share-facebook", function(e) {
			e.preventDefault(), e.stopPropagation(), ArowserUI.Client.Analytics.trackEvent("share", "facebook");
			var f = b.data("app_url"),
				g = b.data("app_icon"),
				h = b.data("title");
			b.data("content");
			FB.ui({
				method: "feed",
				link: f,
				picture: g,
				name: h,
				caption: "fiiser.com"
			}, function(b) {
				b && b.post_id && a.post(d, {
					post_id: b.post_id,
					access_key: c.access_key,
					history_app_id: c.history_app_id,
					app_type: c.app_type
				})
			})
		})
	}

	function e() {
		a(document).on("click", ".share-twitter", function(b) {
			b.preventDefault(), b.stopPropagation(), ArowserUI.Client.Analytics.trackEvent("share", "twitter");
			var c = 575,
				d = 400,
				e = screen.width / 2 - c / 2,
				f = screen.height / 2 - d / 2;
			return window.open(a(this).attr("href"), "twitter", "width=" + c + ", height=" + d + ", top=" + f + ", left=" + e), !1
		})
	}

	function f(b) {
		a(document).on("click", 'a[href^="mailto:"]', function(a) {
			b.ignore_onbeforeunload = !0, b.ignore_onbeforeunload_attach = !0, ArowserUI.Client.Analytics.trackEvent("share", "mail")
		})
	}

	function g(a, b, c) {
		return '<a class="' + b + '" href="https://plus.google.com/share?url=' + c + "\" onclick=\"javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600,top=" + (screen.height / 2 - 300) + ", left=" + (screen.width / 2 - 300) + "'); ArowserUI.Client.Analytics.trackEvent('share', 'google'); return false;\"></a>"
	}

	function h(a, b, c, d) {
		var e = d;
		return '<a class="' + b + '" href="mailto:?subject=' + encodeURIComponent(e) + "&body=" + encodeURI(a + c) + '"></a>'
	}

	function i(a, b, c) {
		return '<a href="https://twitter.com/share?url=' + encodeURIComponent(c) + "&text=" + encodeURI(a) + '&hashtags=Fiiser" class="' + b + '" ></a><script>window.twttr=(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);t._e=[];t.ready=function(f){t._e.push(f);};return t;}(document,"script","twitter-wjs"));</script>'
	}

	function j(a, b, c) {
		return '<a class="' + b + '" href="http://line.me/R/msg/text/?' + encodeURI(a) + encodeURI(c) + '" target="_blank" onclick="ArowserUI.Client.Analytics.trackEvent(\'share\', \'line\');"></a>'
	}
	var k, l, m, n, o, p = function() {
			var a = !1;
			return function(b, c) {
				(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0, 4))) && (a = !0);
			}(navigator.userAgent || navigator.vendor || window.opera), a
		},
		q = p();
	return {
		init: b,
		initShareEvent: c
	}
}(jQuery);